function ra(e,n){const u=Object.create(null),c=e.split(",");for(let g=0;g<c.length;g++)u[c[g]]=!0;return n?g=>!!u[g.toLowerCase()]:g=>!!u[g]}function Vn(e){if(it(e)){const n={};for(let u=0;u<e.length;u++){const c=e[u],g=Ct(c)?Hc(c):Vn(c);if(g)for(const m in g)n[m]=g[m]}return n}else{if(Ct(e))return e;if(kt(e))return e}}const Nc=/;(?![^(]*\))/g,Uc=/:([^]+)/,Bc=/\/\*.*?\*\//gs;function Hc(e){const n={};return e.replace(Bc,"").split(Nc).forEach(u=>{if(u){const c=u.split(Uc);c.length>1&&(n[c[0].trim()]=c[1].trim())}}),n}function Wn(e){let n="";if(Ct(e))n=e;else if(it(e))for(let u=0;u<e.length;u++){const c=Wn(e[u]);c&&(n+=c+" ")}else if(kt(e))for(const u in e)e[u]&&(n+=u+" ");return n.trim()}function ev(e){if(!e)return null;let{class:n,style:u}=e;return n&&!Ct(n)&&(e.class=Wn(n)),u&&(e.style=Vn(u)),e}const Kc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jc=ra(Kc);function ol(e){return!!e||e===""}const Gc=e=>Ct(e)?e:e==null?"":it(e)||kt(e)&&(e.toString===cl||!nt(e.toString))?JSON.stringify(e,ll,2):String(e),ll=(e,n)=>n&&n.__v_isRef?ll(e,n.value):on(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((u,[c,g])=>(u[`${c} =>`]=g,u),{})}:ul(n)?{[`Set(${n.size})`]:[...n.values()]}:kt(n)&&!it(n)&&!fl(n)?String(n):n,Lt={},an=[],ir=()=>{},Vc=()=>!1,Wc=/^on[^a-z]/,Yn=e=>Wc.test(e),na=e=>e.startsWith("onUpdate:"),Gt=Object.assign,ia=(e,n)=>{const u=e.indexOf(n);u>-1&&e.splice(u,1)},Yc=Object.prototype.hasOwnProperty,pt=(e,n)=>Yc.call(e,n),it=Array.isArray,on=e=>wi(e)==="[object Map]",ul=e=>wi(e)==="[object Set]",nt=e=>typeof e=="function",Ct=e=>typeof e=="string",sa=e=>typeof e=="symbol",kt=e=>e!==null&&typeof e=="object",aa=e=>kt(e)&&nt(e.then)&&nt(e.catch),cl=Object.prototype.toString,wi=e=>cl.call(e),qc=e=>wi(e).slice(8,-1),fl=e=>wi(e)==="[object Object]",oa=e=>Ct(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xn=ra(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ii=e=>{const n=Object.create(null);return u=>n[u]||(n[u]=e(u))},$c=/-(\w)/g,hr=Ii(e=>e.replace($c,(n,u)=>u?u.toUpperCase():"")),zc=/\B([A-Z])/g,mn=Ii(e=>e.replace(zc,"-$1").toLowerCase()),Ci=Ii(e=>e.charAt(0).toUpperCase()+e.slice(1)),As=Ii(e=>e?`on${Ci(e)}`:""),Bn=(e,n)=>!Object.is(e,n),Ls=(e,n)=>{for(let u=0;u<e.length;u++)e[u](n)},pi=(e,n,u)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:u})},Xc=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Qc=e=>{const n=Ct(e)?Number(e):NaN;return isNaN(n)?e:n};let Eo;const Jc=()=>Eo||(Eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let rr;class Zc{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rr,!n&&rr&&(this.index=(rr.scopes||(rr.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const u=rr;try{return rr=this,n()}finally{rr=u}}}on(){rr=this}off(){rr=this.parent}stop(n){if(this._active){let u,c;for(u=0,c=this.effects.length;u<c;u++)this.effects[u].stop();for(u=0,c=this.cleanups.length;u<c;u++)this.cleanups[u]();if(this.scopes)for(u=0,c=this.scopes.length;u<c;u++)this.scopes[u].stop(!0);if(!this.detached&&this.parent&&!n){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0,this._active=!1}}}function ef(e,n=rr){n&&n.active&&n.effects.push(e)}function tf(){return rr}const la=e=>{const n=new Set(e);return n.w=0,n.n=0,n},dl=e=>(e.w&Pr)>0,hl=e=>(e.n&Pr)>0,rf=({deps:e})=>{if(e.length)for(let n=0;n<e.length;n++)e[n].w|=Pr},nf=e=>{const{deps:n}=e;if(n.length){let u=0;for(let c=0;c<n.length;c++){const g=n[c];dl(g)&&!hl(g)?g.delete(e):n[u++]=g,g.w&=~Pr,g.n&=~Pr}n.length=u}},vi=new WeakMap;let Cn=0,Pr=1;const Us=30;let nr;const $r=Symbol(""),Bs=Symbol("");class ua{constructor(n,u=null,c){this.fn=n,this.scheduler=u,this.active=!0,this.deps=[],this.parent=void 0,ef(this,c)}run(){if(!this.active)return this.fn();let n=nr,u=Ir;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=nr,nr=this,Ir=!0,Pr=1<<++Cn,Cn<=Us?rf(this):To(this),this.fn()}finally{Cn<=Us&&nf(this),Pr=1<<--Cn,nr=this.parent,Ir=u,this.parent=void 0,this.deferStop&&this.stop()}}stop(){nr===this?this.deferStop=!0:this.active&&(To(this),this.onStop&&this.onStop(),this.active=!1)}}function To(e){const{deps:n}=e;if(n.length){for(let u=0;u<n.length;u++)n[u].delete(e);n.length=0}}let Ir=!0;const gl=[];function yn(){gl.push(Ir),Ir=!1}function En(){const e=gl.pop();Ir=e===void 0?!0:e}function Yt(e,n,u){if(Ir&&nr){let c=vi.get(e);c||vi.set(e,c=new Map);let g=c.get(u);g||c.set(u,g=la()),pl(g)}}function pl(e,n){let u=!1;Cn<=Us?hl(e)||(e.n|=Pr,u=!dl(e)):u=!e.has(nr),u&&(e.add(nr),nr.deps.push(e))}function _r(e,n,u,c,g,m){const E=vi.get(e);if(!E)return;let S=[];if(n==="clear")S=[...E.values()];else if(u==="length"&&it(e)){const b=Number(c);E.forEach((L,w)=>{(w==="length"||w>=b)&&S.push(L)})}else switch(u!==void 0&&S.push(E.get(u)),n){case"add":it(e)?oa(u)&&S.push(E.get("length")):(S.push(E.get($r)),on(e)&&S.push(E.get(Bs)));break;case"delete":it(e)||(S.push(E.get($r)),on(e)&&S.push(E.get(Bs)));break;case"set":on(e)&&S.push(E.get($r));break}if(S.length===1)S[0]&&Hs(S[0]);else{const b=[];for(const L of S)L&&b.push(...L);Hs(la(b))}}function Hs(e,n){const u=it(e)?e:[...e];for(const c of u)c.computed&&bo(c);for(const c of u)c.computed||bo(c)}function bo(e,n){(e!==nr||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function sf(e,n){var u;return(u=vi.get(e))===null||u===void 0?void 0:u.get(n)}const af=ra("__proto__,__v_isRef,__isVue"),vl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(sa)),of=ca(),lf=ca(!1,!0),uf=ca(!0),So=cf();function cf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...u){const c=mt(this);for(let m=0,E=this.length;m<E;m++)Yt(c,"get",m+"");const g=c[n](...u);return g===-1||g===!1?c[n](...u.map(mt)):g}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...u){yn();const c=mt(this)[n].apply(this,u);return En(),c}}),e}function ff(e){const n=mt(this);return Yt(n,"has",e),n.hasOwnProperty(e)}function ca(e=!1,n=!1){return function(c,g,m){if(g==="__v_isReactive")return!e;if(g==="__v_isReadonly")return e;if(g==="__v_isShallow")return n;if(g==="__v_raw"&&m===(e?n?Df:bl:n?Tl:El).get(c))return c;const E=it(c);if(!e){if(E&&pt(So,g))return Reflect.get(So,g,m);if(g==="hasOwnProperty")return ff}const S=Reflect.get(c,g,m);return(sa(g)?vl.has(g):af(g))||(e||Yt(c,"get",g),n)?S:Pt(S)?E&&oa(g)?S:S.value:kt(S)?e?Sl(S):Or(S):S}}const df=ml(),hf=ml(!0);function ml(e=!1){return function(u,c,g,m){let E=u[c];if(zr(E)&&Pt(E)&&!Pt(g))return!1;if(!e&&(!mi(g)&&!zr(g)&&(E=mt(E),g=mt(g)),!it(u)&&Pt(E)&&!Pt(g)))return E.value=g,!0;const S=it(u)&&oa(c)?Number(c)<u.length:pt(u,c),b=Reflect.set(u,c,g,m);return u===mt(m)&&(S?Bn(g,E)&&_r(u,"set",c,g):_r(u,"add",c,g)),b}}function gf(e,n){const u=pt(e,n);e[n];const c=Reflect.deleteProperty(e,n);return c&&u&&_r(e,"delete",n,void 0),c}function pf(e,n){const u=Reflect.has(e,n);return(!sa(n)||!vl.has(n))&&Yt(e,"has",n),u}function vf(e){return Yt(e,"iterate",it(e)?"length":$r),Reflect.ownKeys(e)}const yl={get:of,set:df,deleteProperty:gf,has:pf,ownKeys:vf},mf={get:uf,set(e,n){return!0},deleteProperty(e,n){return!0}},yf=Gt({},yl,{get:lf,set:hf}),fa=e=>e,xi=e=>Reflect.getPrototypeOf(e);function ri(e,n,u=!1,c=!1){e=e.__v_raw;const g=mt(e),m=mt(n);u||(n!==m&&Yt(g,"get",n),Yt(g,"get",m));const{has:E}=xi(g),S=c?fa:u?ga:Hn;if(E.call(g,n))return S(e.get(n));if(E.call(g,m))return S(e.get(m));e!==g&&e.get(n)}function ni(e,n=!1){const u=this.__v_raw,c=mt(u),g=mt(e);return n||(e!==g&&Yt(c,"has",e),Yt(c,"has",g)),e===g?u.has(e):u.has(e)||u.has(g)}function ii(e,n=!1){return e=e.__v_raw,!n&&Yt(mt(e),"iterate",$r),Reflect.get(e,"size",e)}function _o(e){e=mt(e);const n=mt(this);return xi(n).has.call(n,e)||(n.add(e),_r(n,"add",e,e)),this}function Ao(e,n){n=mt(n);const u=mt(this),{has:c,get:g}=xi(u);let m=c.call(u,e);m||(e=mt(e),m=c.call(u,e));const E=g.call(u,e);return u.set(e,n),m?Bn(n,E)&&_r(u,"set",e,n):_r(u,"add",e,n),this}function Lo(e){const n=mt(this),{has:u,get:c}=xi(n);let g=u.call(n,e);g||(e=mt(e),g=u.call(n,e)),c&&c.call(n,e);const m=n.delete(e);return g&&_r(n,"delete",e,void 0),m}function ko(){const e=mt(this),n=e.size!==0,u=e.clear();return n&&_r(e,"clear",void 0,void 0),u}function si(e,n){return function(c,g){const m=this,E=m.__v_raw,S=mt(E),b=n?fa:e?ga:Hn;return!e&&Yt(S,"iterate",$r),E.forEach((L,w)=>c.call(g,b(L),b(w),m))}}function ai(e,n,u){return function(...c){const g=this.__v_raw,m=mt(g),E=on(m),S=e==="entries"||e===Symbol.iterator&&E,b=e==="keys"&&E,L=g[e](...c),w=u?fa:n?ga:Hn;return!n&&Yt(m,"iterate",b?Bs:$r),{next(){const{value:A,done:y}=L.next();return y?{value:A,done:y}:{value:S?[w(A[0]),w(A[1])]:w(A),done:y}},[Symbol.iterator](){return this}}}}function kr(e){return function(...n){return e==="delete"?!1:this}}function Ef(){const e={get(m){return ri(this,m)},get size(){return ii(this)},has:ni,add:_o,set:Ao,delete:Lo,clear:ko,forEach:si(!1,!1)},n={get(m){return ri(this,m,!1,!0)},get size(){return ii(this)},has:ni,add:_o,set:Ao,delete:Lo,clear:ko,forEach:si(!1,!0)},u={get(m){return ri(this,m,!0)},get size(){return ii(this,!0)},has(m){return ni.call(this,m,!0)},add:kr("add"),set:kr("set"),delete:kr("delete"),clear:kr("clear"),forEach:si(!0,!1)},c={get(m){return ri(this,m,!0,!0)},get size(){return ii(this,!0)},has(m){return ni.call(this,m,!0)},add:kr("add"),set:kr("set"),delete:kr("delete"),clear:kr("clear"),forEach:si(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{e[m]=ai(m,!1,!1),u[m]=ai(m,!0,!1),n[m]=ai(m,!1,!0),c[m]=ai(m,!0,!0)}),[e,u,n,c]}const[Tf,bf,Sf,_f]=Ef();function da(e,n){const u=n?e?_f:Sf:e?bf:Tf;return(c,g,m)=>g==="__v_isReactive"?!e:g==="__v_isReadonly"?e:g==="__v_raw"?c:Reflect.get(pt(u,g)&&g in c?u:c,g,m)}const Af={get:da(!1,!1)},Lf={get:da(!1,!0)},kf={get:da(!0,!1)},El=new WeakMap,Tl=new WeakMap,bl=new WeakMap,Df=new WeakMap;function Rf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wf(e){return e.__v_skip||!Object.isExtensible(e)?0:Rf(qc(e))}function Or(e){return zr(e)?e:ha(e,!1,yl,Af,El)}function If(e){return ha(e,!1,yf,Lf,Tl)}function Sl(e){return ha(e,!0,mf,kf,bl)}function ha(e,n,u,c,g){if(!kt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const m=g.get(e);if(m)return m;const E=wf(e);if(E===0)return e;const S=new Proxy(e,E===2?c:u);return g.set(e,S),S}function ln(e){return zr(e)?ln(e.__v_raw):!!(e&&e.__v_isReactive)}function zr(e){return!!(e&&e.__v_isReadonly)}function mi(e){return!!(e&&e.__v_isShallow)}function _l(e){return ln(e)||zr(e)}function mt(e){const n=e&&e.__v_raw;return n?mt(n):e}function Al(e){return pi(e,"__v_skip",!0),e}const Hn=e=>kt(e)?Or(e):e,ga=e=>kt(e)?Sl(e):e;function Ll(e){Ir&&nr&&(e=mt(e),pl(e.dep||(e.dep=la())))}function kl(e,n){e=mt(e);const u=e.dep;u&&Hs(u)}function Pt(e){return!!(e&&e.__v_isRef===!0)}function Sr(e){return Cf(e,!1)}function Cf(e,n){return Pt(e)?e:new xf(e,n)}class xf{constructor(n,u){this.__v_isShallow=u,this.dep=void 0,this.__v_isRef=!0,this._rawValue=u?n:mt(n),this._value=u?n:Hn(n)}get value(){return Ll(this),this._value}set value(n){const u=this.__v_isShallow||mi(n)||zr(n);n=u?n:mt(n),Bn(n,this._rawValue)&&(this._rawValue=n,this._value=u?n:Hn(n),kl(this))}}function Ut(e){return Pt(e)?e.value:e}const Pf={get:(e,n,u)=>Ut(Reflect.get(e,n,u)),set:(e,n,u,c)=>{const g=e[n];return Pt(g)&&!Pt(u)?(g.value=u,!0):Reflect.set(e,n,u,c)}};function Dl(e){return ln(e)?e:new Proxy(e,Pf)}class Of{constructor(n,u,c){this._object=n,this._key=u,this._defaultValue=c,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return sf(mt(this._object),this._key)}}function Rl(e,n,u){const c=e[n];return Pt(c)?c:new Of(e,n,u)}var wl;class Ff{constructor(n,u,c,g){this._setter=u,this.dep=void 0,this.__v_isRef=!0,this[wl]=!1,this._dirty=!0,this.effect=new ua(n,()=>{this._dirty||(this._dirty=!0,kl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!g,this.__v_isReadonly=c}get value(){const n=mt(this);return Ll(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}wl="__v_isReadonly";function Mf(e,n,u=!1){let c,g;const m=nt(e);return m?(c=e,g=ir):(c=e.get,g=e.set),new Ff(c,g,m||!g,u)}function Cr(e,n,u,c){let g;try{g=c?e(...c):e()}catch(m){Tn(m,n,u)}return g}function sr(e,n,u,c){if(nt(e)){const m=Cr(e,n,u,c);return m&&aa(m)&&m.catch(E=>{Tn(E,n,u)}),m}const g=[];for(let m=0;m<e.length;m++)g.push(sr(e[m],n,u,c));return g}function Tn(e,n,u,c=!0){const g=n?n.vnode:null;if(n){let m=n.parent;const E=n.proxy,S=u;for(;m;){const L=m.ec;if(L){for(let w=0;w<L.length;w++)if(L[w](e,E,S)===!1)return}m=m.parent}const b=n.appContext.config.errorHandler;if(b){Cr(b,null,10,[e,E,S]);return}}Nf(e,u,g,c)}function Nf(e,n,u,c=!0){console.error(e)}let Kn=!1,Ks=!1;const Ht=[];let fr=0;const un=[];let br=null,Yr=0;const Il=Promise.resolve();let pa=null;function va(e){const n=pa||Il;return e?n.then(this?e.bind(this):e):n}function Uf(e){let n=fr+1,u=Ht.length;for(;n<u;){const c=n+u>>>1;jn(Ht[c])<e?n=c+1:u=c}return n}function Pi(e){(!Ht.length||!Ht.includes(e,Kn&&e.allowRecurse?fr+1:fr))&&(e.id==null?Ht.push(e):Ht.splice(Uf(e.id),0,e),Cl())}function Cl(){!Kn&&!Ks&&(Ks=!0,pa=Il.then(Pl))}function Bf(e){const n=Ht.indexOf(e);n>fr&&Ht.splice(n,1)}function xl(e){it(e)?un.push(...e):(!br||!br.includes(e,e.allowRecurse?Yr+1:Yr))&&un.push(e),Cl()}function Do(e,n=Kn?fr+1:0){for(;n<Ht.length;n++){const u=Ht[n];u&&u.pre&&(Ht.splice(n,1),n--,u())}}function yi(e){if(un.length){const n=[...new Set(un)];if(un.length=0,br){br.push(...n);return}for(br=n,br.sort((u,c)=>jn(u)-jn(c)),Yr=0;Yr<br.length;Yr++)br[Yr]();br=null,Yr=0}}const jn=e=>e.id==null?1/0:e.id,Hf=(e,n)=>{const u=jn(e)-jn(n);if(u===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return u};function Pl(e){Ks=!1,Kn=!0,Ht.sort(Hf);const n=ir;try{for(fr=0;fr<Ht.length;fr++){const u=Ht[fr];u&&u.active!==!1&&Cr(u,null,14)}}finally{fr=0,Ht.length=0,yi(),Kn=!1,pa=null,(Ht.length||un.length)&&Pl()}}function Kf(e,n,...u){if(e.isUnmounted)return;const c=e.vnode.props||Lt;let g=u;const m=n.startsWith("update:"),E=m&&n.slice(7);if(E&&E in c){const w=`${E==="modelValue"?"model":E}Modifiers`,{number:A,trim:y}=c[w]||Lt;y&&(g=u.map(I=>Ct(I)?I.trim():I)),A&&(g=u.map(Xc))}let S,b=c[S=As(n)]||c[S=As(hr(n))];!b&&m&&(b=c[S=As(mn(n))]),b&&sr(b,e,6,g);const L=c[S+"Once"];if(L){if(!e.emitted)e.emitted={};else if(e.emitted[S])return;e.emitted[S]=!0,sr(L,e,6,g)}}function Ol(e,n,u=!1){const c=n.emitsCache,g=c.get(e);if(g!==void 0)return g;const m=e.emits;let E={},S=!1;if(!nt(e)){const b=L=>{const w=Ol(L,n,!0);w&&(S=!0,Gt(E,w))};!u&&n.mixins.length&&n.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}return!m&&!S?(kt(e)&&c.set(e,null),null):(it(m)?m.forEach(b=>E[b]=null):Gt(E,m),kt(e)&&c.set(e,E),E)}function Oi(e,n){return!e||!Yn(n)?!1:(n=n.slice(2).replace(/Once$/,""),pt(e,n[0].toLowerCase()+n.slice(1))||pt(e,mn(n))||pt(e,n))}let Qt=null,Fi=null;function Ei(e){const n=Qt;return Qt=e,Fi=e&&e.type.__scopeId||null,n}function tv(e){Fi=e}function rv(){Fi=null}function Fl(e,n=Qt,u){if(!n||e._n)return e;const c=(...g)=>{c._d&&No(-1);const m=Ei(n);let E;try{E=e(...g)}finally{Ei(m),c._d&&No(1)}return E};return c._n=!0,c._c=!0,c._d=!0,c}function ks(e){const{type:n,vnode:u,proxy:c,withProxy:g,props:m,propsOptions:[E],slots:S,attrs:b,emit:L,render:w,renderCache:A,data:y,setupState:I,ctx:k,inheritAttrs:z}=e;let Z,V;const M=Ei(e);try{if(u.shapeFlag&4){const re=g||c;Z=zt(w.call(re,re,A,m,I,y,k)),V=b}else{const re=n;Z=zt(re.length>1?re(m,{attrs:b,slots:S,emit:L}):re(m,null)),V=n.props?b:Gf(b)}}catch(re){Nn.length=0,Tn(re,e,1),Z=xt(Fr)}let B=Z;if(V&&z!==!1){const re=Object.keys(V),{shapeFlag:q}=B;re.length&&q&7&&(E&&re.some(na)&&(V=Vf(V,E)),B=gn(B,V))}return u.dirs&&(B=gn(B),B.dirs=B.dirs?B.dirs.concat(u.dirs):u.dirs),u.transition&&(B.transition=u.transition),Z=B,Ei(M),Z}function jf(e){let n;for(let u=0;u<e.length;u++){const c=e[u];if(_i(c)){if(c.type!==Fr||c.children==="v-if"){if(n)return;n=c}}else return}return n}const Gf=e=>{let n;for(const u in e)(u==="class"||u==="style"||Yn(u))&&((n||(n={}))[u]=e[u]);return n},Vf=(e,n)=>{const u={};for(const c in e)(!na(c)||!(c.slice(9)in n))&&(u[c]=e[c]);return u};function Wf(e,n,u){const{props:c,children:g,component:m}=e,{props:E,children:S,patchFlag:b}=n,L=m.emitsOptions;if(n.dirs||n.transition)return!0;if(u&&b>=0){if(b&1024)return!0;if(b&16)return c?Ro(c,E,L):!!E;if(b&8){const w=n.dynamicProps;for(let A=0;A<w.length;A++){const y=w[A];if(E[y]!==c[y]&&!Oi(L,y))return!0}}}else return(g||S)&&(!S||!S.$stable)?!0:c===E?!1:c?E?Ro(c,E,L):!0:!!E;return!1}function Ro(e,n,u){const c=Object.keys(n);if(c.length!==Object.keys(e).length)return!0;for(let g=0;g<c.length;g++){const m=c[g];if(n[m]!==e[m]&&!Oi(u,m))return!0}return!1}function ma({vnode:e,parent:n},u){for(;n&&n.subTree===e;)(e=n.vnode).el=u,n=n.parent}const Yf=e=>e.__isSuspense,qf={name:"Suspense",__isSuspense:!0,process(e,n,u,c,g,m,E,S,b,L){e==null?zf(n,u,c,g,m,E,S,b,L):Xf(e,n,u,c,g,E,S,b,L)},hydrate:Qf,create:ya,normalize:Jf},$f=qf;function Gn(e,n){const u=e.props&&e.props[n];nt(u)&&u()}function zf(e,n,u,c,g,m,E,S,b){const{p:L,o:{createElement:w}}=b,A=w("div"),y=e.suspense=ya(e,g,c,n,A,u,m,E,S,b);L(null,y.pendingBranch=e.ssContent,A,null,c,y,m,E),y.deps>0?(Gn(e,"onPending"),Gn(e,"onFallback"),L(null,e.ssFallback,n,u,c,null,m,E),cn(y,e.ssFallback)):y.resolve()}function Xf(e,n,u,c,g,m,E,S,{p:b,um:L,o:{createElement:w}}){const A=n.suspense=e.suspense;A.vnode=n,n.el=e.el;const y=n.ssContent,I=n.ssFallback,{activeBranch:k,pendingBranch:z,isInFallback:Z,isHydrating:V}=A;if(z)A.pendingBranch=y,wr(y,z)?(b(z,y,A.hiddenContainer,null,g,A,m,E,S),A.deps<=0?A.resolve():Z&&(b(k,I,u,c,g,null,m,E,S),cn(A,I))):(A.pendingId++,V?(A.isHydrating=!1,A.activeBranch=z):L(z,g,A),A.deps=0,A.effects.length=0,A.hiddenContainer=w("div"),Z?(b(null,y,A.hiddenContainer,null,g,A,m,E,S),A.deps<=0?A.resolve():(b(k,I,u,c,g,null,m,E,S),cn(A,I))):k&&wr(y,k)?(b(k,y,u,c,g,A,m,E,S),A.resolve(!0)):(b(null,y,A.hiddenContainer,null,g,A,m,E,S),A.deps<=0&&A.resolve()));else if(k&&wr(y,k))b(k,y,u,c,g,A,m,E,S),cn(A,y);else if(Gn(n,"onPending"),A.pendingBranch=y,A.pendingId++,b(null,y,A.hiddenContainer,null,g,A,m,E,S),A.deps<=0)A.resolve();else{const{timeout:M,pendingId:B}=A;M>0?setTimeout(()=>{A.pendingId===B&&A.fallback(I)},M):M===0&&A.fallback(I)}}function ya(e,n,u,c,g,m,E,S,b,L,w=!1){const{p:A,m:y,um:I,n:k,o:{parentNode:z,remove:Z}}=L,V=e.props?Qc(e.props.timeout):void 0,M={vnode:e,parent:n,parentComponent:u,isSVG:E,container:c,hiddenContainer:g,anchor:m,deps:0,pendingId:0,timeout:typeof V=="number"?V:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:w,isUnmounted:!1,effects:[],resolve(B=!1){const{vnode:re,activeBranch:q,pendingBranch:Q,pendingId:$,effects:ie,parentComponent:pe,container:Ce}=M;if(M.isHydrating)M.isHydrating=!1;else if(!B){const W=q&&Q.transition&&Q.transition.mode==="out-in";W&&(q.transition.afterLeave=()=>{$===M.pendingId&&y(Q,Ce,F,0)});let{anchor:F}=M;q&&(F=k(q),I(q,pe,M,!0)),W||y(Q,Ce,F,0)}cn(M,Q),M.pendingBranch=null,M.isInFallback=!1;let ee=M.parent,C=!1;for(;ee;){if(ee.pendingBranch){ee.effects.push(...ie),C=!0;break}ee=ee.parent}C||xl(ie),M.effects=[],Gn(re,"onResolve")},fallback(B){if(!M.pendingBranch)return;const{vnode:re,activeBranch:q,parentComponent:Q,container:$,isSVG:ie}=M;Gn(re,"onFallback");const pe=k(q),Ce=()=>{M.isInFallback&&(A(null,B,$,pe,Q,null,ie,S,b),cn(M,B))},ee=B.transition&&B.transition.mode==="out-in";ee&&(q.transition.afterLeave=Ce),M.isInFallback=!0,I(q,Q,null,!0),ee||Ce()},move(B,re,q){M.activeBranch&&y(M.activeBranch,B,re,q),M.container=B},next(){return M.activeBranch&&k(M.activeBranch)},registerDep(B,re){const q=!!M.pendingBranch;q&&M.deps++;const Q=B.vnode.el;B.asyncDep.catch($=>{Tn($,B,0)}).then($=>{if(B.isUnmounted||M.isUnmounted||M.pendingId!==B.suspenseId)return;B.asyncResolved=!0;const{vnode:ie}=B;Ys(B,$,!1),Q&&(ie.el=Q);const pe=!Q&&B.subTree.el;re(B,ie,z(Q||B.subTree.el),Q?null:k(B.subTree),M,E,b),pe&&Z(pe),ma(B,ie.el),q&&--M.deps===0&&M.resolve()})},unmount(B,re){M.isUnmounted=!0,M.activeBranch&&I(M.activeBranch,u,B,re),M.pendingBranch&&I(M.pendingBranch,u,B,re)}};return M}function Qf(e,n,u,c,g,m,E,S,b){const L=n.suspense=ya(n,c,u,e.parentNode,document.createElement("div"),null,g,m,E,S,!0),w=b(e,L.pendingBranch=n.ssContent,u,L,m,E);return L.deps===0&&L.resolve(),w}function Jf(e){const{shapeFlag:n,children:u}=e,c=n&32;e.ssContent=wo(c?u.default:u),e.ssFallback=c?wo(u.fallback):xt(Fr)}function wo(e){let n;if(nt(e)){const u=hn&&e._c;u&&(e._d=!1,dr()),e=e(),u&&(e._d=!0,n=Jt,nu())}return it(e)&&(e=jf(e)),e=zt(e),n&&!e.dynamicChildren&&(e.dynamicChildren=n.filter(u=>u!==e)),e}function Ml(e,n){n&&n.pendingBranch?it(e)?n.effects.push(...e):n.effects.push(e):xl(e)}function cn(e,n){e.activeBranch=n;const{vnode:u,parentComponent:c}=e,g=u.el=n.el;c&&c.subTree===u&&(c.vnode.el=g,ma(c,g))}function Nl(e,n){if(wt){let u=wt.provides;const c=wt.parent&&wt.parent.provides;c===u&&(u=wt.provides=Object.create(c)),u[e]=n}}function fn(e,n,u=!1){const c=wt||Qt;if(c){const g=c.parent==null?c.vnode.appContext&&c.vnode.appContext.provides:c.parent.provides;if(g&&e in g)return g[e];if(arguments.length>1)return u&&nt(n)?n.call(c.proxy):n}}function Zf(e,n){return Ea(e,null,n)}const oi={};function Pn(e,n,u){return Ea(e,n,u)}function Ea(e,n,{immediate:u,deep:c,flush:g,onTrack:m,onTrigger:E}=Lt){const S=tf()===(wt==null?void 0:wt.scope)?wt:null;let b,L=!1,w=!1;if(Pt(e)?(b=()=>e.value,L=mi(e)):ln(e)?(b=()=>e,c=!0):it(e)?(w=!0,L=e.some(B=>ln(B)||mi(B)),b=()=>e.map(B=>{if(Pt(B))return B.value;if(ln(B))return nn(B);if(nt(B))return Cr(B,S,2)})):nt(e)?n?b=()=>Cr(e,S,2):b=()=>{if(!(S&&S.isUnmounted))return A&&A(),sr(e,S,3,[y])}:b=ir,n&&c){const B=b;b=()=>nn(B())}let A,y=B=>{A=V.onStop=()=>{Cr(B,S,4)}},I;if(pn)if(y=ir,n?u&&sr(n,S,3,[b(),w?[]:void 0,y]):b(),g==="sync"){const B=Wd();I=B.__watcherHandles||(B.__watcherHandles=[])}else return ir;let k=w?new Array(e.length).fill(oi):oi;const z=()=>{if(V.active)if(n){const B=V.run();(c||L||(w?B.some((re,q)=>Bn(re,k[q])):Bn(B,k)))&&(A&&A(),sr(n,S,3,[B,k===oi?void 0:w&&k[0]===oi?[]:k,y]),k=B)}else V.run()};z.allowRecurse=!!n;let Z;g==="sync"?Z=z:g==="post"?Z=()=>Wt(z,S&&S.suspense):(z.pre=!0,S&&(z.id=S.uid),Z=()=>Pi(z));const V=new ua(b,Z);n?u?z():k=V.run():g==="post"?Wt(V.run.bind(V),S&&S.suspense):V.run();const M=()=>{V.stop(),S&&S.scope&&ia(S.scope.effects,V)};return I&&I.push(M),M}function ed(e,n,u){const c=this.proxy,g=Ct(e)?e.includes(".")?Ul(c,e):()=>c[e]:e.bind(c,c);let m;nt(n)?m=n:(m=n.handler,u=n);const E=wt;Mr(this);const S=Ea(g,m.bind(c),u);return E?Mr(E):xr(),S}function Ul(e,n){const u=n.split(".");return()=>{let c=e;for(let g=0;g<u.length&&c;g++)c=c[u[g]];return c}}function nn(e,n){if(!kt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),Pt(e))nn(e.value,n);else if(it(e))for(let u=0;u<e.length;u++)nn(e[u],n);else if(ul(e)||on(e))e.forEach(u=>{nn(u,n)});else if(fl(e))for(const u in e)nn(e[u],n);return e}function Bl(e){return nt(e)?{setup:e,name:e.name}:e}const On=e=>!!e.type.__asyncLoader;function td(e){nt(e)&&(e={loader:e});const{loader:n,loadingComponent:u,errorComponent:c,delay:g=200,timeout:m,suspensible:E=!0,onError:S}=e;let b=null,L,w=0;const A=()=>(w++,b=null,y()),y=()=>{let I;return b||(I=b=n().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),S)return new Promise((z,Z)=>{S(k,()=>z(A()),()=>Z(k),w+1)});throw k}).then(k=>I!==b&&b?b:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),L=k,k)))};return Bl({name:"AsyncComponentWrapper",__asyncLoader:y,get __asyncResolved(){return L},setup(){const I=wt;if(L)return()=>Ds(L,I);const k=M=>{b=null,Tn(M,I,13,!c)};if(E&&I.suspense||pn)return y().then(M=>()=>Ds(M,I)).catch(M=>(k(M),()=>c?xt(c,{error:M}):null));const z=Sr(!1),Z=Sr(),V=Sr(!!g);return g&&setTimeout(()=>{V.value=!1},g),m!=null&&setTimeout(()=>{if(!z.value&&!Z.value){const M=new Error(`Async component timed out after ${m}ms.`);k(M),Z.value=M}},m),y().then(()=>{z.value=!0,I.parent&&Ta(I.parent.vnode)&&Pi(I.parent.update)}).catch(M=>{k(M),Z.value=M}),()=>{if(z.value&&L)return Ds(L,I);if(Z.value&&c)return xt(c,{error:Z.value});if(u&&!V.value)return xt(u)}}})}function Ds(e,n){const{ref:u,props:c,children:g,ce:m}=n.vnode,E=xt(e,c,g);return E.ref=u,E.ce=m,delete n.vnode.ce,E}const Ta=e=>e.type.__isKeepAlive;function Hl(e,n){jl(e,"a",n)}function Kl(e,n){jl(e,"da",n)}function jl(e,n,u=wt){const c=e.__wdc||(e.__wdc=()=>{let g=u;for(;g;){if(g.isDeactivated)return;g=g.parent}return e()});if(Mi(n,c,u),u){let g=u.parent;for(;g&&g.parent;)Ta(g.parent.vnode)&&rd(c,n,u,g),g=g.parent}}function rd(e,n,u,c){const g=Mi(n,e,c,!0);Ti(()=>{ia(c[n],g)},u)}function Mi(e,n,u=wt,c=!1){if(u){const g=u[e]||(u[e]=[]),m=n.__weh||(n.__weh=(...E)=>{if(u.isUnmounted)return;yn(),Mr(u);const S=sr(n,u,e,E);return xr(),En(),S});return c?g.unshift(m):g.push(m),m}}const Ar=e=>(n,u=wt)=>(!pn||e==="sp")&&Mi(e,(...c)=>n(...c),u),Gl=Ar("bm"),Vl=Ar("m"),nd=Ar("bu"),id=Ar("u"),Wl=Ar("bum"),Ti=Ar("um"),sd=Ar("sp"),ad=Ar("rtg"),od=Ar("rtc");function Yl(e,n=wt){Mi("ec",e,n)}function cr(e,n,u,c){const g=e.dirs,m=n&&n.dirs;for(let E=0;E<g.length;E++){const S=g[E];m&&(S.oldValue=m[E].value);let b=S.dir[c];b&&(yn(),sr(b,u,8,[e.el,S,e,n]),En())}}const ql="components";function nv(e,n){return ud(ql,e,!0,n)||e}const ld=Symbol();function ud(e,n,u=!0,c=!1){const g=Qt||wt;if(g){const m=g.type;if(e===ql){const S=Hd(m,!1);if(S&&(S===n||S===hr(n)||S===Ci(hr(n))))return m}const E=Io(g[e]||m[e],n)||Io(g.appContext[e],n);return!E&&c?m:E}}function Io(e,n){return e&&(e[n]||e[hr(n)]||e[Ci(hr(n))])}function cd(e,n,u,c){let g;const m=u&&u[c];if(it(e)||Ct(e)){g=new Array(e.length);for(let E=0,S=e.length;E<S;E++)g[E]=n(e[E],E,void 0,m&&m[E])}else if(typeof e=="number"){g=new Array(e);for(let E=0;E<e;E++)g[E]=n(E+1,E,void 0,m&&m[E])}else if(kt(e))if(e[Symbol.iterator])g=Array.from(e,(E,S)=>n(E,S,void 0,m&&m[S]));else{const E=Object.keys(e);g=new Array(E.length);for(let S=0,b=E.length;S<b;S++){const L=E[S];g[S]=n(e[L],L,S,m&&m[S])}}else g=[];return u&&(u[c]=g),g}const js=e=>e?ou(e)?Aa(e)||e.proxy:js(e.parent):null,Fn=Gt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>js(e.parent),$root:e=>js(e.root),$emit:e=>e.emit,$options:e=>ba(e),$forceUpdate:e=>e.f||(e.f=()=>Pi(e.update)),$nextTick:e=>e.n||(e.n=va.bind(e.proxy)),$watch:e=>ed.bind(e)}),Rs=(e,n)=>e!==Lt&&!e.__isScriptSetup&&pt(e,n),fd={get({_:e},n){const{ctx:u,setupState:c,data:g,props:m,accessCache:E,type:S,appContext:b}=e;let L;if(n[0]!=="$"){const I=E[n];if(I!==void 0)switch(I){case 1:return c[n];case 2:return g[n];case 4:return u[n];case 3:return m[n]}else{if(Rs(c,n))return E[n]=1,c[n];if(g!==Lt&&pt(g,n))return E[n]=2,g[n];if((L=e.propsOptions[0])&&pt(L,n))return E[n]=3,m[n];if(u!==Lt&&pt(u,n))return E[n]=4,u[n];Gs&&(E[n]=0)}}const w=Fn[n];let A,y;if(w)return n==="$attrs"&&Yt(e,"get",n),w(e);if((A=S.__cssModules)&&(A=A[n]))return A;if(u!==Lt&&pt(u,n))return E[n]=4,u[n];if(y=b.config.globalProperties,pt(y,n))return y[n]},set({_:e},n,u){const{data:c,setupState:g,ctx:m}=e;return Rs(g,n)?(g[n]=u,!0):c!==Lt&&pt(c,n)?(c[n]=u,!0):pt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(m[n]=u,!0)},has({_:{data:e,setupState:n,accessCache:u,ctx:c,appContext:g,propsOptions:m}},E){let S;return!!u[E]||e!==Lt&&pt(e,E)||Rs(n,E)||(S=m[0])&&pt(S,E)||pt(c,E)||pt(Fn,E)||pt(g.config.globalProperties,E)},defineProperty(e,n,u){return u.get!=null?e._.accessCache[n]=0:pt(u,"value")&&this.set(e,n,u.value,null),Reflect.defineProperty(e,n,u)}};let Gs=!0;function dd(e){const n=ba(e),u=e.proxy,c=e.ctx;Gs=!1,n.beforeCreate&&Co(n.beforeCreate,e,"bc");const{data:g,computed:m,methods:E,watch:S,provide:b,inject:L,created:w,beforeMount:A,mounted:y,beforeUpdate:I,updated:k,activated:z,deactivated:Z,beforeDestroy:V,beforeUnmount:M,destroyed:B,unmounted:re,render:q,renderTracked:Q,renderTriggered:$,errorCaptured:ie,serverPrefetch:pe,expose:Ce,inheritAttrs:ee,components:C,directives:W,filters:F}=n;if(L&&hd(L,c,null,e.appContext.config.unwrapInjectedRef),E)for(const he in E){const fe=E[he];nt(fe)&&(c[he]=fe.bind(u))}if(g){const he=g.call(u,u);kt(he)&&(e.data=Or(he))}if(Gs=!0,m)for(const he in m){const fe=m[he],Ke=nt(fe)?fe.bind(u,u):nt(fe.get)?fe.get.bind(u,u):ir,We=!nt(fe)&&nt(fe.set)?fe.set.bind(u):ir,Ge=uu({get:Ke,set:We});Object.defineProperty(c,he,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:Ue=>Ge.value=Ue})}if(S)for(const he in S)$l(S[he],c,u,he);if(b){const he=nt(b)?b.call(u):b;Reflect.ownKeys(he).forEach(fe=>{Nl(fe,he[fe])})}w&&Co(w,e,"c");function me(he,fe){it(fe)?fe.forEach(Ke=>he(Ke.bind(u))):fe&&he(fe.bind(u))}if(me(Gl,A),me(Vl,y),me(nd,I),me(id,k),me(Hl,z),me(Kl,Z),me(Yl,ie),me(od,Q),me(ad,$),me(Wl,M),me(Ti,re),me(sd,pe),it(Ce))if(Ce.length){const he=e.exposed||(e.exposed={});Ce.forEach(fe=>{Object.defineProperty(he,fe,{get:()=>u[fe],set:Ke=>u[fe]=Ke})})}else e.exposed||(e.exposed={});q&&e.render===ir&&(e.render=q),ee!=null&&(e.inheritAttrs=ee),C&&(e.components=C),W&&(e.directives=W)}function hd(e,n,u=ir,c=!1){it(e)&&(e=Vs(e));for(const g in e){const m=e[g];let E;kt(m)?"default"in m?E=fn(m.from||g,m.default,!0):E=fn(m.from||g):E=fn(m),Pt(E)&&c?Object.defineProperty(n,g,{enumerable:!0,configurable:!0,get:()=>E.value,set:S=>E.value=S}):n[g]=E}}function Co(e,n,u){sr(it(e)?e.map(c=>c.bind(n.proxy)):e.bind(n.proxy),n,u)}function $l(e,n,u,c){const g=c.includes(".")?Ul(u,c):()=>u[c];if(Ct(e)){const m=n[e];nt(m)&&Pn(g,m)}else if(nt(e))Pn(g,e.bind(u));else if(kt(e))if(it(e))e.forEach(m=>$l(m,n,u,c));else{const m=nt(e.handler)?e.handler.bind(u):n[e.handler];nt(m)&&Pn(g,m,e)}}function ba(e){const n=e.type,{mixins:u,extends:c}=n,{mixins:g,optionsCache:m,config:{optionMergeStrategies:E}}=e.appContext,S=m.get(n);let b;return S?b=S:!g.length&&!u&&!c?b=n:(b={},g.length&&g.forEach(L=>bi(b,L,E,!0)),bi(b,n,E)),kt(n)&&m.set(n,b),b}function bi(e,n,u,c=!1){const{mixins:g,extends:m}=n;m&&bi(e,m,u,!0),g&&g.forEach(E=>bi(e,E,u,!0));for(const E in n)if(!(c&&E==="expose")){const S=gd[E]||u&&u[E];e[E]=S?S(e[E],n[E]):n[E]}return e}const gd={data:xo,props:Wr,emits:Wr,methods:Wr,computed:Wr,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:Wr,directives:Wr,watch:vd,provide:xo,inject:pd};function xo(e,n){return n?e?function(){return Gt(nt(e)?e.call(this,this):e,nt(n)?n.call(this,this):n)}:n:e}function pd(e,n){return Wr(Vs(e),Vs(n))}function Vs(e){if(it(e)){const n={};for(let u=0;u<e.length;u++)n[e[u]]=e[u];return n}return e}function jt(e,n){return e?[...new Set([].concat(e,n))]:n}function Wr(e,n){return e?Gt(Gt(Object.create(null),e),n):n}function vd(e,n){if(!e)return n;if(!n)return e;const u=Gt(Object.create(null),e);for(const c in n)u[c]=jt(e[c],n[c]);return u}function md(e,n,u,c=!1){const g={},m={};pi(m,Ni,1),e.propsDefaults=Object.create(null),zl(e,n,g,m);for(const E in e.propsOptions[0])E in g||(g[E]=void 0);u?e.props=c?g:If(g):e.type.props?e.props=g:e.props=m,e.attrs=m}function yd(e,n,u,c){const{props:g,attrs:m,vnode:{patchFlag:E}}=e,S=mt(g),[b]=e.propsOptions;let L=!1;if((c||E>0)&&!(E&16)){if(E&8){const w=e.vnode.dynamicProps;for(let A=0;A<w.length;A++){let y=w[A];if(Oi(e.emitsOptions,y))continue;const I=n[y];if(b)if(pt(m,y))I!==m[y]&&(m[y]=I,L=!0);else{const k=hr(y);g[k]=Ws(b,S,k,I,e,!1)}else I!==m[y]&&(m[y]=I,L=!0)}}}else{zl(e,n,g,m)&&(L=!0);let w;for(const A in S)(!n||!pt(n,A)&&((w=mn(A))===A||!pt(n,w)))&&(b?u&&(u[A]!==void 0||u[w]!==void 0)&&(g[A]=Ws(b,S,A,void 0,e,!0)):delete g[A]);if(m!==S)for(const A in m)(!n||!pt(n,A))&&(delete m[A],L=!0)}L&&_r(e,"set","$attrs")}function zl(e,n,u,c){const[g,m]=e.propsOptions;let E=!1,S;if(n)for(let b in n){if(xn(b))continue;const L=n[b];let w;g&&pt(g,w=hr(b))?!m||!m.includes(w)?u[w]=L:(S||(S={}))[w]=L:Oi(e.emitsOptions,b)||(!(b in c)||L!==c[b])&&(c[b]=L,E=!0)}if(m){const b=mt(u),L=S||Lt;for(let w=0;w<m.length;w++){const A=m[w];u[A]=Ws(g,b,A,L[A],e,!pt(L,A))}}return E}function Ws(e,n,u,c,g,m){const E=e[u];if(E!=null){const S=pt(E,"default");if(S&&c===void 0){const b=E.default;if(E.type!==Function&&nt(b)){const{propsDefaults:L}=g;u in L?c=L[u]:(Mr(g),c=L[u]=b.call(null,n),xr())}else c=b}E[0]&&(m&&!S?c=!1:E[1]&&(c===""||c===mn(u))&&(c=!0))}return c}function Xl(e,n,u=!1){const c=n.propsCache,g=c.get(e);if(g)return g;const m=e.props,E={},S=[];let b=!1;if(!nt(e)){const w=A=>{b=!0;const[y,I]=Xl(A,n,!0);Gt(E,y),I&&S.push(...I)};!u&&n.mixins.length&&n.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!m&&!b)return kt(e)&&c.set(e,an),an;if(it(m))for(let w=0;w<m.length;w++){const A=hr(m[w]);Po(A)&&(E[A]=Lt)}else if(m)for(const w in m){const A=hr(w);if(Po(A)){const y=m[w],I=E[A]=it(y)||nt(y)?{type:y}:Object.assign({},y);if(I){const k=Mo(Boolean,I.type),z=Mo(String,I.type);I[0]=k>-1,I[1]=z<0||k<z,(k>-1||pt(I,"default"))&&S.push(A)}}}const L=[E,S];return kt(e)&&c.set(e,L),L}function Po(e){return e[0]!=="$"}function Oo(e){const n=e&&e.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:e===null?"null":""}function Fo(e,n){return Oo(e)===Oo(n)}function Mo(e,n){return it(n)?n.findIndex(u=>Fo(u,e)):nt(n)&&Fo(n,e)?0:-1}const Ql=e=>e[0]==="_"||e==="$stable",Sa=e=>it(e)?e.map(zt):[zt(e)],Ed=(e,n,u)=>{if(n._n)return n;const c=Fl((...g)=>Sa(n(...g)),u);return c._c=!1,c},Jl=(e,n,u)=>{const c=e._ctx;for(const g in e){if(Ql(g))continue;const m=e[g];if(nt(m))n[g]=Ed(g,m,c);else if(m!=null){const E=Sa(m);n[g]=()=>E}}},Zl=(e,n)=>{const u=Sa(n);e.slots.default=()=>u},Td=(e,n)=>{if(e.vnode.shapeFlag&32){const u=n._;u?(e.slots=mt(n),pi(n,"_",u)):Jl(n,e.slots={})}else e.slots={},n&&Zl(e,n);pi(e.slots,Ni,1)},bd=(e,n,u)=>{const{vnode:c,slots:g}=e;let m=!0,E=Lt;if(c.shapeFlag&32){const S=n._;S?u&&S===1?m=!1:(Gt(g,n),!u&&S===1&&delete g._):(m=!n.$stable,Jl(n,g)),E=n}else n&&(Zl(e,n),E={default:1});if(m)for(const S in g)!Ql(S)&&!(S in E)&&delete g[S]};function eu(){return{app:null,config:{isNativeTag:Vc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sd=0;function _d(e,n){return function(c,g=null){nt(c)||(c=Object.assign({},c)),g!=null&&!kt(g)&&(g=null);const m=eu(),E=new Set;let S=!1;const b=m.app={_uid:Sd++,_component:c,_props:g,_container:null,_context:m,_instance:null,version:La,get config(){return m.config},set config(L){},use(L,...w){return E.has(L)||(L&&nt(L.install)?(E.add(L),L.install(b,...w)):nt(L)&&(E.add(L),L(b,...w))),b},mixin(L){return m.mixins.includes(L)||m.mixins.push(L),b},component(L,w){return w?(m.components[L]=w,b):m.components[L]},directive(L,w){return w?(m.directives[L]=w,b):m.directives[L]},mount(L,w,A){if(!S){const y=xt(c,g);return y.appContext=m,w&&n?n(y,L):e(y,L,A),S=!0,b._container=L,L.__vue_app__=b,Aa(y.component)||y.component.proxy}},unmount(){S&&(e(null,b._container),delete b._container.__vue_app__)},provide(L,w){return m.provides[L]=w,b}};return b}}function Si(e,n,u,c,g=!1){if(it(e)){e.forEach((y,I)=>Si(y,n&&(it(n)?n[I]:n),u,c,g));return}if(On(c)&&!g)return;const m=c.shapeFlag&4?Aa(c.component)||c.component.proxy:c.el,E=g?null:m,{i:S,r:b}=e,L=n&&n.r,w=S.refs===Lt?S.refs={}:S.refs,A=S.setupState;if(L!=null&&L!==b&&(Ct(L)?(w[L]=null,pt(A,L)&&(A[L]=null)):Pt(L)&&(L.value=null)),nt(b))Cr(b,S,12,[E,w]);else{const y=Ct(b),I=Pt(b);if(y||I){const k=()=>{if(e.f){const z=y?pt(A,b)?A[b]:w[b]:b.value;g?it(z)&&ia(z,m):it(z)?z.includes(m)||z.push(m):y?(w[b]=[m],pt(A,b)&&(A[b]=w[b])):(b.value=[m],e.k&&(w[e.k]=b.value))}else y?(w[b]=E,pt(A,b)&&(A[b]=E)):I&&(b.value=E,e.k&&(w[e.k]=E))};E?(k.id=-1,Wt(k,u)):k()}}}let Dr=!1;const li=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",ui=e=>e.nodeType===8;function Ad(e){const{mt:n,p:u,o:{patchProp:c,createText:g,nextSibling:m,parentNode:E,remove:S,insert:b,createComment:L}}=e,w=(V,M)=>{if(!M.hasChildNodes()){u(null,V,M),yi(),M._vnode=V;return}Dr=!1,A(M.firstChild,V,null,null,null),yi(),M._vnode=V,Dr&&console.error("Hydration completed but contains mismatches.")},A=(V,M,B,re,q,Q=!1)=>{const $=ui(V)&&V.data==="[",ie=()=>z(V,M,B,re,q,$),{type:pe,ref:Ce,shapeFlag:ee,patchFlag:C}=M;let W=V.nodeType;M.el=V,C===-2&&(Q=!1,M.dynamicChildren=null);let F=null;switch(pe){case dn:W!==3?M.children===""?(b(M.el=g(""),E(V),V),F=V):F=ie():(V.data!==M.children&&(Dr=!0,V.data=M.children),F=m(V));break;case Fr:W!==8||$?F=ie():F=m(V);break;case Mn:if($&&(V=m(V),W=V.nodeType),W===1||W===3){F=V;const ce=!M.children.length;for(let me=0;me<M.staticCount;me++)ce&&(M.children+=F.nodeType===1?F.outerHTML:F.data),me===M.staticCount-1&&(M.anchor=F),F=m(F);return $?m(F):F}else ie();break;case $t:$?F=k(V,M,B,re,q,Q):F=ie();break;default:if(ee&1)W!==1||M.type.toLowerCase()!==V.tagName.toLowerCase()?F=ie():F=y(V,M,B,re,q,Q);else if(ee&6){M.slotScopeIds=q;const ce=E(V);if(n(M,ce,null,B,re,li(ce),Q),F=$?Z(V):m(V),F&&ui(F)&&F.data==="teleport end"&&(F=m(F)),On(M)){let me;$?(me=xt($t),me.anchor=F?F.previousSibling:ce.lastChild):me=V.nodeType===3?au(""):xt("div"),me.el=V,M.component.subTree=me}}else ee&64?W!==8?F=ie():F=M.type.hydrate(V,M,B,re,q,Q,e,I):ee&128&&(F=M.type.hydrate(V,M,B,re,li(E(V)),q,Q,e,A))}return Ce!=null&&Si(Ce,null,re,M),F},y=(V,M,B,re,q,Q)=>{Q=Q||!!M.dynamicChildren;const{type:$,props:ie,patchFlag:pe,shapeFlag:Ce,dirs:ee}=M,C=$==="input"&&ee||$==="option";if(C||pe!==-1){if(ee&&cr(M,null,B,"created"),ie)if(C||!Q||pe&48)for(const F in ie)(C&&F.endsWith("value")||Yn(F)&&!xn(F))&&c(V,F,null,ie[F],!1,void 0,B);else ie.onClick&&c(V,"onClick",null,ie.onClick,!1,void 0,B);let W;if((W=ie&&ie.onVnodeBeforeMount)&&qt(W,B,M),ee&&cr(M,null,B,"beforeMount"),((W=ie&&ie.onVnodeMounted)||ee)&&Ml(()=>{W&&qt(W,B,M),ee&&cr(M,null,B,"mounted")},re),Ce&16&&!(ie&&(ie.innerHTML||ie.textContent))){let F=I(V.firstChild,M,V,B,re,q,Q);for(;F;){Dr=!0;const ce=F;F=F.nextSibling,S(ce)}}else Ce&8&&V.textContent!==M.children&&(Dr=!0,V.textContent=M.children)}return V.nextSibling},I=(V,M,B,re,q,Q,$)=>{$=$||!!M.dynamicChildren;const ie=M.children,pe=ie.length;for(let Ce=0;Ce<pe;Ce++){const ee=$?ie[Ce]:ie[Ce]=zt(ie[Ce]);if(V)V=A(V,ee,re,q,Q,$);else{if(ee.type===dn&&!ee.children)continue;Dr=!0,u(null,ee,B,null,re,q,li(B),Q)}}return V},k=(V,M,B,re,q,Q)=>{const{slotScopeIds:$}=M;$&&(q=q?q.concat($):$);const ie=E(V),pe=I(m(V),M,ie,B,re,q,Q);return pe&&ui(pe)&&pe.data==="]"?m(M.anchor=pe):(Dr=!0,b(M.anchor=L("]"),ie,pe),pe)},z=(V,M,B,re,q,Q)=>{if(Dr=!0,M.el=null,Q){const pe=Z(V);for(;;){const Ce=m(V);if(Ce&&Ce!==pe)S(Ce);else break}}const $=m(V),ie=E(V);return S(V),u(null,M,ie,$,B,re,li(ie),q),$},Z=V=>{let M=0;for(;V;)if(V=m(V),V&&ui(V)&&(V.data==="["&&M++,V.data==="]")){if(M===0)return m(V);M--}return V};return[w,A]}const Wt=Ml;function Ld(e){return tu(e)}function kd(e){return tu(e,Ad)}function tu(e,n){const u=Jc();u.__VUE__=!0;const{insert:c,remove:g,patchProp:m,createElement:E,createText:S,createComment:b,setText:L,setElementText:w,parentNode:A,nextSibling:y,setScopeId:I=ir,insertStaticContent:k}=e,z=(P,H,O,se=null,le=null,Te=null,De=!1,_e=null,Re=!!H.dynamicChildren)=>{if(P===H)return;P&&!wr(P,H)&&(se=ae(P),Ue(P,le,Te,!0),P=null),H.patchFlag===-2&&(Re=!1,H.dynamicChildren=null);const{type:ye,ref:Me,shapeFlag:Ie}=H;switch(ye){case dn:Z(P,H,O,se);break;case Fr:V(P,H,O,se);break;case Mn:P==null&&M(H,O,se,De);break;case $t:C(P,H,O,se,le,Te,De,_e,Re);break;default:Ie&1?q(P,H,O,se,le,Te,De,_e,Re):Ie&6?W(P,H,O,se,le,Te,De,_e,Re):(Ie&64||Ie&128)&&ye.process(P,H,O,se,le,Te,De,_e,Re,ke)}Me!=null&&le&&Si(Me,P&&P.ref,Te,H||P,!H)},Z=(P,H,O,se)=>{if(P==null)c(H.el=S(H.children),O,se);else{const le=H.el=P.el;H.children!==P.children&&L(le,H.children)}},V=(P,H,O,se)=>{P==null?c(H.el=b(H.children||""),O,se):H.el=P.el},M=(P,H,O,se)=>{[P.el,P.anchor]=k(P.children,H,O,se,P.el,P.anchor)},B=({el:P,anchor:H},O,se)=>{let le;for(;P&&P!==H;)le=y(P),c(P,O,se),P=le;c(H,O,se)},re=({el:P,anchor:H})=>{let O;for(;P&&P!==H;)O=y(P),g(P),P=O;g(H)},q=(P,H,O,se,le,Te,De,_e,Re)=>{De=De||H.type==="svg",P==null?Q(H,O,se,le,Te,De,_e,Re):pe(P,H,le,Te,De,_e,Re)},Q=(P,H,O,se,le,Te,De,_e)=>{let Re,ye;const{type:Me,props:Ie,shapeFlag:Ne,transition:Ve,dirs:$e}=P;if(Re=P.el=E(P.type,Te,Ie&&Ie.is,Ie),Ne&8?w(Re,P.children):Ne&16&&ie(P.children,Re,null,se,le,Te&&Me!=="foreignObject",De,_e),$e&&cr(P,null,se,"created"),$(Re,P,P.scopeId,De,se),Ie){for(const et in Ie)et!=="value"&&!xn(et)&&m(Re,et,null,Ie[et],Te,P.children,se,le,ge);"value"in Ie&&m(Re,"value",null,Ie.value),(ye=Ie.onVnodeBeforeMount)&&qt(ye,se,P)}$e&&cr(P,null,se,"beforeMount");const tt=(!le||le&&!le.pendingBranch)&&Ve&&!Ve.persisted;tt&&Ve.beforeEnter(Re),c(Re,H,O),((ye=Ie&&Ie.onVnodeMounted)||tt||$e)&&Wt(()=>{ye&&qt(ye,se,P),tt&&Ve.enter(Re),$e&&cr(P,null,se,"mounted")},le)},$=(P,H,O,se,le)=>{if(O&&I(P,O),se)for(let Te=0;Te<se.length;Te++)I(P,se[Te]);if(le){let Te=le.subTree;if(H===Te){const De=le.vnode;$(P,De,De.scopeId,De.slotScopeIds,le.parent)}}},ie=(P,H,O,se,le,Te,De,_e,Re=0)=>{for(let ye=Re;ye<P.length;ye++){const Me=P[ye]=_e?Rr(P[ye]):zt(P[ye]);z(null,Me,H,O,se,le,Te,De,_e)}},pe=(P,H,O,se,le,Te,De)=>{const _e=H.el=P.el;let{patchFlag:Re,dynamicChildren:ye,dirs:Me}=H;Re|=P.patchFlag&16;const Ie=P.props||Lt,Ne=H.props||Lt;let Ve;O&&Gr(O,!1),(Ve=Ne.onVnodeBeforeUpdate)&&qt(Ve,O,H,P),Me&&cr(H,P,O,"beforeUpdate"),O&&Gr(O,!0);const $e=le&&H.type!=="foreignObject";if(ye?Ce(P.dynamicChildren,ye,_e,O,se,$e,Te):De||fe(P,H,_e,null,O,se,$e,Te,!1),Re>0){if(Re&16)ee(_e,H,Ie,Ne,O,se,le);else if(Re&2&&Ie.class!==Ne.class&&m(_e,"class",null,Ne.class,le),Re&4&&m(_e,"style",Ie.style,Ne.style,le),Re&8){const tt=H.dynamicProps;for(let et=0;et<tt.length;et++){const dt=tt[et],Tt=Ie[dt],bt=Ne[dt];(bt!==Tt||dt==="value")&&m(_e,dt,Tt,bt,le,P.children,O,se,ge)}}Re&1&&P.children!==H.children&&w(_e,H.children)}else!De&&ye==null&&ee(_e,H,Ie,Ne,O,se,le);((Ve=Ne.onVnodeUpdated)||Me)&&Wt(()=>{Ve&&qt(Ve,O,H,P),Me&&cr(H,P,O,"updated")},se)},Ce=(P,H,O,se,le,Te,De)=>{for(let _e=0;_e<H.length;_e++){const Re=P[_e],ye=H[_e],Me=Re.el&&(Re.type===$t||!wr(Re,ye)||Re.shapeFlag&70)?A(Re.el):O;z(Re,ye,Me,null,se,le,Te,De,!0)}},ee=(P,H,O,se,le,Te,De)=>{if(O!==se){if(O!==Lt)for(const _e in O)!xn(_e)&&!(_e in se)&&m(P,_e,O[_e],null,De,H.children,le,Te,ge);for(const _e in se){if(xn(_e))continue;const Re=se[_e],ye=O[_e];Re!==ye&&_e!=="value"&&m(P,_e,ye,Re,De,H.children,le,Te,ge)}"value"in se&&m(P,"value",O.value,se.value)}},C=(P,H,O,se,le,Te,De,_e,Re)=>{const ye=H.el=P?P.el:S(""),Me=H.anchor=P?P.anchor:S("");let{patchFlag:Ie,dynamicChildren:Ne,slotScopeIds:Ve}=H;Ve&&(_e=_e?_e.concat(Ve):Ve),P==null?(c(ye,O,se),c(Me,O,se),ie(H.children,O,Me,le,Te,De,_e,Re)):Ie>0&&Ie&64&&Ne&&P.dynamicChildren?(Ce(P.dynamicChildren,Ne,O,le,Te,De,_e),(H.key!=null||le&&H===le.subTree)&&ru(P,H,!0)):fe(P,H,O,Me,le,Te,De,_e,Re)},W=(P,H,O,se,le,Te,De,_e,Re)=>{H.slotScopeIds=_e,P==null?H.shapeFlag&512?le.ctx.activate(H,O,se,De,Re):F(H,O,se,le,Te,De,Re):ce(P,H,Re)},F=(P,H,O,se,le,Te,De)=>{const _e=P.component=Fd(P,se,le);if(Ta(P)&&(_e.ctx.renderer=ke),Md(_e),_e.asyncDep){if(le&&le.registerDep(_e,me),!P.el){const Re=_e.subTree=xt(Fr);V(null,Re,H,O)}return}me(_e,P,H,O,le,Te,De)},ce=(P,H,O)=>{const se=H.component=P.component;if(Wf(P,H,O))if(se.asyncDep&&!se.asyncResolved){he(se,H,O);return}else se.next=H,Bf(se.update),se.update();else H.el=P.el,se.vnode=H},me=(P,H,O,se,le,Te,De)=>{const _e=()=>{if(P.isMounted){let{next:Me,bu:Ie,u:Ne,parent:Ve,vnode:$e}=P,tt=Me,et;Gr(P,!1),Me?(Me.el=$e.el,he(P,Me,De)):Me=$e,Ie&&Ls(Ie),(et=Me.props&&Me.props.onVnodeBeforeUpdate)&&qt(et,Ve,Me,$e),Gr(P,!0);const dt=ks(P),Tt=P.subTree;P.subTree=dt,z(Tt,dt,A(Tt.el),ae(Tt),P,le,Te),Me.el=dt.el,tt===null&&ma(P,dt.el),Ne&&Wt(Ne,le),(et=Me.props&&Me.props.onVnodeUpdated)&&Wt(()=>qt(et,Ve,Me,$e),le)}else{let Me;const{el:Ie,props:Ne}=H,{bm:Ve,m:$e,parent:tt}=P,et=On(H);if(Gr(P,!1),Ve&&Ls(Ve),!et&&(Me=Ne&&Ne.onVnodeBeforeMount)&&qt(Me,tt,H),Gr(P,!0),Ie&&xe){const dt=()=>{P.subTree=ks(P),xe(Ie,P.subTree,P,le,null)};et?H.type.__asyncLoader().then(()=>!P.isUnmounted&&dt()):dt()}else{const dt=P.subTree=ks(P);z(null,dt,O,se,P,le,Te),H.el=dt.el}if($e&&Wt($e,le),!et&&(Me=Ne&&Ne.onVnodeMounted)){const dt=H;Wt(()=>qt(Me,tt,dt),le)}(H.shapeFlag&256||tt&&On(tt.vnode)&&tt.vnode.shapeFlag&256)&&P.a&&Wt(P.a,le),P.isMounted=!0,H=O=se=null}},Re=P.effect=new ua(_e,()=>Pi(ye),P.scope),ye=P.update=()=>Re.run();ye.id=P.uid,Gr(P,!0),ye()},he=(P,H,O)=>{H.component=P;const se=P.vnode.props;P.vnode=H,P.next=null,yd(P,H.props,se,O),bd(P,H.children,O),yn(),Do(),En()},fe=(P,H,O,se,le,Te,De,_e,Re=!1)=>{const ye=P&&P.children,Me=P?P.shapeFlag:0,Ie=H.children,{patchFlag:Ne,shapeFlag:Ve}=H;if(Ne>0){if(Ne&128){We(ye,Ie,O,se,le,Te,De,_e,Re);return}else if(Ne&256){Ke(ye,Ie,O,se,le,Te,De,_e,Re);return}}Ve&8?(Me&16&&ge(ye,le,Te),Ie!==ye&&w(O,Ie)):Me&16?Ve&16?We(ye,Ie,O,se,le,Te,De,_e,Re):ge(ye,le,Te,!0):(Me&8&&w(O,""),Ve&16&&ie(Ie,O,se,le,Te,De,_e,Re))},Ke=(P,H,O,se,le,Te,De,_e,Re)=>{P=P||an,H=H||an;const ye=P.length,Me=H.length,Ie=Math.min(ye,Me);let Ne;for(Ne=0;Ne<Ie;Ne++){const Ve=H[Ne]=Re?Rr(H[Ne]):zt(H[Ne]);z(P[Ne],Ve,O,null,le,Te,De,_e,Re)}ye>Me?ge(P,le,Te,!0,!1,Ie):ie(H,O,se,le,Te,De,_e,Re,Ie)},We=(P,H,O,se,le,Te,De,_e,Re)=>{let ye=0;const Me=H.length;let Ie=P.length-1,Ne=Me-1;for(;ye<=Ie&&ye<=Ne;){const Ve=P[ye],$e=H[ye]=Re?Rr(H[ye]):zt(H[ye]);if(wr(Ve,$e))z(Ve,$e,O,null,le,Te,De,_e,Re);else break;ye++}for(;ye<=Ie&&ye<=Ne;){const Ve=P[Ie],$e=H[Ne]=Re?Rr(H[Ne]):zt(H[Ne]);if(wr(Ve,$e))z(Ve,$e,O,null,le,Te,De,_e,Re);else break;Ie--,Ne--}if(ye>Ie){if(ye<=Ne){const Ve=Ne+1,$e=Ve<Me?H[Ve].el:se;for(;ye<=Ne;)z(null,H[ye]=Re?Rr(H[ye]):zt(H[ye]),O,$e,le,Te,De,_e,Re),ye++}}else if(ye>Ne)for(;ye<=Ie;)Ue(P[ye],le,Te,!0),ye++;else{const Ve=ye,$e=ye,tt=new Map;for(ye=$e;ye<=Ne;ye++){const N=H[ye]=Re?Rr(H[ye]):zt(H[ye]);N.key!=null&&tt.set(N.key,ye)}let et,dt=0;const Tt=Ne-$e+1;let bt=!1,ne=0;const K=new Array(Tt);for(ye=0;ye<Tt;ye++)K[ye]=0;for(ye=Ve;ye<=Ie;ye++){const N=P[ye];if(dt>=Tt){Ue(N,le,Te,!0);continue}let U;if(N.key!=null)U=tt.get(N.key);else for(et=$e;et<=Ne;et++)if(K[et-$e]===0&&wr(N,H[et])){U=et;break}U===void 0?Ue(N,le,Te,!0):(K[U-$e]=ye+1,U>=ne?ne=U:bt=!0,z(N,H[U],O,null,le,Te,De,_e,Re),dt++)}const D=bt?Dd(K):an;for(et=D.length-1,ye=Tt-1;ye>=0;ye--){const N=$e+ye,U=H[N],Y=N+1<Me?H[N+1].el:se;K[ye]===0?z(null,U,O,Y,le,Te,De,_e,Re):bt&&(et<0||ye!==D[et]?Ge(U,O,Y,2):et--)}}},Ge=(P,H,O,se,le=null)=>{const{el:Te,type:De,transition:_e,children:Re,shapeFlag:ye}=P;if(ye&6){Ge(P.component.subTree,H,O,se);return}if(ye&128){P.suspense.move(H,O,se);return}if(ye&64){De.move(P,H,O,ke);return}if(De===$t){c(Te,H,O);for(let Ie=0;Ie<Re.length;Ie++)Ge(Re[Ie],H,O,se);c(P.anchor,H,O);return}if(De===Mn){B(P,H,O);return}if(se!==2&&ye&1&&_e)if(se===0)_e.beforeEnter(Te),c(Te,H,O),Wt(()=>_e.enter(Te),le);else{const{leave:Ie,delayLeave:Ne,afterLeave:Ve}=_e,$e=()=>c(Te,H,O),tt=()=>{Ie(Te,()=>{$e(),Ve&&Ve()})};Ne?Ne(Te,$e,tt):tt()}else c(Te,H,O)},Ue=(P,H,O,se=!1,le=!1)=>{const{type:Te,props:De,ref:_e,children:Re,dynamicChildren:ye,shapeFlag:Me,patchFlag:Ie,dirs:Ne}=P;if(_e!=null&&Si(_e,null,O,P,!0),Me&256){H.ctx.deactivate(P);return}const Ve=Me&1&&Ne,$e=!On(P);let tt;if($e&&(tt=De&&De.onVnodeBeforeUnmount)&&qt(tt,H,P),Me&6)ue(P.component,O,se);else{if(Me&128){P.suspense.unmount(O,se);return}Ve&&cr(P,null,H,"beforeUnmount"),Me&64?P.type.remove(P,H,O,le,ke,se):ye&&(Te!==$t||Ie>0&&Ie&64)?ge(ye,H,O,!1,!0):(Te===$t&&Ie&384||!le&&Me&16)&&ge(Re,H,O),se&&Ze(P)}($e&&(tt=De&&De.onVnodeUnmounted)||Ve)&&Wt(()=>{tt&&qt(tt,H,P),Ve&&cr(P,null,H,"unmounted")},O)},Ze=P=>{const{type:H,el:O,anchor:se,transition:le}=P;if(H===$t){ft(O,se);return}if(H===Mn){re(P);return}const Te=()=>{g(O),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(P.shapeFlag&1&&le&&!le.persisted){const{leave:De,delayLeave:_e}=le,Re=()=>De(O,Te);_e?_e(P.el,Te,Re):Re()}else Te()},ft=(P,H)=>{let O;for(;P!==H;)O=y(P),g(P),P=O;g(H)},ue=(P,H,O)=>{const{bum:se,scope:le,update:Te,subTree:De,um:_e}=P;se&&Ls(se),le.stop(),Te&&(Te.active=!1,Ue(De,P,H,O)),_e&&Wt(_e,H),Wt(()=>{P.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},ge=(P,H,O,se=!1,le=!1,Te=0)=>{for(let De=Te;De<P.length;De++)Ue(P[De],H,O,se,le)},ae=P=>P.shapeFlag&6?ae(P.component.subTree):P.shapeFlag&128?P.suspense.next():y(P.anchor||P.el),we=(P,H,O)=>{P==null?H._vnode&&Ue(H._vnode,null,null,!0):z(H._vnode||null,P,H,null,null,null,O),Do(),yi(),H._vnode=P},ke={p:z,um:Ue,m:Ge,r:Ze,mt:F,mc:ie,pc:fe,pbc:Ce,n:ae,o:e};let Pe,xe;return n&&([Pe,xe]=n(ke)),{render:we,hydrate:Pe,createApp:_d(we,Pe)}}function Gr({effect:e,update:n},u){e.allowRecurse=n.allowRecurse=u}function ru(e,n,u=!1){const c=e.children,g=n.children;if(it(c)&&it(g))for(let m=0;m<c.length;m++){const E=c[m];let S=g[m];S.shapeFlag&1&&!S.dynamicChildren&&((S.patchFlag<=0||S.patchFlag===32)&&(S=g[m]=Rr(g[m]),S.el=E.el),u||ru(E,S)),S.type===dn&&(S.el=E.el)}}function Dd(e){const n=e.slice(),u=[0];let c,g,m,E,S;const b=e.length;for(c=0;c<b;c++){const L=e[c];if(L!==0){if(g=u[u.length-1],e[g]<L){n[c]=g,u.push(c);continue}for(m=0,E=u.length-1;m<E;)S=m+E>>1,e[u[S]]<L?m=S+1:E=S;L<e[u[m]]&&(m>0&&(n[c]=u[m-1]),u[m]=c)}}for(m=u.length,E=u[m-1];m-- >0;)u[m]=E,E=n[E];return u}const Rd=e=>e.__isTeleport,$t=Symbol(void 0),dn=Symbol(void 0),Fr=Symbol(void 0),Mn=Symbol(void 0),Nn=[];let Jt=null;function dr(e=!1){Nn.push(Jt=e?null:[])}function nu(){Nn.pop(),Jt=Nn[Nn.length-1]||null}let hn=1;function No(e){hn+=e}function iu(e){return e.dynamicChildren=hn>0?Jt||an:null,nu(),hn>0&&Jt&&Jt.push(e),e}function wn(e,n,u,c,g,m){return iu(Xt(e,n,u,c,g,m,!0))}function ci(e,n,u,c,g){return iu(xt(e,n,u,c,g,!0))}function _i(e){return e?e.__v_isVNode===!0:!1}function wr(e,n){return e.type===n.type&&e.key===n.key}const Ni="__vInternal",su=({key:e})=>e??null,gi=({ref:e,ref_key:n,ref_for:u})=>e!=null?Ct(e)||Pt(e)||nt(e)?{i:Qt,r:e,k:n,f:!!u}:e:null;function Xt(e,n=null,u=null,c=0,g=null,m=e===$t?0:1,E=!1,S=!1){const b={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&su(n),ref:n&&gi(n),scopeId:Fi,slotScopeIds:null,children:u,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:c,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:Qt};return S?(_a(b,u),m&128&&e.normalize(b)):u&&(b.shapeFlag|=Ct(u)?8:16),hn>0&&!E&&Jt&&(b.patchFlag>0||m&6)&&b.patchFlag!==32&&Jt.push(b),b}const xt=wd;function wd(e,n=null,u=null,c=0,g=null,m=!1){if((!e||e===ld)&&(e=Fr),_i(e)){const S=gn(e,n,!0);return u&&_a(S,u),hn>0&&!m&&Jt&&(S.shapeFlag&6?Jt[Jt.indexOf(e)]=S:Jt.push(S)),S.patchFlag|=-2,S}if(Kd(e)&&(e=e.__vccOpts),n){n=Id(n);let{class:S,style:b}=n;S&&!Ct(S)&&(n.class=Wn(S)),kt(b)&&(_l(b)&&!it(b)&&(b=Gt({},b)),n.style=Vn(b))}const E=Ct(e)?1:Yf(e)?128:Rd(e)?64:kt(e)?4:nt(e)?2:0;return Xt(e,n,u,c,g,E,m,!0)}function Id(e){return e?_l(e)||Ni in e?Gt({},e):e:null}function gn(e,n,u=!1){const{props:c,ref:g,patchFlag:m,children:E}=e,S=n?xd(c||{},n):c;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:S,key:S&&su(S),ref:n&&n.ref?u&&g?it(g)?g.concat(gi(n)):[g,gi(n)]:gi(n):g,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:E,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==$t?m===-1?16:m|16:m,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gn(e.ssContent),ssFallback:e.ssFallback&&gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function au(e=" ",n=0){return xt(dn,null,e,n)}function Cd(e,n){const u=xt(Mn,null,e);return u.staticCount=n,u}function zt(e){return e==null||typeof e=="boolean"?xt(Fr):it(e)?xt($t,null,e.slice()):typeof e=="object"?Rr(e):xt(dn,null,String(e))}function Rr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gn(e)}function _a(e,n){let u=0;const{shapeFlag:c}=e;if(n==null)n=null;else if(it(n))u=16;else if(typeof n=="object")if(c&65){const g=n.default;g&&(g._c&&(g._d=!1),_a(e,g()),g._c&&(g._d=!0));return}else{u=32;const g=n._;!g&&!(Ni in n)?n._ctx=Qt:g===3&&Qt&&(Qt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else nt(n)?(n={default:n,_ctx:Qt},u=32):(n=String(n),c&64?(u=16,n=[au(n)]):u=8);e.children=n,e.shapeFlag|=u}function xd(...e){const n={};for(let u=0;u<e.length;u++){const c=e[u];for(const g in c)if(g==="class")n.class!==c.class&&(n.class=Wn([n.class,c.class]));else if(g==="style")n.style=Vn([n.style,c.style]);else if(Yn(g)){const m=n[g],E=c[g];E&&m!==E&&!(it(m)&&m.includes(E))&&(n[g]=m?[].concat(m,E):E)}else g!==""&&(n[g]=c[g])}return n}function qt(e,n,u,c=null){sr(e,n,7,[u,c])}const Pd=eu();let Od=0;function Fd(e,n,u){const c=e.type,g=(n?n.appContext:e.appContext)||Pd,m={uid:Od++,vnode:e,type:c,parent:n,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xl(c,g),emitsOptions:Ol(c,g),emit:null,emitted:null,propsDefaults:Lt,inheritAttrs:c.inheritAttrs,ctx:Lt,data:Lt,props:Lt,attrs:Lt,slots:Lt,refs:Lt,setupState:Lt,setupContext:null,suspense:u,suspenseId:u?u.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=n?n.root:m,m.emit=Kf.bind(null,m),e.ce&&e.ce(m),m}let wt=null;const bn=()=>wt||Qt,Mr=e=>{wt=e,e.scope.on()},xr=()=>{wt&&wt.scope.off(),wt=null};function ou(e){return e.vnode.shapeFlag&4}let pn=!1;function Md(e,n=!1){pn=n;const{props:u,children:c}=e.vnode,g=ou(e);md(e,u,g,n),Td(e,c);const m=g?Nd(e,n):void 0;return pn=!1,m}function Nd(e,n){const u=e.type;e.accessCache=Object.create(null),e.proxy=Al(new Proxy(e.ctx,fd));const{setup:c}=u;if(c){const g=e.setupContext=c.length>1?Bd(e):null;Mr(e),yn();const m=Cr(c,e,0,[e.props,g]);if(En(),xr(),aa(m)){if(m.then(xr,xr),n)return m.then(E=>{Ys(e,E,n)}).catch(E=>{Tn(E,e,0)});e.asyncDep=m}else Ys(e,m,n)}else lu(e,n)}function Ys(e,n,u){nt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:kt(n)&&(e.setupState=Dl(n)),lu(e,u)}let Uo;function lu(e,n,u){const c=e.type;if(!e.render){if(!n&&Uo&&!c.render){const g=c.template||ba(e).template;if(g){const{isCustomElement:m,compilerOptions:E}=e.appContext.config,{delimiters:S,compilerOptions:b}=c,L=Gt(Gt({isCustomElement:m,delimiters:S},E),b);c.render=Uo(g,L)}}e.render=c.render||ir}Mr(e),yn(),dd(e),En(),xr()}function Ud(e){return new Proxy(e.attrs,{get(n,u){return Yt(e,"get","$attrs"),n[u]}})}function Bd(e){const n=c=>{e.exposed=c||{}};let u;return{get attrs(){return u||(u=Ud(e))},slots:e.slots,emit:e.emit,expose:n}}function Aa(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Dl(Al(e.exposed)),{get(n,u){if(u in n)return n[u];if(u in Fn)return Fn[u](e)},has(n,u){return u in n||u in Fn}}))}function Hd(e,n=!0){return nt(e)?e.displayName||e.name:e.name||n&&e.__name}function Kd(e){return nt(e)&&"__vccOpts"in e}const uu=(e,n)=>Mf(e,n,pn);function jd(e){const n=bn();let u=e();return xr(),aa(u)&&(u=u.catch(c=>{throw Mr(n),c})),[u,()=>Mr(n)]}function Gd(e,n,u){const c=arguments.length;return c===2?kt(n)&&!it(n)?_i(n)?xt(e,null,[n]):xt(e,n):xt(e,null,n):(c>3?u=Array.prototype.slice.call(arguments,2):c===3&&_i(u)&&(u=[u]),xt(e,n,u))}const Vd=Symbol(""),Wd=()=>fn(Vd),La="3.2.47",Yd="http://www.w3.org/2000/svg",qr=typeof document<"u"?document:null,Bo=qr&&qr.createElement("template"),qd={insert:(e,n,u)=>{n.insertBefore(e,u||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,u,c)=>{const g=n?qr.createElementNS(Yd,e):qr.createElement(e,u?{is:u}:void 0);return e==="select"&&c&&c.multiple!=null&&g.setAttribute("multiple",c.multiple),g},createText:e=>qr.createTextNode(e),createComment:e=>qr.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qr.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,u,c,g,m){const E=u?u.previousSibling:n.lastChild;if(g&&(g===m||g.nextSibling))for(;n.insertBefore(g.cloneNode(!0),u),!(g===m||!(g=g.nextSibling)););else{Bo.innerHTML=c?`<svg>${e}</svg>`:e;const S=Bo.content;if(c){const b=S.firstChild;for(;b.firstChild;)S.appendChild(b.firstChild);S.removeChild(b)}n.insertBefore(S,u)}return[E?E.nextSibling:n.firstChild,u?u.previousSibling:n.lastChild]}};function $d(e,n,u){const c=e._vtc;c&&(n=(n?[n,...c]:[...c]).join(" ")),n==null?e.removeAttribute("class"):u?e.setAttribute("class",n):e.className=n}function zd(e,n,u){const c=e.style,g=Ct(u);if(u&&!g){if(n&&!Ct(n))for(const m in n)u[m]==null&&qs(c,m,"");for(const m in u)qs(c,m,u[m])}else{const m=c.display;g?n!==u&&(c.cssText=u):n&&e.removeAttribute("style"),"_vod"in e&&(c.display=m)}}const Ho=/\s*!important$/;function qs(e,n,u){if(it(u))u.forEach(c=>qs(e,n,c));else if(u==null&&(u=""),n.startsWith("--"))e.setProperty(n,u);else{const c=Xd(e,n);Ho.test(u)?e.setProperty(mn(c),u.replace(Ho,""),"important"):e[c]=u}}const Ko=["Webkit","Moz","ms"],ws={};function Xd(e,n){const u=ws[n];if(u)return u;let c=hr(n);if(c!=="filter"&&c in e)return ws[n]=c;c=Ci(c);for(let g=0;g<Ko.length;g++){const m=Ko[g]+c;if(m in e)return ws[n]=m}return n}const jo="http://www.w3.org/1999/xlink";function Qd(e,n,u,c,g){if(c&&n.startsWith("xlink:"))u==null?e.removeAttributeNS(jo,n.slice(6,n.length)):e.setAttributeNS(jo,n,u);else{const m=jc(n);u==null||m&&!ol(u)?e.removeAttribute(n):e.setAttribute(n,m?"":u)}}function Jd(e,n,u,c,g,m,E){if(n==="innerHTML"||n==="textContent"){c&&E(c,g,m),e[n]=u??"";return}if(n==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=u;const b=u??"";(e.value!==b||e.tagName==="OPTION")&&(e.value=b),u==null&&e.removeAttribute(n);return}let S=!1;if(u===""||u==null){const b=typeof e[n];b==="boolean"?u=ol(u):u==null&&b==="string"?(u="",S=!0):b==="number"&&(u=0,S=!0)}try{e[n]=u}catch{}S&&e.removeAttribute(n)}function Zd(e,n,u,c){e.addEventListener(n,u,c)}function eh(e,n,u,c){e.removeEventListener(n,u,c)}function th(e,n,u,c,g=null){const m=e._vei||(e._vei={}),E=m[n];if(c&&E)E.value=c;else{const[S,b]=rh(n);if(c){const L=m[n]=sh(c,g);Zd(e,S,L,b)}else E&&(eh(e,S,E,b),m[n]=void 0)}}const Go=/(?:Once|Passive|Capture)$/;function rh(e){let n;if(Go.test(e)){n={};let c;for(;c=e.match(Go);)e=e.slice(0,e.length-c[0].length),n[c[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mn(e.slice(2)),n]}let Is=0;const nh=Promise.resolve(),ih=()=>Is||(nh.then(()=>Is=0),Is=Date.now());function sh(e,n){const u=c=>{if(!c._vts)c._vts=Date.now();else if(c._vts<=u.attached)return;sr(ah(c,u.value),n,5,[c])};return u.value=e,u.attached=ih(),u}function ah(e,n){if(it(n)){const u=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{u.call(e),e._stopped=!0},n.map(c=>g=>!g._stopped&&c&&c(g))}else return n}const Vo=/^on[a-z]/,oh=(e,n,u,c,g=!1,m,E,S,b)=>{n==="class"?$d(e,c,g):n==="style"?zd(e,u,c):Yn(n)?na(n)||th(e,n,u,c,E):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):lh(e,n,c,g))?Jd(e,n,c,m,E,S,b):(n==="true-value"?e._trueValue=c:n==="false-value"&&(e._falseValue=c),Qd(e,n,c,g))};function lh(e,n,u,c){return c?!!(n==="innerHTML"||n==="textContent"||n in e&&Vo.test(n)&&nt(u)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA"||Vo.test(n)&&Ct(u)?!1:n in e}const cu=Gt({patchProp:oh},qd);let Un,Wo=!1;function uh(){return Un||(Un=Ld(cu))}function ch(){return Un=Wo?Un:kd(cu),Wo=!0,Un}const fh=(...e)=>{const n=uh().createApp(...e),{mount:u}=n;return n.mount=c=>{const g=fu(c);if(!g)return;const m=n._component;!nt(m)&&!m.render&&!m.template&&(m.template=g.innerHTML),g.innerHTML="";const E=u(g,!1,g instanceof SVGElement);return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),E},n},dh=(...e)=>{const n=ch().createApp(...e),{mount:u}=n;return n.mount=c=>{const g=fu(c);if(g)return u(g,!0,g instanceof SVGElement)},n};function fu(e){return Ct(e)?document.querySelector(e):e}const hh=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,gh=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ph=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function vh(e,n){if(e!=="__proto__"&&!(e==="constructor"&&n&&typeof n=="object"&&"prototype"in n))return n}function mh(e,n={}){if(typeof e!="string")return e;const u=e.toLowerCase().trim();if(u==="true")return!0;if(u==="false")return!1;if(u==="null")return null;if(u==="nan")return Number.NaN;if(u==="infinity")return Number.POSITIVE_INFINITY;if(u!=="undefined"){if(!ph.test(e)){if(n.strict)throw new SyntaxError("Invalid JSON");return e}try{return hh.test(e)||gh.test(e)?JSON.parse(e,vh):JSON.parse(e)}catch(c){if(n.strict)throw c;return e}}}const yh=/#/g,Eh=/&/g,Th=/=/g,du=/\+/g,bh=/%5e/gi,Sh=/%60/gi,_h=/%7c/gi,Ah=/%20/gi;function Lh(e){return encodeURI(""+e).replace(_h,"|")}function $s(e){return Lh(typeof e=="string"?e:JSON.stringify(e)).replace(du,"%2B").replace(Ah,"+").replace(yh,"%23").replace(Eh,"%26").replace(Sh,"`").replace(bh,"^")}function Cs(e){return $s(e).replace(Th,"%3D")}function Ai(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function kh(e){return Ai(e.replace(du," "))}function hu(e=""){const n={};e[0]==="?"&&(e=e.slice(1));for(const u of e.split("&")){const c=u.match(/([^=]+)=?(.*)/)||[];if(c.length<2)continue;const g=Ai(c[1]);if(g==="__proto__"||g==="constructor")continue;const m=kh(c[2]||"");typeof n[g]<"u"?Array.isArray(n[g])?n[g].push(m):n[g]=[n[g],m]:n[g]=m}return n}function Dh(e,n){return(typeof n=="number"||typeof n=="boolean")&&(n=String(n)),n?Array.isArray(n)?n.map(u=>`${Cs(e)}=${$s(u)}`).join("&"):`${Cs(e)}=${$s(n)}`:Cs(e)}function gu(e){return Object.keys(e).filter(n=>e[n]!==void 0).map(n=>Dh(n,e[n])).join("&")}const Rh=/^\w{2,}:([/\\]{1,2})/,wh=/^\w{2,}:([/\\]{2})?/,Ih=/^([/\\]\s*){2,}[^/\\]/;function ka(e,n={}){return typeof n=="boolean"&&(n={acceptRelative:n}),n.strict?Rh.test(e):wh.test(e)||(n.acceptRelative?Ih.test(e):!1)}const Ch=/\/$|\/\?/;function zs(e="",n=!1){return n?Ch.test(e):e.endsWith("/")}function pu(e="",n=!1){if(!n)return(zs(e)?e.slice(0,-1):e)||"/";if(!zs(e,!0))return e||"/";const[u,...c]=e.split("?");return(u.slice(0,-1)||"/")+(c.length>0?`?${c.join("?")}`:"")}function Xs(e="",n=!1){if(!n)return e.endsWith("/")?e:e+"/";if(zs(e,!0))return e||"/";const[u,...c]=e.split("?");return u+"/"+(c.length>0?`?${c.join("?")}`:"")}function vu(e=""){return e.startsWith("/")}function xh(e=""){return(vu(e)?e.slice(1):e)||"/"}function Yo(e=""){return vu(e)?e:"/"+e}function Ph(e,n){if(mu(n)||ka(e))return e;const u=pu(n);return e.startsWith(u)?e:Ui(u,e)}function Oh(e,n){if(mu(n))return e;const u=pu(n);if(!e.startsWith(u))return e;const c=e.slice(u.length);return c[0]==="/"?c:"/"+c}function Fh(e,n){const u=Bi(e),c={...hu(u.search),...n};return u.search=gu(c),yu(u)}function mu(e){return!e||e==="/"}function Mh(e){return e&&e!=="/"}function Ui(e,...n){let u=e||"";for(const c of n.filter(g=>Mh(g)))u=u?Xs(u)+xh(c):c;return u}function Nh(e,n,u={}){return u.trailingSlash||(e=Xs(e),n=Xs(n)),u.leadingSlash||(e=Yo(e),n=Yo(n)),u.encoding||(e=Ai(e),n=Ai(n)),e===n}function Bi(e="",n){if(!ka(e,{acceptRelative:!0}))return n?Bi(n+e):qo(e);const[u="",c,g=""]=(e.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[m="",E=""]=(g.match(/([^#/?]*)(.*)?/)||[]).splice(1),{pathname:S,search:b,hash:L}=qo(E.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:u,auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:m,pathname:S,search:b,hash:L}}function qo(e=""){const[n="",u="",c=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:n,search:u,hash:c}}function yu(e){const n=e.pathname+(e.search?(e.search.startsWith("?")?"":"?")+e.search:"")+e.hash;return e.protocol?e.protocol+"//"+(e.auth?e.auth+"@":"")+e.host+n:n}class Uh extends Error{constructor(){super(...arguments),this.name="FetchError"}}function Bh(e,n,u){let c="";n&&(c=n.message),e&&u?c=`${c} (${u.status} ${u.statusText} (${e.toString()}))`:e&&(c=`${c} (${e.toString()})`);const g=new Uh(c);return Object.defineProperty(g,"request",{get(){return e}}),Object.defineProperty(g,"response",{get(){return u}}),Object.defineProperty(g,"data",{get(){return u&&u._data}}),Object.defineProperty(g,"status",{get(){return u&&u.status}}),Object.defineProperty(g,"statusText",{get(){return u&&u.statusText}}),Object.defineProperty(g,"statusCode",{get(){return u&&u.status}}),Object.defineProperty(g,"statusMessage",{get(){return u&&u.statusText}}),g}const Hh=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function $o(e="GET"){return Hh.has(e.toUpperCase())}function Kh(e){if(e===void 0)return!1;const n=typeof e;return n==="string"||n==="number"||n==="boolean"||n===null?!0:n!=="object"?!1:Array.isArray(e)?!0:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const jh=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Gh=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Vh(e=""){if(!e)return"json";const n=e.split(";").shift()||"";return Gh.test(n)?"json":jh.has(n)||n.startsWith("text/")?"text":"blob"}const Wh=new Set([408,409,425,429,500,502,503,504]);function Eu(e){const{fetch:n,Headers:u}=e;function c(E){const S=E.error&&E.error.name==="AbortError"||!1;if(E.options.retry!==!1&&!S){let L;typeof E.options.retry=="number"?L=E.options.retry:L=$o(E.options.method)?0:1;const w=E.response&&E.response.status||500;if(L>0&&Wh.has(w))return g(E.request,{...E.options,retry:L-1})}const b=Bh(E.request,E.error,E.response);throw Error.captureStackTrace&&Error.captureStackTrace(b,g),b}const g=async function(S,b={}){const L={request:S,options:{...e.defaults,...b},response:void 0,error:void 0};L.options.onRequest&&await L.options.onRequest(L),typeof L.request=="string"&&(L.options.baseURL&&(L.request=Ph(L.request,L.options.baseURL)),(L.options.query||L.options.params)&&(L.request=Fh(L.request,{...L.options.params,...L.options.query})),L.options.body&&$o(L.options.method)&&Kh(L.options.body)&&(L.options.body=typeof L.options.body=="string"?L.options.body:JSON.stringify(L.options.body),L.options.headers=new u(L.options.headers),L.options.headers.has("content-type")||L.options.headers.set("content-type","application/json"),L.options.headers.has("accept")||L.options.headers.set("accept","application/json"))),L.response=await n(L.request,L.options).catch(async A=>(L.error=A,L.options.onRequestError&&await L.options.onRequestError(L),c(L)));const w=(L.options.parseResponse?"json":L.options.responseType)||Vh(L.response.headers.get("content-type")||"");if(w==="json"){const A=await L.response.text(),y=L.options.parseResponse||mh;L.response._data=y(A)}else w==="stream"?L.response._data=L.response.body:L.response._data=await L.response[w]();return L.options.onResponse&&await L.options.onResponse(L),L.response.status>=400&&L.response.status<600?(L.options.onResponseError&&await L.options.onResponseError(L),c(L)):L.response},m=function(S,b){return g(S,b).then(L=>L._data)};return m.raw=g,m.native=n,m.create=(E={})=>Eu({...e,defaults:{...e.defaults,...E}}),m}const Tu=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Yh=Tu.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),qh=Tu.Headers,$h=Eu({fetch:Yh,Headers:qh}),zh=$h,Xh=()=>{var e;return((e=window==null?void 0:window.__NUXT__)==null?void 0:e.config)||{}},Li=Xh().app,Qh=()=>Li.baseURL,Jh=()=>Li.buildAssetsDir,Zh=(...e)=>Ui(bu(),Jh(),...e),bu=(...e)=>{const n=Li.cdnURL||Li.baseURL;return e.length?Ui(n,...e):n};globalThis.__buildAssetsURL=Zh,globalThis.__publicAssetsURL=bu;function Qs(e,n={},u){for(const c in e){const g=e[c],m=u?`${u}:${c}`:c;typeof g=="object"&&g!==null?Qs(g,n,m):typeof g=="function"&&(n[m]=g)}return n}function eg(e,n){return e.reduce((u,c)=>u.then(()=>c.apply(void 0,n)),Promise.resolve())}function tg(e,n){return Promise.all(e.map(u=>u.apply(void 0,n)))}function xs(e,n){for(const u of e)u(n)}class rg{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(n,u,c={}){if(!n||typeof u!="function")return()=>{};const g=n;let m;for(;this._deprecatedHooks[n];)m=this._deprecatedHooks[n],n=m.to;if(m&&!c.allowDeprecated){let E=m.message;E||(E=`${g} hook has been deprecated`+(m.to?`, please use ${m.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(E)||(console.warn(E),this._deprecatedMessages.add(E))}return this._hooks[n]=this._hooks[n]||[],this._hooks[n].push(u),()=>{u&&(this.removeHook(n,u),u=void 0)}}hookOnce(n,u){let c,g=(...m)=>(typeof c=="function"&&c(),c=void 0,g=void 0,u(...m));return c=this.hook(n,g),c}removeHook(n,u){if(this._hooks[n]){const c=this._hooks[n].indexOf(u);c!==-1&&this._hooks[n].splice(c,1),this._hooks[n].length===0&&delete this._hooks[n]}}deprecateHook(n,u){this._deprecatedHooks[n]=typeof u=="string"?{to:u}:u;const c=this._hooks[n]||[];this._hooks[n]=void 0;for(const g of c)this.hook(n,g)}deprecateHooks(n){Object.assign(this._deprecatedHooks,n);for(const u in n)this.deprecateHook(u,n[u])}addHooks(n){const u=Qs(n),c=Object.keys(u).map(g=>this.hook(g,u[g]));return()=>{for(const g of c.splice(0,c.length))g()}}removeHooks(n){const u=Qs(n);for(const c in u)this.removeHook(c,u[c])}callHook(n,...u){return this.callHookWith(eg,n,...u)}callHookParallel(n,...u){return this.callHookWith(tg,n,...u)}callHookWith(n,u,...c){const g=this._before||this._after?{name:u,args:c,context:{}}:void 0;this._before&&xs(this._before,g);const m=n(this._hooks[u]||[],c);return m instanceof Promise?m.finally(()=>{this._after&&g&&xs(this._after,g)}):(this._after&&g&&xs(this._after,g),m)}beforeEach(n){return this._before=this._before||[],this._before.push(n),()=>{const u=this._before.indexOf(n);u!==-1&&this._before.splice(u,1)}}afterEach(n){return this._after=this._after||[],this._after.push(n),()=>{const u=this._after.indexOf(n);u!==-1&&this._after.splice(u,1)}}}function Su(){return new rg}function ng(){let e,n=!1;const u=c=>{if(e&&e!==c)throw new Error("Context conflict")};return{use:()=>{if(e===void 0)throw new Error("Context is not available");return e},tryUse:()=>e,set:(c,g)=>{g||u(c),e=c,n=!0},unset:()=>{e=void 0,n=!1},call:(c,g)=>{u(c),e=c;try{return g()}finally{n||(e=void 0)}},async callAsync(c,g){e=c;const m=()=>{e=c},E=()=>e===c?m:void 0;Qo.add(E);try{const S=g();return n||(e=void 0),await S}finally{Qo.delete(E)}}}}function ig(){const e={};return{get(n){return e[n]||(e[n]=ng()),e[n],e[n]}}}const ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},zo="__unctx__",sg=ki[zo]||(ki[zo]=ig()),ag=e=>sg.get(e),Xo="__unctx_async_handlers__",Qo=ki[Xo]||(ki[Xo]=new Set),_u=ag("nuxt-app"),og="__nuxt_plugin";function lg(e){let n=0;const u={provide:void 0,globalName:"nuxt",payload:Or({data:{},state:{},_errors:{},...window.__NUXT__}),static:{data:{}},isHydrating:!0,deferHydration(){if(!u.isHydrating)return()=>{};n++;let m=!1;return()=>{if(!m&&(m=!0,n--,n===0))return u.isHydrating=!1,u.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},...e};u.hooks=Su(),u.hook=u.hooks.hook,u.callHook=u.hooks.callHook,u.provide=(m,E)=>{const S="$"+m;fi(u,S,E),fi(u.vueApp.config.globalProperties,S,E)},fi(u.vueApp,"$nuxt",u),fi(u.vueApp.config.globalProperties,"$nuxt",u),window.addEventListener("nuxt.preloadError",m=>{u.callHook("app:chunkError",{error:m.payload})}),u.hook("app:error",(...m)=>{console.error("[nuxt] error caught during app initialization",...m)});const c=Or(u.payload.config),g=new Proxy(c,{get(m,E){return E==="public"?m.public:m[E]??m.public[E]},set(m,E,S){return E==="public"||E==="app"?!1:(m[E]=S,m.public[E]=S,!0)}});return u.provide("config",g),u}async function ug(e,n){if(typeof n!="function")return;const{provide:u}=await sn(e,n,[e])||{};if(u&&typeof u=="object")for(const c in u)e.provide(c,u[c])}async function cg(e,n){for(const u of n)await ug(e,u)}function fg(e){return e.map(u=>typeof u!="function"?null:u.length>1?c=>u(c,c.provide):u).filter(Boolean)}function Da(e){return e[og]=!0,e}function sn(e,n,u){const c=()=>u?n(...u):n();return _u.set(e),c()}function Zt(){const e=_u.tryUse();if(!e){const n=bn();if(!n)throw new Error("nuxt instance unavailable");return n.appContext.app.$nuxt}return e}function Jo(){return Zt().$config}function fi(e,n,u){Object.defineProperty(e,n,{get:()=>u})}const Ps={},dg=Da(e=>{for(const n in Ps)e.vueApp.component(n,Ps[n]),e.vueApp.component("Lazy"+n,Ps[n])});function hg(e){return Array.isArray(e)?e:[e]}const Au=["title","script","style","noscript"],Ra=["base","meta","link","style","script","noscript"],gg=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],pg=["base","title","titleTemplate","bodyAttrs","htmlAttrs"],vg=["tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent"];function Lu(e){let n=9;for(let u=0;u<e.length;)n=Math.imul(n^e.charCodeAt(u++),9**9);return((n^n>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function Di(e){return Lu(`${e.tag}:${e.textContent||e.innerHTML||""}:${Object.entries(e.props).map(([n,u])=>`${n}:${String(u)}`).join(",")}`)}function mg(e){let n=9;for(const u of e)for(let c=0;c<u.length;)n=Math.imul(n^u.charCodeAt(c++),9**9);return((n^n>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function ku(e,n){const{props:u,tag:c}=e;if(pg.includes(c))return c;if(c==="link"&&u.rel==="canonical")return"canonical";if(u.charset)return"charset";const g=["id"];c==="meta"&&g.push("name","property","http-equiv");for(const m of g)if(typeof u[m]<"u"){const E=String(u[m]);return n&&!n(E)?!1:`${c}:${m}:${E}`}return!1}const Zo=(e,n)=>e==null?n||null:typeof e=="function"?e(n):e,di=(e,n=!1,u)=>{const{tag:c,$el:g}=e;g&&(Object.entries(c.props).forEach(([m,E])=>{E=String(E);const S=`attr:${m}`;if(m==="class"){if(!E)return;for(const b of E.split(" ")){const L=`${S}:${b}`;u&&u(e,L,()=>g.classList.remove(b)),g.classList.contains(b)||g.classList.add(b)}return}u&&!m.startsWith("data-h-")&&u(e,S,()=>g.removeAttribute(m)),(n||g.getAttribute(m)!==E)&&g.setAttribute(m,E)}),Au.includes(c.tag)&&(c.textContent&&c.textContent!==g.textContent?g.textContent=c.textContent:c.innerHTML&&c.innerHTML!==g.innerHTML&&(g.innerHTML=c.innerHTML)))};let In=!1;async function Du(e,n={}){var y,I;const u={shouldRender:!0};if(await e.hooks.callHook("dom:beforeRender",u),!u.shouldRender)return;const c=n.document||e.resolvedOptions.document||window.document,g=(await e.resolveTags()).map(S);if(e.resolvedOptions.experimentalHashHydration&&(In=In||e._hash||!1,In)){const k=mg(g.map(z=>z.tag._h));if(In===k)return;In=k}const m=e._popSideEffectQueue();e.headEntries().map(k=>k._sde).forEach(k=>{Object.entries(k).forEach(([z,Z])=>{m[z]=Z})});const E=(k,z,Z)=>{z=`${k.renderId}:${z}`,k.entry&&(k.entry._sde[z]=Z),delete m[z]};function S(k){const z=e.headEntries().find(V=>V._i===k._e),Z={renderId:k._d||Di(k),$el:null,shouldRender:!0,tag:k,entry:z,markSideEffect:(V,M)=>E(Z,V,M)};return Z}const b=[],L={body:[],head:[]},w=k=>{e._elMap[k.renderId]=k.$el,b.push(k),E(k,"el",()=>{var z;(z=k.$el)==null||z.remove(),delete e._elMap[k.renderId]})};for(const k of g){if(await e.hooks.callHook("dom:beforeRenderTag",k),!k.shouldRender)continue;const{tag:z}=k;if(z.tag==="title"){c.title=z.textContent||"",b.push(k);continue}if(z.tag==="htmlAttrs"||z.tag==="bodyAttrs"){k.$el=c[z.tag==="htmlAttrs"?"documentElement":"body"],di(k,!1,E),b.push(k);continue}if(k.$el=e._elMap[k.renderId],!k.$el&&z.key&&(k.$el=c.querySelector(`${(y=z.tagPosition)!=null&&y.startsWith("body")?"body":"head"} > ${z.tag}[data-h-${z._h}]`)),k.$el){k.tag._d&&di(k),w(k);continue}L[(I=z.tagPosition)!=null&&I.startsWith("body")?"body":"head"].push(k)}const A={bodyClose:void 0,bodyOpen:void 0,head:void 0};Object.entries(L).forEach(([k,z])=>{var V;if(!z.length)return;const Z=(V=c==null?void 0:c[k])==null?void 0:V.children;if(Z){for(const M of[...Z].reverse()){const B=M.tagName.toLowerCase();if(!Ra.includes(B))continue;const re=M.getAttributeNames().reduce((ie,pe)=>({...ie,[pe]:M.getAttribute(pe)}),{}),q={tag:B,props:re};M.innerHTML&&(q.innerHTML=M.innerHTML);const Q=Di(q);let $=z.findIndex(ie=>(ie==null?void 0:ie.renderId)===Q);if($===-1){const ie=ku(q);$=z.findIndex(pe=>(pe==null?void 0:pe.tag._d)&&pe.tag._d===ie)}if($!==-1){const ie=z[$];ie.$el=M,di(ie),w(ie),delete z[$]}}z.forEach(M=>{const B=M.tag.tagPosition||"head";A[B]=A[B]||c.createDocumentFragment(),M.$el||(M.$el=c.createElement(M.tag.tag),di(M,!0)),A[B].appendChild(M.$el),w(M)})}}),A.head&&c.head.appendChild(A.head),A.bodyOpen&&c.body.insertBefore(A.bodyOpen,c.body.firstChild),A.bodyClose&&c.body.appendChild(A.bodyClose);for(const k of b)await e.hooks.callHook("dom:renderTag",k);Object.values(m).forEach(k=>k())}let Os=null;async function Ru(e,n={}){function u(){return Os=null,Du(e,n)}const c=n.delayFn||(g=>setTimeout(g,10));return Os=Os||new Promise(g=>c(()=>g(u())))}const yg=e=>({hooks:{"entries:updated":function(n){if(typeof(e==null?void 0:e.document)>"u"&&typeof window>"u")return;let u=e==null?void 0:e.delayFn;!u&&typeof requestAnimationFrame<"u"&&(u=requestAnimationFrame),Ru(n,{document:(e==null?void 0:e.document)||window.document,delayFn:u})}}});function Eg(e){var n;return((n=e==null?void 0:e.head.querySelector('meta[name="unhead:ssr"]'))==null?void 0:n.getAttribute("content"))||!1}const el={critical:2,high:9,low:12,base:-1,title:1,meta:10};function tl(e){if(typeof e.tagPriority=="number")return e.tagPriority;if(e.tag==="meta"){if(e.props.charset)return-2;if(e.props["http-equiv"]==="content-security-policy")return 0}const n=e.tagPriority||e.tag;return n in el?el[n]:10}const Tg=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}];function bg(){return{hooks:{"tags:resolve":e=>{const n=u=>{var c;return(c=e.tags.find(g=>g._d===u))==null?void 0:c._p};for(const{prefix:u,offset:c}of Tg)for(const g of e.tags.filter(m=>typeof m.tagPriority=="string"&&m.tagPriority.startsWith(u))){const m=n(g.tagPriority.replace(u,""));typeof m<"u"&&(g._p=m+c)}e.tags.sort((u,c)=>u._p-c._p).sort((u,c)=>tl(u)-tl(c))}}}}const Sg=()=>({hooks:{"tags:resolve":e=>{const{tags:n}=e;let u=n.findIndex(g=>g.tag==="titleTemplate");const c=n.findIndex(g=>g.tag==="title");if(c!==-1&&u!==-1){const g=Zo(n[u].textContent,n[c].textContent);g!==null?n[c].textContent=g||n[c].textContent:delete n[c]}else if(u!==-1){const g=Zo(n[u].textContent);g!==null&&(n[u].textContent=g,n[u].tag="title",u=-1)}u!==-1&&delete n[u],e.tags=n.filter(Boolean)}}}),_g=()=>({hooks:{"tag:normalise":function({tag:e}){typeof e.props.body<"u"&&(e.tagPosition="bodyClose",delete e.props.body)}}}),wu=typeof window<"u",Ag=()=>({hooks:{"tag:normalise":e=>{var m,E;const{tag:n,entry:u,resolvedOptions:c}=e;c.experimentalHashHydration===!0&&(n._h=Di(n));const g=typeof n.props._dynamic<"u";!Ra.includes(n.tag)||!n.key||wu||(E=(m=Cu())==null?void 0:m.resolvedOptions)!=null&&E.document||(u._m==="server"||g)&&(n._h=n._h||Di(n),n.props[`data-h-${n._h}`]="")},"tags:resolve":e=>{e.tags=e.tags.map(n=>(delete n.props._dynamic,n))}}}),rl=["script","link","bodyAttrs"],Lg=()=>{const e=(n,u)=>{const c={},g={};Object.entries(u.props).forEach(([E,S])=>{E.startsWith("on")&&typeof S=="function"?g[E]=S:c[E]=S});let m;return n==="dom"&&u.tag==="script"&&typeof c.src=="string"&&typeof g.onload<"u"&&(m=c.src,delete c.src),{props:c,eventHandlers:g,delayedSrc:m}};return{hooks:{"ssr:render":function(n){n.tags=n.tags.map(u=>(!rl.includes(u.tag)||!Object.entries(u.props).find(([c,g])=>c.startsWith("on")&&typeof g=="function")||(u.props=e("ssr",u).props),u))},"dom:beforeRenderTag":function(n){if(!rl.includes(n.tag.tag)||!Object.entries(n.tag.props).find(([m,E])=>m.startsWith("on")&&typeof E=="function"))return;const{props:u,eventHandlers:c,delayedSrc:g}=e("dom",n.tag);Object.keys(c).length&&(n.tag.props=u,n.tag._eventHandlers=c,n.tag._delayedSrc=g)},"dom:renderTag":function(n){const u=n.$el;if(!n.tag._eventHandlers||!u)return;const c=n.tag.tag==="bodyAttrs"&&typeof window<"u"?window:u;Object.entries(n.tag._eventHandlers).forEach(([g,m])=>{const E=`${n.tag._d||n.tag._p}:${g}`,S=g.slice(2).toLowerCase(),b=`data-h-${S}`;if(n.markSideEffect(E,()=>{}),u.hasAttribute(b))return;const L=m;u.setAttribute(b,""),c.addEventListener(S,L),n.entry&&(n.entry._sde[E]=()=>{c.removeEventListener(S,L),u.removeAttribute(b)})}),n.tag._delayedSrc&&u.setAttribute("src",n.tag._delayedSrc)}}}},kg=["templateParams","htmlAttrs","bodyAttrs"],Dg=e=>{e=e||{};const n=e.dedupeKeys||["hid","vmid","key"];return{hooks:{"tag:normalise":function({tag:u}){n.forEach(g=>{u.props[g]&&(u.key=u.props[g],delete u.props[g])});const c=u.key?`${u.tag}:${u.key}`:ku(u);c&&(u._d=c)},"tags:resolve":function(u){const c={};u.tags.forEach(m=>{const E=m._d||m._p,S=c[E];if(S){let b=m==null?void 0:m.tagDuplicateStrategy;if(!b&&kg.includes(m.tag)&&(b="merge"),b==="merge"){const w=S.props;["class","style"].forEach(A=>{m.props[A]&&w[A]&&(A==="style"&&!w[A].endsWith(";")&&(w[A]+=";"),m.props[A]=`${w[A]} ${m.props[A]}`)}),c[E].props={...w,...m.props};return}else if(m._e===S._e){S._duped=S._duped||[],m._d=`${S._d}:${S._duped.length+1}`,S._duped.push(m);return}const L=Object.keys(m.props).length;if((L===0||L===1&&typeof m.props["data-h-key"]<"u")&&!m.innerHTML&&!m.textContent){delete c[E];return}}c[E]=m});const g=[];Object.values(c).forEach(m=>{const E=m._duped;delete m._duped,g.push(m),E&&g.push(...E)}),u.tags=g}}}};function Fs(e,n){const u=(g,m)=>{let E;return m==="pageTitle"||m==="s"?E=n.pageTitle:m.includes(".")?E=m.split(".").reduce((S,b)=>S[b]||"",n):E=n[m],E||""};let c=e.replace(/%(\w+\.+\w+)/g,u).replace(/%(\w+)/g,u).trim();return n.separator&&(c.endsWith(n.separator)&&(c=c.slice(0,-n.separator.length).trim()),c.startsWith(n.separator)&&(c=c.slice(n.separator.length).trim()),c=c.replace(new RegExp(`\\${n.separator}\\s*\\${n.separator}`,"g"),n.separator)),c}function Rg(){return{hooks:{"tags:resolve":e=>{var m;const{tags:n}=e,u=(m=n.find(E=>E.tag==="title"))==null?void 0:m.textContent,c=n.findIndex(E=>E.tag==="templateParams"),g=c!==-1?n[c].textContent:{};g.pageTitle=g.pageTitle||u||"";for(const E of n)["titleTemplate","title"].includes(E.tag)&&typeof E.textContent=="string"?E.textContent=Fs(E.textContent,g):E.tag==="meta"&&typeof E.props.content=="string"?E.props.content=Fs(E.props.content,g):E.tag==="script"&&["application/json","application/ld+json"].includes(E.props.type)&&typeof E.innerHTML=="string"&&(E.innerHTML=Fs(E.innerHTML,g));e.tags=n.filter(E=>E.tag!=="templateParams")}}}}let Iu;const wg=e=>Iu=e,Cu=()=>Iu;async function Ig(e,n){const u={tag:e,props:{}};return["title","titleTemplate","templateParams"].includes(e)?(u.textContent=n instanceof Promise?await n:n,u):typeof n=="string"?["script","noscript","style"].includes(e)?(e==="script"&&(/^(https?:)?\/\//.test(n)||n.startsWith("/"))?u.props.src=n:(u.innerHTML=n,u.key=Lu(n)),u):!1:(u.props=await xg(e,{...n}),u.props.children&&(u.props.innerHTML=u.props.children),delete u.props.children,Object.keys(u.props).filter(c=>vg.includes(c)).forEach(c=>{(!["innerHTML","textContent"].includes(c)||Au.includes(u.tag))&&(u[c]=u.props[c]),delete u.props[c]}),["innerHTML","textContent"].forEach(c=>{if(u.tag==="script"&&typeof u[c]=="string"&&["application/ld+json","application/json"].includes(u.props.type))try{u[c]=JSON.parse(u[c])}catch{u[c]=""}typeof u[c]=="object"&&(u[c]=JSON.stringify(u[c]))}),u.props.class&&(u.props.class=Cg(u.props.class)),u.props.content&&Array.isArray(u.props.content)?u.props.content.map(c=>({...u,props:{...u.props,content:c}})):u)}function Cg(e){return typeof e=="object"&&!Array.isArray(e)&&(e=Object.keys(e).filter(n=>e[n])),(Array.isArray(e)?e.join(" "):e).split(" ").filter(n=>n.trim()).filter(Boolean).join(" ")}async function xg(e,n){for(const u of Object.keys(n)){const c=u.startsWith("data-");n[u]instanceof Promise&&(n[u]=await n[u]),String(n[u])==="true"?n[u]=c?"true":"":String(n[u])==="false"&&(c?n[u]="false":delete n[u])}return n}const Pg=10;async function Og(e){const n=[];return Object.entries(e.resolvedInput).filter(([u,c])=>typeof c<"u"&&gg.includes(u)).forEach(([u,c])=>{const g=hg(c);n.push(...g.map(m=>Ig(u,m)).flat())}),(await Promise.all(n)).flat().filter(Boolean).map((u,c)=>(u._e=e._i,u._p=(e._i<<Pg)+c,u))}const Fg=()=>[Dg(),bg(),Rg(),Sg(),Ag(),Lg(),_g()],Mg=(e={})=>[yg({document:e==null?void 0:e.document,delayFn:e==null?void 0:e.domDelayFn})];function Ng(e={}){const n=Ug({...e,plugins:[...Mg(e),...(e==null?void 0:e.plugins)||[]]});return e.experimentalHashHydration&&n.resolvedOptions.document&&(n._hash=Eg(n.resolvedOptions.document)),wg(n),n}function Ug(e={}){let n=[],u={},c=0;const g=Su();e!=null&&e.hooks&&g.addHooks(e.hooks),e.plugins=[...Fg(),...(e==null?void 0:e.plugins)||[]],e.plugins.forEach(S=>S.hooks&&g.addHooks(S.hooks)),e.document=e.document||(wu?document:void 0);const m=()=>g.callHook("entries:updated",E),E={resolvedOptions:e,headEntries(){return n},get hooks(){return g},use(S){S.hooks&&g.addHooks(S.hooks)},push(S,b){const L={_i:c++,input:S,_sde:{}};return b!=null&&b.mode&&(L._m=b==null?void 0:b.mode),b!=null&&b.transform&&(L._t=b==null?void 0:b.transform),n.push(L),m(),{dispose(){n=n.filter(w=>w._i!==L._i?!0:(u={...u,...w._sde||{}},w._sde={},m(),!1))},patch(w){n=n.map(A=>(A._i===L._i&&(L.input=A.input=w,m()),A))}}},async resolveTags(){const S={tags:[],entries:[...n]};await g.callHook("entries:resolve",S);for(const b of S.entries){const L=b._t||(w=>w);b.resolvedInput=L(b.resolvedInput||b.input);for(const w of await Og(b)){const A={tag:w,entry:b,resolvedOptions:E.resolvedOptions};await g.callHook("tag:normalise",A),S.tags.push(A.tag)}}return await g.callHook("tags:resolve",S),S.tags},_popSideEffectQueue(){const S={...u};return u={},S},_elMap:{}};return E.hooks.callHook("init",E),E}function Bg(e){return typeof e=="function"?e():Ut(e)}function Ri(e,n=""){if(e instanceof Promise)return e;const u=Bg(e);if(!e||!u)return u;if(Array.isArray(u))return u.map(c=>Ri(c,n));if(typeof u=="object"){let c=!1;const g=Object.fromEntries(Object.entries(u).map(([m,E])=>m==="titleTemplate"||m.startsWith("on")?[m,Ut(E)]:((typeof E=="function"||Pt(E))&&(c=!0),[m,Ri(E,m)])));return c&&Ra.includes(String(n))&&(g._dynamic=!0),g}return u}const Hg=La.startsWith("3"),Kg=typeof window<"u",xu="usehead";function wa(){return bn()&&fn(xu)||Cu()}function jg(e){return{install(u){Hg&&(u.config.globalProperties.$unhead=e,u.config.globalProperties.$head=e,u.provide(xu,e))}}.install}function Gg(e={}){const n=Ng({...e,domDelayFn:u=>setTimeout(()=>va(()=>u()),10),plugins:[Vg(),...(e==null?void 0:e.plugins)||[]]});return n.install=jg(n),n}const Vg=()=>({hooks:{"entries:resolve":function(e){for(const n of e.entries)n.resolvedInput=Ri(n.input)}}});function Wg(e,n={}){const u=wa(),c=Sr(!1),g=Sr({});Zf(()=>{g.value=c.value?{}:Ri(e)});const m=u.push(g.value,n);return Pn(g,S=>{m.patch(S)}),bn()&&(Wl(()=>{m.dispose()}),Kl(()=>{c.value=!0}),Hl(()=>{c.value=!1})),m}function Yg(e,n={}){return wa().push(e,n)}function Pu(e,n={}){var c;const u=wa();if(u){const g=Kg||!!((c=u.resolvedOptions)!=null&&c.document);return n.mode==="server"&&g||n.mode==="client"&&!g?void 0:g?Wg(e,n):Yg(e,n)}}function qg(e,n){const u=Gg(n||{}),c={unhead:u,install(g){La.startsWith("3")&&(g.config.globalProperties.$head=u,g.provide("usehead",u))},use(g){u.use(g)},resolveTags(){return u.resolveTags()},headEntries(){return u.headEntries()},headTags(){return u.resolveTags()},push(g,m){return u.push(g,m)},addEntry(g,m){return u.push(g,m)},addHeadObjs(g,m){return u.push(g,m)},addReactiveEntry(g,m){const E=Pu(g,m);return typeof E<"u"?E.dispose:()=>{}},removeHeadObjs(){},updateDOM(g,m){m?Du(u,{document:g}):Ru(u,{delayFn:E=>setTimeout(()=>E(),50),document:g})},internalHooks:u.hooks,hooks:{"before:dom":[],"resolved:tags":[],"resolved:entries":[]}};return u.addHeadObjs=c.addHeadObjs,u.updateDOM=c.updateDOM,u.hooks.hook("dom:beforeRender",g=>{for(const m of c.hooks["before:dom"])m()===!1&&(g.shouldRender=!1)}),e&&c.addHeadObjs(e),c}const $g={meta:[{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"utf-8"}],link:[],style:[],script:[],noscript:[]},zg="__nuxt",Xg=Da(e=>{const n=qg();n.push($g),e.vueApp.use(n);{let u=!0;const c=()=>{u=!1,n.internalHooks.callHook("entries:updated",n.unhead)};n.internalHooks.hook("dom:beforeRender",g=>{g.shouldRender=!u}),e.hooks.hook("page:start",()=>{u=!0}),e.hooks.hook("page:finish",c),e.hooks.hook("app:mounted",c)}e._useHead=Pu});function Ms(e){return e!==null&&typeof e=="object"}function Js(e,n,u=".",c){if(!Ms(n))return Js(e,{},u,c);const g=Object.assign({},n);for(const m in e){if(m==="__proto__"||m==="constructor")continue;const E=e[m];E!=null&&(c&&c(g,m,E,u)||(Array.isArray(E)&&Array.isArray(g[m])?g[m]=[...E,...g[m]]:Ms(E)&&Ms(g[m])?g[m]=Js(E,g[m],(u?`${u}.`:"")+m.toString(),c):g[m]=E))}return g}function Qg(e){return(...n)=>n.reduce((u,c)=>Js(u,c,"",e),{})}const Jg=Qg((e,n,u)=>{if(typeof e[n]<"u"&&typeof u=="function")return e[n]=u(e[n]),!0});class Zs extends Error{constructor(){super(...arguments),this.statusCode=500,this.fatal=!1,this.unhandled=!1,this.statusMessage=void 0}toJSON(){const n={message:this.message,statusCode:this.statusCode};return this.statusMessage&&(n.statusMessage=this.statusMessage),this.data!==void 0&&(n.data=this.data),n}}Zs.__h3_error__=!0;function Zg(e){if(typeof e=="string")return new Zs(e);if(ep(e))return e;const n=new Zs(e.message??e.statusMessage,e.cause?{cause:e.cause}:void 0);if("stack"in e)try{Object.defineProperty(n,"stack",{get(){return e.stack}})}catch{try{n.stack=e.stack}catch{}}return e.data&&(n.data=e.data),e.statusCode?n.statusCode=e.statusCode:e.status&&(n.statusCode=e.status),e.statusMessage?n.statusMessage=e.statusMessage:e.statusText&&(n.statusMessage=e.statusText),e.fatal!==void 0&&(n.fatal=e.fatal),e.unhandled!==void 0&&(n.unhandled=e.unhandled),n}function ep(e){var n;return((n=e==null?void 0:e.constructor)==null?void 0:n.__h3_error__)===!0}const Ia=()=>Rl(Zt().payload,"error"),tp=e=>{const n=ea(e);try{Zt().callHook("app:error",n);const c=Ia();c.value=c.value||n}catch{throw n}return n},rp=async(e={})=>{const n=Zt(),u=Ia();n.callHook("app:error:cleared",e),e.redirect&&await n.$router.replace(e.redirect),u.value=null},np=e=>!!(e&&typeof e=="object"&&"__nuxt_error"in e),ea=e=>{const n=Zg(e);return n.__nuxt_error=!0,n};function ip(...e){const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);const[u,c]=e;if(!u||typeof u!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+u);if(c!==void 0&&typeof c!="function")throw new Error("[nuxt] [useState] init must be a function: "+c);const g="$s"+u,m=Zt(),E=Rl(m.payload.state,g);if(E.value===void 0&&c){const S=c();if(Pt(S))return m.payload.state[g]=S,S;E.value=S}return E}function sp(e=Zt()){var n;return(n=e.ssrContext)==null?void 0:n.event}const ap=()=>{var e;return(e=Zt())==null?void 0:e.$router},op=()=>bn()?fn("_route",Zt()._route):Zt()._route,lp=()=>{try{if(Zt()._processingMiddleware)return!0}catch{return!0}return!1},up=(e,n)=>{e||(e="/");const u=typeof e=="string"?e:e.path||"/",c=ka(u,!0);if(c&&!(n!=null&&n.external))throw new Error("Navigating to external URL is not allowed by default. Use `navigateTo (url, { external: true })`.");if(c&&Bi(u).protocol==="script:")throw new Error("Cannot navigate to an URL with script protocol.");if(!c&&lp())return e;const g=ap();return c?(n!=null&&n.replace?location.replace(u):location.href=u,Promise.resolve()):n!=null&&n.replace?g.replace(e):g.push(e)},cp=[];function Ns(e){typeof e=="object"&&(e=yu({pathname:e.path||"",search:gu(e.query||{}),hash:e.hash||""}));const n=Bi(e.toString());return{path:n.pathname,fullPath:e,query:hu(n.search),hash:n.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:e}}const fp=Da(e=>{const n=Oh(window.location.pathname,Jo().app.baseURL)+window.location.search+window.location.hash,u=[],c={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},g=(w,A)=>(c[w].push(A),()=>c[w].splice(c[w].indexOf(A),1)),m=Jo().app.baseURL,E=Or(Ns(n));async function S(w,A){try{const y=Ns(w);for(const I of c["navigate:before"]){const k=await I(y,E);if(k===!1||k instanceof Error)return;if(k)return S(k,!0)}for(const I of c["resolve:before"])await I(y,E);Object.assign(E,y),window.history[A?"replaceState":"pushState"]({},"",Ui(m,y.fullPath)),e.isHydrating||await sn(e,rp);for(const I of c["navigate:after"])await I(y,E)}catch(y){for(const I of c.error)await I(y)}}const b={currentRoute:E,isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:w=>S(w,!1),replace:w=>S(w,!0),back:()=>window.history.go(-1),go:w=>window.history.go(w),forward:()=>window.history.go(1),beforeResolve:w=>g("resolve:before",w),beforeEach:w=>g("navigate:before",w),afterEach:w=>g("navigate:after",w),onError:w=>g("error",w),resolve:Ns,addRoute:(w,A)=>{u.push(A)},getRoutes:()=>u,hasRoute:w=>u.some(A=>A.name===w),removeRoute:w=>{const A=u.findIndex(y=>y.name===w);A!==-1&&u.splice(A,1)}};e.vueApp.component("RouterLink",{functional:!0,props:{to:String,custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(w,{slots:A})=>{const y=()=>S(w.to,w.replace);return()=>{var k;const I=b.resolve(w.to);return w.custom?(k=A.default)==null?void 0:k.call(A,{href:w.to,navigate:y,route:I}):Gd("a",{href:w.to,onClick:z=>(z.preventDefault(),y())},A)}}}),window.addEventListener("popstate",w=>{const A=w.target.location;b.replace(A.href.replace(A.origin,""))}),e._route=E,e._middleware=e._middleware||{global:[],named:{}};const L=ip("_layout");return e.hooks.hookOnce("app:created",async()=>{if(b.beforeEach(async(w,A)=>{w.meta=Or(w.meta||{}),e.isHydrating&&L.value&&!zr(w.meta.layout)&&(w.meta.layout=L.value),e._processingMiddleware=!0;const y=new Set([...cp,...e._middleware.global]);for(const I of y){const k=await sn(e,I,[w,A]);if(k||k===!1)return k}}),b.afterEach(()=>{delete e._processingMiddleware}),await b.replace(n),!Nh(E.fullPath,n)){const w=await sn(e,sp),A={redirectCode:w.node.res.statusCode!==200&&w.node.res.statusCode||302};await sn(e,up,[E.fullPath,A])}}),{provide:{route:E,router:b}}}),dp=[dg,Xg,fp],hp="modulepreload",gp=function(e,n){return e.startsWith(".")?new URL(e,n).href:e},nl={},pp=function(n,u,c){if(!u||u.length===0)return n();const g=document.getElementsByTagName("link");return Promise.all(u.map(m=>{if(m=gp(m,c),m in nl)return;nl[m]=!0;const E=m.endsWith(".css"),S=E?'[rel="stylesheet"]':"";if(!!c)for(let w=g.length-1;w>=0;w--){const A=g[w];if(A.href===m&&(!E||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${S}`))return;const L=document.createElement("link");if(L.rel=E?"stylesheet":hp,E||(L.as="script",L.crossOrigin=""),L.href=m,document.head.appendChild(L),E)return new Promise((w,A)=>{L.addEventListener("load",w),L.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})})).then(()=>n())},vp=()=>null;function mp(...e){var y;const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);let[u,c,g={}]=e;if(typeof u!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");g.server=g.server??!0,g.default=g.default??vp,g.lazy=g.lazy??!1,g.immediate=g.immediate??!0;const m=Zt(),E=()=>m.isHydrating?m.payload.data[u]:m.static.data[u],S=()=>E()!==void 0;m._asyncData[u]||(m._asyncData[u]={data:Sr(E()??((y=g.default)==null?void 0:y.call(g))??null),pending:Sr(!S()),error:Sr(m.payload._errors[u]?ea(m.payload._errors[u]):null)});const b={...m._asyncData[u]};b.refresh=b.execute=(I={})=>{if(m._asyncDataPromises[u]){if(I.dedupe===!1)return m._asyncDataPromises[u];m._asyncDataPromises[u].cancelled=!0}if(I._initial&&S())return E();b.pending.value=!0;const k=new Promise((z,Z)=>{try{z(c(m))}catch(V){Z(V)}}).then(z=>{if(k.cancelled)return m._asyncDataPromises[u];g.transform&&(z=g.transform(z)),g.pick&&(z=yp(z,g.pick)),b.data.value=z,b.error.value=null}).catch(z=>{var Z;if(k.cancelled)return m._asyncDataPromises[u];b.error.value=z,b.data.value=Ut(((Z=g.default)==null?void 0:Z.call(g))??null)}).finally(()=>{k.cancelled||(b.pending.value=!1,m.payload.data[u]=b.data.value,b.error.value&&(m.payload._errors[u]=ea(b.error.value)),delete m._asyncDataPromises[u])});return m._asyncDataPromises[u]=k,m._asyncDataPromises[u]};const L=()=>b.refresh({_initial:!0}),w=g.server!==!1&&m.payload.serverRendered;{const I=bn();if(I&&!I._nuxtOnBeforeMountCbs){I._nuxtOnBeforeMountCbs=[];const z=I._nuxtOnBeforeMountCbs;I&&(Gl(()=>{z.forEach(Z=>{Z()}),z.splice(0,z.length)}),Ti(()=>z.splice(0,z.length)))}w&&m.isHydrating&&S()?b.pending.value=!1:I&&(m.payload.serverRendered&&m.isHydrating||g.lazy)&&g.immediate?I._nuxtOnBeforeMountCbs.push(L):g.immediate&&L(),g.watch&&Pn(g.watch,()=>b.refresh());const k=m.hook("app:data:refresh",z=>{if(!z||z.includes(u))return b.refresh()});I&&Ti(k)}const A=Promise.resolve(m._asyncDataPromises[u]).then(()=>b);return Object.assign(A,b),A}function yp(e,n){const u={};for(const c of n)u[c]=e[c];return u}const Ep={ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1};function Tp(e,n={}){n={...Ep,...n};const u=Ou(n);return u.dispatch(e),u.toString()}function Ou(e){const n=[];let u=[];const c=g=>{n.push(g)};return{toString(){return n.join("")},getContext(){return u},dispatch(g){return e.replacer&&(g=e.replacer(g)),this["_"+(g===null?"null":typeof g)](g)},_object(g){const m=/\[object (.*)]/i,E=Object.prototype.toString.call(g),S=m.exec(E),b=S?S[1].toLowerCase():"unknown:["+E.toLowerCase()+"]";let L=null;if((L=u.indexOf(g))>=0)return this.dispatch("[CIRCULAR:"+L+"]");if(u.push(g),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(g))return c("buffer:"),c(g.toString("utf8"));if(b!=="object"&&b!=="function"&&b!=="asyncfunction")if(this["_"+b])this["_"+b](g);else{if(e.ignoreUnknown)return c("["+b+"]");throw new Error('Unknown object type "'+b+'"')}else{let w=Object.keys(g);e.unorderedObjects&&(w=w.sort()),e.respectType!==!1&&!il(g)&&w.splice(0,0,"prototype","__proto__","letructor"),e.excludeKeys&&(w=w.filter(function(A){return!e.excludeKeys(A)})),c("object:"+w.length+":");for(const A of w)this.dispatch(A),c(":"),e.excludeValues||this.dispatch(g[A]),c(",")}},_array(g,m){if(m=typeof m<"u"?m:e.unorderedArrays!==!1,c("array:"+g.length+":"),!m||g.length<=1){for(const b of g)this.dispatch(b);return}const E=[],S=g.map(b=>{const L=Ou(e);return L.dispatch(b),E.push(L.getContext()),L.toString()});return u=[...u,...E],S.sort(),this._array(S,!1)},_date(g){return c("date:"+g.toJSON())},_symbol(g){return c("symbol:"+g.toString())},_error(g){return c("error:"+g.toString())},_boolean(g){return c("bool:"+g.toString())},_string(g){c("string:"+g.length+":"),c(g.toString())},_function(g){c("fn:"),il(g)?this.dispatch("[native]"):this.dispatch(g.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(g.name)),e.respectFunctionProperties&&this._object(g)},_number(g){return c("number:"+g.toString())},_xml(g){return c("xml:"+g.toString())},_null(){return c("Null")},_undefined(){return c("Undefined")},_regexp(g){return c("regex:"+g.toString())},_uint8array(g){return c("uint8array:"),this.dispatch(Array.prototype.slice.call(g))},_uint8clampedarray(g){return c("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(g))},_int8array(g){return c("int8array:"),this.dispatch(Array.prototype.slice.call(g))},_uint16array(g){return c("uint16array:"),this.dispatch(Array.prototype.slice.call(g))},_int16array(g){return c("int16array:"),this.dispatch(Array.prototype.slice.call(g))},_uint32array(g){return c("uint32array:"),this.dispatch(Array.prototype.slice.call(g))},_int32array(g){return c("int32array:"),this.dispatch(Array.prototype.slice.call(g))},_float32array(g){return c("float32array:"),this.dispatch(Array.prototype.slice.call(g))},_float64array(g){return c("float64array:"),this.dispatch(Array.prototype.slice.call(g))},_arraybuffer(g){return c("arraybuffer:"),this.dispatch(new Uint8Array(g))},_url(g){return c("url:"+g.toString())},_map(g){c("map:");const m=[...g];return this._array(m,e.unorderedSets!==!1)},_set(g){c("set:");const m=[...g];return this._array(m,e.unorderedSets!==!1)},_file(g){return c("file:"),this.dispatch([g.name,g.size,g.type,g.lastModfied])},_blob(){if(e.ignoreUnknown)return c("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow(){return c("domwindow")},_bigint(g){return c("bigint:"+g.toString())},_process(){return c("process")},_timer(){return c("timer")},_pipe(){return c("pipe")},_tcp(){return c("tcp")},_udp(){return c("udp")},_tty(){return c("tty")},_statwatcher(){return c("statwatcher")},_securecontext(){return c("securecontext")},_connection(){return c("connection")},_zlib(){return c("zlib")},_context(){return c("context")},_nodescript(){return c("nodescript")},_httpparser(){return c("httpparser")},_dataview(){return c("dataview")},_signal(){return c("signal")},_fsevent(){return c("fsevent")},_tlswrap(){return c("tlswrap")}}}function il(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code]\s+}$/i.exec(Function.prototype.toString.call(e))!=null}class vn{constructor(n,u){n=this.words=n||[],this.sigBytes=u!==void 0?u:n.length*4}toString(n){return(n||bp).stringify(this)}concat(n){if(this.clamp(),this.sigBytes%4)for(let u=0;u<n.sigBytes;u++){const c=n.words[u>>>2]>>>24-u%4*8&255;this.words[this.sigBytes+u>>>2]|=c<<24-(this.sigBytes+u)%4*8}else for(let u=0;u<n.sigBytes;u+=4)this.words[this.sigBytes+u>>>2]=n.words[u>>>2];return this.sigBytes+=n.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new vn([...this.words])}}const bp={stringify(e){const n=[];for(let u=0;u<e.sigBytes;u++){const c=e.words[u>>>2]>>>24-u%4*8&255;n.push((c>>>4).toString(16),(c&15).toString(16))}return n.join("")}},Sp={stringify(e){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u=[];for(let c=0;c<e.sigBytes;c+=3){const g=e.words[c>>>2]>>>24-c%4*8&255,m=e.words[c+1>>>2]>>>24-(c+1)%4*8&255,E=e.words[c+2>>>2]>>>24-(c+2)%4*8&255,S=g<<16|m<<8|E;for(let b=0;b<4&&c*8+b*6<e.sigBytes*8;b++)u.push(n.charAt(S>>>6*(3-b)&63))}return u.join("")}},_p={parse(e){const n=e.length,u=[];for(let c=0;c<n;c++)u[c>>>2]|=(e.charCodeAt(c)&255)<<24-c%4*8;return new vn(u,n)}},Ap={parse(e){return _p.parse(unescape(encodeURIComponent(e)))}};class Lp{constructor(){this._minBufferSize=0,this.blockSize=512/32,this.reset()}reset(){this._data=new vn,this._nDataBytes=0}_append(n){typeof n=="string"&&(n=Ap.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes}_doProcessBlock(n,u){}_process(n){let u,c=this._data.sigBytes/(this.blockSize*4);n?c=Math.ceil(c):c=Math.max((c|0)-this._minBufferSize,0);const g=c*this.blockSize,m=Math.min(g*4,this._data.sigBytes);if(g){for(let E=0;E<g;E+=this.blockSize)this._doProcessBlock(this._data.words,E);u=this._data.words.splice(0,g),this._data.sigBytes-=m}return new vn(u,m)}}class kp extends Lp{update(n){return this._append(n),this._process(),this}finalize(n){n&&this._append(n)}}const Dp=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Rp=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Vr=[];class wp extends kp{constructor(){super(),this.reset()}reset(){super.reset(),this._hash=new vn([...Dp])}_doProcessBlock(n,u){const c=this._hash.words;let g=c[0],m=c[1],E=c[2],S=c[3],b=c[4],L=c[5],w=c[6],A=c[7];for(let y=0;y<64;y++){if(y<16)Vr[y]=n[u+y]|0;else{const B=Vr[y-15],re=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,q=Vr[y-2],Q=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;Vr[y]=re+Vr[y-7]+Q+Vr[y-16]}const I=b&L^~b&w,k=g&m^g&E^m&E,z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),Z=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),V=A+Z+I+Rp[y]+Vr[y],M=z+k;A=w,w=L,L=b,b=S+V|0,S=E,E=m,m=g,g=V+M|0}c[0]=c[0]+g|0,c[1]=c[1]+m|0,c[2]=c[2]+E|0,c[3]=c[3]+S|0,c[4]=c[4]+b|0,c[5]=c[5]+L|0,c[6]=c[6]+w|0,c[7]=c[7]+A|0}finalize(n){super.finalize(n);const u=this._nDataBytes*8,c=this._data.sigBytes*8;return this._data.words[c>>>5]|=128<<24-c%32,this._data.words[(c+64>>>9<<4)+14]=Math.floor(u/4294967296),this._data.words[(c+64>>>9<<4)+15]=u,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function Ip(e){return new wp().finalize(e).toString(Sp)}function Cp(e,n={}){const u=typeof e=="string"?e:Tp(e,n);return Ip(u).slice(0,10)}function xp(e,n,u){const[c={},g]=typeof n=="string"?[{},n]:[n,u],m=c.key||Cp([g,Ut(c.baseURL),typeof e=="string"?e:"",Ut(c.params||c.query)]);if(!m||typeof m!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+m);if(!e)throw new Error("[nuxt] [useFetch] request is missing.");const E=m===g?"$f"+m:m,S=uu(()=>{let re=e;return typeof re=="function"&&(re=re()),Ut(re)}),{server:b,lazy:L,default:w,transform:A,pick:y,watch:I,immediate:k,...z}=c,Z=Or({...z,cache:typeof c.cache=="boolean"?void 0:c.cache}),V={server:b,lazy:L,default:w,transform:A,pick:y,immediate:k,watch:[Z,S,...I||[]]};let M;return mp(E,()=>{var q;return(q=M==null?void 0:M.abort)==null||q.call(M),M=typeof AbortController<"u"?new AbortController:{},typeof S.value=="string"&&S.value.startsWith("/"),(c.$fetch||globalThis.$fetch)(S.value,{signal:M.signal,...Z})},V)}const Pp={};Jg(Pp);var Op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ta={},Mp={get exports(){return ta},set exports(e){ta=e}};(function(e,n){typeof window<"u"&&function(u,c){e.exports=c()}(Op,()=>(()=>{var u={21:(E,S,b)=>{b.r(S),b.d(S,{default:()=>z});var L=function(){function Z(V,M){this.subtle=void 0,this.aesIV=void 0,this.subtle=V,this.aesIV=M}return Z.prototype.decrypt=function(V,M){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},M,V)},Z}(),w=function(){function Z(V,M){this.subtle=void 0,this.key=void 0,this.subtle=V,this.key=M}return Z.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},Z}(),A=b(145),y=function(){function Z(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var V=Z.prototype;return V.uint8ArrayToUint32Array_=function(M){for(var B=new DataView(M),re=new Uint32Array(4),q=0;q<4;q++)re[q]=B.getUint32(4*q);return re},V.initTable=function(){var M=this.sBox,B=this.invSBox,re=this.subMix,q=re[0],Q=re[1],$=re[2],ie=re[3],pe=this.invSubMix,Ce=pe[0],ee=pe[1],C=pe[2],W=pe[3],F=new Uint32Array(256),ce=0,me=0,he=0;for(he=0;he<256;he++)F[he]=he<128?he<<1:he<<1^283;for(he=0;he<256;he++){var fe=me^me<<1^me<<2^me<<3^me<<4;fe=fe>>>8^255&fe^99,M[ce]=fe,B[fe]=ce;var Ke=F[ce],We=F[Ke],Ge=F[We],Ue=257*F[fe]^16843008*fe;q[ce]=Ue<<24|Ue>>>8,Q[ce]=Ue<<16|Ue>>>16,$[ce]=Ue<<8|Ue>>>24,ie[ce]=Ue,Ue=16843009*Ge^65537*We^257*Ke^16843008*ce,Ce[fe]=Ue<<24|Ue>>>8,ee[fe]=Ue<<16|Ue>>>16,C[fe]=Ue<<8|Ue>>>24,W[fe]=Ue,ce?(ce=Ke^F[F[F[Ge^Ke]]],me^=F[F[me]]):ce=me=1}},V.expandKey=function(M){for(var B=this.uint8ArrayToUint32Array_(M),re=!0,q=0;q<B.length&&re;)re=B[q]===this.key[q],q++;if(!re){this.key=B;var Q=this.keySize=B.length;if(Q!==4&&Q!==6&&Q!==8)throw new Error("Invalid aes key size="+Q);var $,ie,pe,Ce,ee=this.ksRows=4*(Q+6+1),C=this.keySchedule=new Uint32Array(ee),W=this.invKeySchedule=new Uint32Array(ee),F=this.sBox,ce=this.rcon,me=this.invSubMix,he=me[0],fe=me[1],Ke=me[2],We=me[3];for($=0;$<ee;$++)$<Q?pe=C[$]=B[$]:(Ce=pe,$%Q==0?(Ce=F[(Ce=Ce<<8|Ce>>>24)>>>24]<<24|F[Ce>>>16&255]<<16|F[Ce>>>8&255]<<8|F[255&Ce],Ce^=ce[$/Q|0]<<24):Q>6&&$%Q==4&&(Ce=F[Ce>>>24]<<24|F[Ce>>>16&255]<<16|F[Ce>>>8&255]<<8|F[255&Ce]),C[$]=pe=(C[$-Q]^Ce)>>>0);for(ie=0;ie<ee;ie++)$=ee-ie,Ce=3&ie?C[$]:C[$-4],W[ie]=ie<4||$<=4?Ce:he[F[Ce>>>24]]^fe[F[Ce>>>16&255]]^Ke[F[Ce>>>8&255]]^We[F[255&Ce]],W[ie]=W[ie]>>>0}},V.networkToHostOrderSwap=function(M){return M<<24|(65280&M)<<8|(16711680&M)>>8|M>>>24},V.decrypt=function(M,B,re){for(var q,Q,$,ie,pe,Ce,ee,C,W,F,ce,me,he,fe,Ke=this.keySize+6,We=this.invKeySchedule,Ge=this.invSBox,Ue=this.invSubMix,Ze=Ue[0],ft=Ue[1],ue=Ue[2],ge=Ue[3],ae=this.uint8ArrayToUint32Array_(re),we=ae[0],ke=ae[1],Pe=ae[2],xe=ae[3],P=new Int32Array(M),H=new Int32Array(P.length),O=this.networkToHostOrderSwap;B<P.length;){for(W=O(P[B]),F=O(P[B+1]),ce=O(P[B+2]),me=O(P[B+3]),pe=W^We[0],Ce=me^We[1],ee=ce^We[2],C=F^We[3],he=4,fe=1;fe<Ke;fe++)q=Ze[pe>>>24]^ft[Ce>>16&255]^ue[ee>>8&255]^ge[255&C]^We[he],Q=Ze[Ce>>>24]^ft[ee>>16&255]^ue[C>>8&255]^ge[255&pe]^We[he+1],$=Ze[ee>>>24]^ft[C>>16&255]^ue[pe>>8&255]^ge[255&Ce]^We[he+2],ie=Ze[C>>>24]^ft[pe>>16&255]^ue[Ce>>8&255]^ge[255&ee]^We[he+3],pe=q,Ce=Q,ee=$,C=ie,he+=4;q=Ge[pe>>>24]<<24^Ge[Ce>>16&255]<<16^Ge[ee>>8&255]<<8^Ge[255&C]^We[he],Q=Ge[Ce>>>24]<<24^Ge[ee>>16&255]<<16^Ge[C>>8&255]<<8^Ge[255&pe]^We[he+1],$=Ge[ee>>>24]<<24^Ge[C>>16&255]<<16^Ge[pe>>8&255]<<8^Ge[255&Ce]^We[he+2],ie=Ge[C>>>24]<<24^Ge[pe>>16&255]<<16^Ge[Ce>>8&255]<<8^Ge[255&ee]^We[he+3],H[B]=O(q^we),H[B+1]=O(ie^ke),H[B+2]=O($^Pe),H[B+3]=O(Q^xe),we=W,ke=F,Pe=ce,xe=me,B+=4}return H.buffer},Z}(),I=b(93),k=b(63),z=function(){function Z(M,B){var re=(B===void 0?{}:B).removePKCS7Padding,q=re===void 0||re;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=M.enableSoftwareAES,this.removePKCS7Padding=q,q)try{var Q=self.crypto;Q&&(this.subtle=Q.subtle||Q.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var V=Z.prototype;return V.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},V.isSync=function(){return this.useSoftware},V.flush=function(){var M=this.currentResult,B=this.remainderData;if(!M||B)return this.reset(),null;var re,q,Q,$=new Uint8Array(M);return this.reset(),this.removePKCS7Padding?(Q=(q=(re=$).byteLength)&&new DataView(re.buffer).getUint8(q-1))?(0,A.sliceUint8)(re,0,q-Q):re:$},V.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},V.decrypt=function(M,B,re){var q=this;return this.useSoftware?new Promise(function(Q,$){q.softwareDecrypt(new Uint8Array(M),B,re);var ie=q.flush();ie?Q(ie.buffer):$(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(M),B,re)},V.softwareDecrypt=function(M,B,re){var q=this.currentIV,Q=this.currentResult,$=this.remainderData;this.logOnce("JS AES decrypt"),$&&(M=(0,k.appendUint8Array)($,M),this.remainderData=null);var ie=this.getValidChunk(M);if(!ie.length)return null;q&&(re=q);var pe=this.softwareDecrypter;pe||(pe=this.softwareDecrypter=new y),pe.expandKey(B);var Ce=Q;return this.currentResult=pe.decrypt(ie.buffer,0,re),this.currentIV=(0,A.sliceUint8)(ie,-16).buffer,Ce||null},V.webCryptoDecrypt=function(M,B,re){var q=this,Q=this.subtle;return this.key===B&&this.fastAesKey||(this.key=B,this.fastAesKey=new w(Q,B)),this.fastAesKey.expandKey().then(function($){return Q?(q.logOnce("WebCrypto AES decrypt"),new L(Q,new Uint8Array(re)).decrypt(M.buffer,$)):Promise.reject(new Error("web crypto not initialized"))}).catch(function($){return I.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+$.name+": "+$.message),q.onWebCryptoError(M,B,re)})},V.onWebCryptoError=function(M,B,re){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(M,B,re);var q=this.flush();if(q)return q.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},V.getValidChunk=function(M){var B=M,re=M.length-M.length%16;return re!==M.length&&(B=(0,A.sliceUint8)(M,0,re),this.remainderData=(0,A.sliceUint8)(M,re)),B},V.logOnce=function(M){this.logEnabled&&(I.logger.log("[decrypter]: "+M),this.logEnabled=!1)},Z}()},181:(E,S,b)=>{b.r(S),b.d(S,{canParse:()=>k,decodeFrame:()=>B,getID3Data:()=>y,getID3Frames:()=>M,getTimeStamp:()=>z,isFooter:()=>A,isHeader:()=>w,isTimeStampFrame:()=>Z,testables:()=>pe,utf8ArrayToStr:()=>ie});var L,w=function(ee,C){return C+10<=ee.length&&ee[C]===73&&ee[C+1]===68&&ee[C+2]===51&&ee[C+3]<255&&ee[C+4]<255&&ee[C+6]<128&&ee[C+7]<128&&ee[C+8]<128&&ee[C+9]<128},A=function(ee,C){return C+10<=ee.length&&ee[C]===51&&ee[C+1]===68&&ee[C+2]===73&&ee[C+3]<255&&ee[C+4]<255&&ee[C+6]<128&&ee[C+7]<128&&ee[C+8]<128&&ee[C+9]<128},y=function(ee,C){for(var W=C,F=0;w(ee,C);)F+=10,F+=I(ee,C+6),A(ee,C+10)&&(F+=10),C+=F;if(F>0)return ee.subarray(W,W+F)},I=function(ee,C){var W=0;return W=(127&ee[C])<<21,W|=(127&ee[C+1])<<14,(W|=(127&ee[C+2])<<7)|127&ee[C+3]},k=function(ee,C){return w(ee,C)&&I(ee,C+6)+10<=ee.length-C},z=function(ee){for(var C=M(ee),W=0;W<C.length;W++){var F=C[W];if(Z(F))return $(F)}},Z=function(ee){return ee&&ee.key==="PRIV"&&ee.info==="com.apple.streaming.transportStreamTimestamp"},V=function(ee){var C=String.fromCharCode(ee[0],ee[1],ee[2],ee[3]),W=I(ee,4);return{type:C,size:W,data:ee.subarray(10,10+W)}},M=function(ee){for(var C=0,W=[];w(ee,C);){for(var F=I(ee,C+6),ce=(C+=10)+F;C+8<ce;){var me=V(ee.subarray(C)),he=B(me);he&&W.push(he),C+=me.size+10}A(ee,C)&&(C+=10)}return W},B=function(ee){return ee.type==="PRIV"?re(ee):ee.type[0]==="W"?Q(ee):q(ee)},re=function(ee){if(!(ee.size<2)){var C=ie(ee.data,!0),W=new Uint8Array(ee.data.subarray(C.length+1));return{key:ee.type,info:C,data:W.buffer}}},q=function(ee){if(!(ee.size<2)){if(ee.type==="TXXX"){var C=1,W=ie(ee.data.subarray(C),!0);C+=W.length+1;var F=ie(ee.data.subarray(C));return{key:ee.type,info:W,data:F}}var ce=ie(ee.data.subarray(1));return{key:ee.type,data:ce}}},Q=function(ee){if(ee.type==="WXXX"){if(ee.size<2)return;var C=1,W=ie(ee.data.subarray(C),!0);C+=W.length+1;var F=ie(ee.data.subarray(C));return{key:ee.type,info:W,data:F}}var ce=ie(ee.data);return{key:ee.type,data:ce}},$=function(ee){if(ee.data.byteLength===8){var C=new Uint8Array(ee.data),W=1&C[3],F=(C[4]<<23)+(C[5]<<15)+(C[6]<<7)+C[7];return F/=45,W&&(F+=4772185884e-2),Math.round(F)}},ie=function(ee,C){C===void 0&&(C=!1);var W=Ce();if(W){var F=W.decode(ee);if(C){var ce=F.indexOf("\0");return ce!==-1?F.substring(0,ce):F}return F.replace(/\0/g,"")}for(var me,he,fe,Ke=ee.length,We="",Ge=0;Ge<Ke;){if((me=ee[Ge++])===0&&C)return We;if(me!==0&&me!==3)switch(me>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:We+=String.fromCharCode(me);break;case 12:case 13:he=ee[Ge++],We+=String.fromCharCode((31&me)<<6|63&he);break;case 14:he=ee[Ge++],fe=ee[Ge++],We+=String.fromCharCode((15&me)<<12|(63&he)<<6|(63&fe)<<0)}}return We},pe={decodeTextFrame:q};function Ce(){return L||self.TextDecoder===void 0||(L=new self.TextDecoder("utf-8")),L}},182:(E,S,b)=>{b.r(S),b.d(S,{default:()=>k});var L=b(544),w=b(851),A=b(93),y=b(729),I=b(973);function k(M){var B=new y.EventEmitter,re=function(q,Q){M.postMessage({event:q,data:Q})};B.on(w.Events.FRAG_DECRYPTED,re),B.on(w.Events.ERROR,re),M.addEventListener("message",function(q){var Q=q.data;switch(Q.cmd){case"init":var $=JSON.parse(Q.config);M.transmuxer=new L.default(B,Q.typeSupported,$,Q.vendor,Q.id),(0,A.enableLogs)($.debug,Q.id),function(){var ee=function(W){A.logger[W]=function(F){re("workerLog",{logType:W,message:F})}};for(var C in A.logger)ee(C)}(),re("init",null);break;case"configure":M.transmuxer.configure(Q.config);break;case"demux":var ie=M.transmuxer.push(Q.data,Q.decryptdata,Q.chunkMeta,Q.state);(0,L.isPromise)(ie)?(M.transmuxer.async=!0,ie.then(function(ee){z(M,ee)}).catch(function(ee){re(w.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:Q.chunkMeta,fatal:!1,error:ee,err:ee,reason:"transmuxer-worker push error"})})):(M.transmuxer.async=!1,z(M,ie));break;case"flush":var pe=Q.chunkMeta,Ce=M.transmuxer.flush(pe);(0,L.isPromise)(Ce)||M.transmuxer.async?((0,L.isPromise)(Ce)||(Ce=Promise.resolve(Ce)),Ce.then(function(ee){V(M,ee,pe)}).catch(function(ee){re(w.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:Q.chunkMeta,fatal:!1,error:ee,err:ee,reason:"transmuxer-worker flush error"})})):V(M,Ce,pe)}})}function z(M,B){if(!((re=B.remuxResult).audio||re.video||re.text||re.id3||re.initSegment))return!1;var re,q=[],Q=B.remuxResult,$=Q.audio,ie=Q.video;return $&&Z(q,$),ie&&Z(q,ie),M.postMessage({event:"transmuxComplete",data:B},q),!0}function Z(M,B){B.data1&&M.push(B.data1.buffer),B.data2&&M.push(B.data2.buffer)}function V(M,B,re){B.reduce(function(q,Q){return z(M,Q)||q},!1)||M.postMessage({event:"transmuxComplete",data:B[0]}),M.postMessage({event:"flush",data:re})}},544:(E,S,b)=>{b.r(S),b.d(S,{TransmuxConfig:()=>Tt,TransmuxState:()=>bt,default:()=>tt,isPromise:()=>dt});var L=b(851),w=b(973),A=b(21),y=b(965),I=b(181),k=b(856);function z(ne,K){return ne===void 0&&(ne=""),K===void 0&&(K=9e4),{type:ne,id:-1,pid:-1,inputTimeScale:K,sequenceNumber:-1,samples:[],dropped:0}}var Z=b(63),V=b(145),M=function(){function ne(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var K=ne.prototype;return K.resetInitSegment=function(D,N,U,Y){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},K.resetTimeStamp=function(D){this.initPTS=D,this.resetContiguity()},K.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},K.canParse=function(D,N){return!1},K.appendFrame=function(D,N,U){},K.demux=function(D,N){this.cachedData&&(D=(0,Z.appendUint8Array)(this.cachedData,D),this.cachedData=null);var U,Y=I.getID3Data(D,0),X=Y?Y.length:0,te=this._audioTrack,Ee=this._id3Track,Se=Y?I.getTimeStamp(Y):void 0,Ae=D.length;for((this.basePTS===null||this.frameIndex===0&&(0,y.isFiniteNumber)(Se))&&(this.basePTS=B(Se,N,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),Y&&Y.length>0&&Ee.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Y,type:k.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});X<Ae;){if(this.canParse(D,X)){var Fe=this.appendFrame(te,D,X);Fe?(this.frameIndex++,this.lastPTS=Fe.sample.pts,U=X+=Fe.length):X=Ae}else I.canParse(D,X)?(Y=I.getID3Data(D,X),Ee.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Y,type:k.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),U=X+=Y.length):X++;if(X===Ae&&U!==Ae){var qe=(0,V.sliceUint8)(D,U);this.cachedData?this.cachedData=(0,Z.appendUint8Array)(this.cachedData,qe):this.cachedData=qe}}return{audioTrack:te,videoTrack:z(),id3Track:Ee,textTrack:z()}},K.demuxSampleAes=function(D,N,U){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},K.flush=function(D){var N=this.cachedData;return N&&(this.cachedData=null,this.demux(N,0)),{audioTrack:this._audioTrack,videoTrack:z(),id3Track:this._id3Track,textTrack:z()}},K.destroy=function(){},ne}(),B=function(ne,K,D){return(0,y.isFiniteNumber)(ne)?90*ne:9e4*K+(D||0)};const re=M;var q=b(93);function Q(ne,K){return ne[K]===255&&(246&ne[K+1])==240}function $(ne,K){return 1&ne[K+1]?7:9}function ie(ne,K){return(3&ne[K+3])<<11|ne[K+4]<<3|(224&ne[K+5])>>>5}function pe(ne,K){return K+1<ne.length&&Q(ne,K)}function Ce(ne,K){if(pe(ne,K)){var D=$(ne,K);if(K+D>=ne.length)return!1;var N=ie(ne,K);if(N<=D)return!1;var U=K+N;return U===ne.length||pe(ne,U)}return!1}function ee(ne,K,D,N,U){if(!ne.samplerate){var Y=function(X,te,Ee,Se){var Ae,Fe,qe,Be,Xe=navigator.userAgent.toLowerCase(),at=Se,ht=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ae=1+((192&te[Ee+2])>>>6);var ze=(60&te[Ee+2])>>>2;if(!(ze>ht.length-1))return qe=(1&te[Ee+2])<<2,qe|=(192&te[Ee+3])>>>6,q.logger.log("manifest codec:"+Se+", ADTS type:"+Ae+", samplingIndex:"+ze),/firefox/i.test(Xe)?ze>=6?(Ae=5,Be=new Array(4),Fe=ze-3):(Ae=2,Be=new Array(2),Fe=ze):Xe.indexOf("android")!==-1?(Ae=2,Be=new Array(2),Fe=ze):(Ae=5,Be=new Array(4),Se&&(Se.indexOf("mp4a.40.29")!==-1||Se.indexOf("mp4a.40.5")!==-1)||!Se&&ze>=6?Fe=ze-3:((Se&&Se.indexOf("mp4a.40.2")!==-1&&(ze>=6&&qe===1||/vivaldi/i.test(Xe))||!Se&&qe===1)&&(Ae=2,Be=new Array(2)),Fe=ze)),Be[0]=Ae<<3,Be[0]|=(14&ze)>>1,Be[1]|=(1&ze)<<7,Be[1]|=qe<<3,Ae===5&&(Be[1]|=(14&Fe)>>1,Be[2]=(1&Fe)<<7,Be[2]|=8,Be[3]=0),{config:Be,samplerate:ht[ze],channelCount:qe,codec:"mp4a.40."+Ae,manifestCodec:at};X.trigger(L.Events.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+ze})}(K,D,N,U);if(!Y)return;ne.config=Y.config,ne.samplerate=Y.samplerate,ne.channelCount=Y.channelCount,ne.codec=Y.codec,ne.manifestCodec=Y.manifestCodec,q.logger.log("parsed codec:"+ne.codec+", rate:"+Y.samplerate+", channels:"+Y.channelCount)}}function C(ne){return 9216e4/ne}function W(ne,K,D,N,U){var Y,X=N+U*C(ne.samplerate),te=function(Xe,at){var ht=$(Xe,at);if(at+ht<=Xe.length){var ze=ie(Xe,at)-ht;if(ze>0)return{headerLength:ht,frameLength:ze}}}(K,D);if(te){var Ee=te.frameLength,Se=te.headerLength,Ae=Se+Ee,Fe=Math.max(0,D+Ae-K.length);Fe?(Y=new Uint8Array(Ae-Se)).set(K.subarray(D+Se,K.length),0):Y=K.subarray(D+Se,D+Ae);var qe={unit:Y,pts:X};return Fe||ne.samples.push(qe),{sample:qe,length:Ae,missing:Fe}}var Be=K.length-D;return(Y=new Uint8Array(Be)).set(K.subarray(D,K.length),0),{sample:{unit:Y,pts:X},length:Be,missing:-1}}function F(ne,K){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,N){return D.__proto__=N,D},F(ne,K)}const ce=function(ne){var K,D;function N(Y,X){var te;return(te=ne.call(this)||this).observer=void 0,te.config=void 0,te.observer=Y,te.config=X,te}D=ne,(K=N).prototype=Object.create(D.prototype),K.prototype.constructor=K,F(K,D);var U=N.prototype;return U.resetInitSegment=function(Y,X,te,Ee){ne.prototype.resetInitSegment.call(this,Y,X,te,Ee),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:X,duration:Ee,inputTimeScale:9e4,dropped:0}},N.probe=function(Y){if(!Y)return!1;for(var X=(I.getID3Data(Y,0)||[]).length,te=Y.length;X<te;X++)if(Ce(Y,X))return q.logger.log("ADTS sync word found !"),!0;return!1},U.canParse=function(Y,X){return function(te,Ee){return function(Se,Ae){return Ae+5<Se.length}(te,Ee)&&Q(te,Ee)&&ie(te,Ee)<=te.length-Ee}(Y,X)},U.appendFrame=function(Y,X,te){ee(Y,this.observer,X,te,Y.manifestCodec);var Ee=W(Y,X,te,this.basePTS,this.frameIndex);if(Ee&&Ee.missing===0)return Ee},N}(re);var me=/\/emsg[-/]ID3/i;const he=function(){function ne(D,N){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=N}var K=ne.prototype;return K.resetTimeStamp=function(){},K.resetInitSegment=function(D,N,U,Y){var X=this.videoTrack=z("video",1),te=this.audioTrack=z("audio",1),Ee=this.txtTrack=z("text",1);if(this.id3Track=z("id3",1),this.timeOffset=0,D&&D.byteLength){var Se=(0,Z.parseInitSegment)(D);if(Se.video){var Ae=Se.video,Fe=Ae.id,qe=Ae.timescale,Be=Ae.codec;X.id=Fe,X.timescale=Ee.timescale=qe,X.codec=Be}if(Se.audio){var Xe=Se.audio,at=Xe.id,ht=Xe.timescale,ze=Xe.codec;te.id=at,te.timescale=ht,te.codec=ze}Ee.id=Z.RemuxerTrackIdConfig.text,X.sampleDuration=0,X.duration=te.duration=Y}},K.resetContiguity=function(){},ne.probe=function(D){return D=D.length>16384?D.subarray(0,16384):D,(0,Z.findBox)(D,["moof"]).length>0},K.demux=function(D,N){this.timeOffset=N;var U=D,Y=this.videoTrack,X=this.txtTrack;if(this.config.progressive){this.remainderData&&(U=(0,Z.appendUint8Array)(this.remainderData,D));var te=(0,Z.segmentValidRange)(U);this.remainderData=te.remainder,Y.samples=te.valid||new Uint8Array}else Y.samples=U;var Ee=this.extractID3Track(Y,N);return X.samples=(0,Z.parseSamples)(N,Y),{videoTrack:Y,audioTrack:this.audioTrack,id3Track:Ee,textTrack:this.txtTrack}},K.flush=function(){var D=this.timeOffset,N=this.videoTrack,U=this.txtTrack;N.samples=this.remainderData||new Uint8Array,this.remainderData=null;var Y=this.extractID3Track(N,this.timeOffset);return U.samples=(0,Z.parseSamples)(D,N),{videoTrack:N,audioTrack:z(),id3Track:Y,textTrack:z()}},K.extractID3Track=function(D,N){var U=this.id3Track;if(D.samples.length){var Y=(0,Z.findBox)(D.samples,["emsg"]);Y&&Y.forEach(function(X){var te=(0,Z.parseEmsg)(X);if(me.test(te.schemeIdUri)){var Ee=(0,y.isFiniteNumber)(te.presentationTime)?te.presentationTime/te.timeScale:N+te.presentationTimeDelta/te.timeScale,Se=te.eventDuration===4294967295?Number.POSITIVE_INFINITY:te.eventDuration/te.timeScale;Se<=.001&&(Se=Number.POSITIVE_INFINITY);var Ae=te.payload;U.samples.push({data:Ae,len:Ae.byteLength,dts:Ee,pts:Ee,type:k.MetadataSchema.emsg,duration:Se})}})}return U},K.demuxSampleAes=function(D,N,U){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},K.destroy=function(){},ne}();var fe=null,Ke=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],We=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ge=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ue=[0,1,1,4];function Ze(ne,K,D,N,U){if(!(D+24>K.length)){var Y=ft(K,D);if(Y&&D+Y.frameLength<=K.length){var X=N+U*(9e4*Y.samplesPerFrame/Y.sampleRate),te={unit:K.subarray(D,D+Y.frameLength),pts:X,dts:X};return ne.config=[],ne.channelCount=Y.channelCount,ne.samplerate=Y.sampleRate,ne.samples.push(te),{sample:te,length:Y.frameLength,missing:0}}}}function ft(ne,K){var D=ne[K+1]>>3&3,N=ne[K+1]>>1&3,U=ne[K+2]>>4&15,Y=ne[K+2]>>2&3;if(D!==1&&U!==0&&U!==15&&Y!==3){var X=ne[K+2]>>1&1,te=ne[K+3]>>6,Ee=1e3*Ke[14*(D===3?3-N:N===3?3:4)+U-1],Se=We[3*(D===3?0:D===2?1:2)+Y],Ae=te===3?1:2,Fe=Ge[D][N],qe=Ue[N],Be=8*Fe*qe,Xe=Math.floor(Fe*Ee/Se+X)*qe;if(fe===null){var at=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);fe=at?parseInt(at[1]):0}return fe&&fe<=87&&N===2&&Ee>=224e3&&te===0&&(ne[K+3]=128|ne[K+3]),{sampleRate:Se,channelCount:Ae,frameLength:Xe,samplesPerFrame:Be}}}function ue(ne,K){return ne[K]===255&&(224&ne[K+1])==224&&(6&ne[K+1])!=0}function ge(ne,K){return K+1<ne.length&&ue(ne,K)}function ae(ne,K){if(K+1<ne.length&&ue(ne,K)){var D=ft(ne,K),N=4;D!=null&&D.frameLength&&(N=D.frameLength);var U=K+N;return U===ne.length||ge(ne,U)}return!1}const we=function(){function ne(D){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=D,this.bytesAvailable=D.byteLength,this.word=0,this.bitsAvailable=0}var K=ne.prototype;return K.loadWord=function(){var D=this.data,N=this.bytesAvailable,U=D.byteLength-N,Y=new Uint8Array(4),X=Math.min(4,N);if(X===0)throw new Error("no bytes available");Y.set(D.subarray(U,U+X)),this.word=new DataView(Y.buffer).getUint32(0),this.bitsAvailable=8*X,this.bytesAvailable-=X},K.skipBits=function(D){var N;D=Math.min(D,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>D?(this.word<<=D,this.bitsAvailable-=D):(D-=this.bitsAvailable,D-=(N=D>>3)<<3,this.bytesAvailable-=N,this.loadWord(),this.word<<=D,this.bitsAvailable-=D)},K.readBits=function(D){var N=Math.min(this.bitsAvailable,D),U=this.word>>>32-N;if(D>32&&q.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=N,this.bitsAvailable>0)this.word<<=N;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(N=D-N)>0&&this.bitsAvailable?U<<N|this.readBits(N):U},K.skipLZ=function(){var D;for(D=0;D<this.bitsAvailable;++D)if(this.word&2147483648>>>D)return this.word<<=D,this.bitsAvailable-=D,D;return this.loadWord(),D+this.skipLZ()},K.skipUEG=function(){this.skipBits(1+this.skipLZ())},K.skipEG=function(){this.skipBits(1+this.skipLZ())},K.readUEG=function(){var D=this.skipLZ();return this.readBits(D+1)-1},K.readEG=function(){var D=this.readUEG();return 1&D?1+D>>>1:-1*(D>>>1)},K.readBoolean=function(){return this.readBits(1)===1},K.readUByte=function(){return this.readBits(8)},K.readUShort=function(){return this.readBits(16)},K.readUInt=function(){return this.readBits(32)},K.skipScalingList=function(D){for(var N=8,U=8,Y=0;Y<D;Y++)U!==0&&(U=(N+this.readEG()+256)%256),N=U===0?N:U},K.readSPS=function(){var D,N,U,Y=0,X=0,te=0,Ee=0,Se=this.readUByte.bind(this),Ae=this.readBits.bind(this),Fe=this.readUEG.bind(this),qe=this.readBoolean.bind(this),Be=this.skipBits.bind(this),Xe=this.skipEG.bind(this),at=this.skipUEG.bind(this),ht=this.skipScalingList.bind(this);Se();var ze=Se();if(Ae(5),Be(3),Se(),at(),ze===100||ze===110||ze===122||ze===244||ze===44||ze===83||ze===86||ze===118||ze===128){var vt=Fe();if(vt===3&&Be(1),at(),at(),Be(1),qe())for(N=vt!==3?8:12,U=0;U<N;U++)qe()&&ht(U<6?16:64)}at();var Ot=Fe();if(Ot===0)Fe();else if(Ot===1)for(Be(1),Xe(),Xe(),D=Fe(),U=0;U<D;U++)Xe();at(),Be(1);var yt=Fe(),Ft=Fe(),Rt=Ae(1);Rt===0&&Be(1),Be(1),qe()&&(Y=Fe(),X=Fe(),te=Fe(),Ee=Fe());var Qe=[1,1];if(qe()&&qe())switch(Se()){case 1:Qe=[1,1];break;case 2:Qe=[12,11];break;case 3:Qe=[10,11];break;case 4:Qe=[16,11];break;case 5:Qe=[40,33];break;case 6:Qe=[24,11];break;case 7:Qe=[20,11];break;case 8:Qe=[32,11];break;case 9:Qe=[80,33];break;case 10:Qe=[18,11];break;case 11:Qe=[15,11];break;case 12:Qe=[64,33];break;case 13:Qe=[160,99];break;case 14:Qe=[4,3];break;case 15:Qe=[3,2];break;case 16:Qe=[2,1];break;case 255:Qe=[Se()<<8|Se(),Se()<<8|Se()]}return{width:Math.ceil(16*(yt+1)-2*Y-2*X),height:(2-Rt)*(Ft+1)*16-(Rt?2:4)*(te+Ee),pixelRatio:Qe}},K.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},ne}(),ke=function(){function ne(D,N,U){this.keyData=void 0,this.decrypter=void 0,this.keyData=U,this.decrypter=new A.default(N,{removePKCS7Padding:!1})}var K=ne.prototype;return K.decryptBuffer=function(D){return this.decrypter.decrypt(D,this.keyData.key.buffer,this.keyData.iv.buffer)},K.decryptAacSample=function(D,N,U){var Y=this,X=D[N].unit;if(!(X.length<=16)){var te=X.subarray(16,X.length-X.length%16),Ee=te.buffer.slice(te.byteOffset,te.byteOffset+te.length);this.decryptBuffer(Ee).then(function(Se){var Ae=new Uint8Array(Se);X.set(Ae,16),Y.decrypter.isSync()||Y.decryptAacSamples(D,N+1,U)})}},K.decryptAacSamples=function(D,N,U){for(;;N++){if(N>=D.length)return void U();if(!(D[N].unit.length<32||(this.decryptAacSample(D,N,U),this.decrypter.isSync())))return}},K.getAvcEncryptedData=function(D){for(var N=16*Math.floor((D.length-48)/160)+16,U=new Int8Array(N),Y=0,X=32;X<D.length-16;X+=160,Y+=16)U.set(D.subarray(X,X+16),Y);return U},K.getAvcDecryptedUnit=function(D,N){for(var U=new Uint8Array(N),Y=0,X=32;X<D.length-16;X+=160,Y+=16)D.set(U.subarray(Y,Y+16),X);return D},K.decryptAvcSample=function(D,N,U,Y,X){var te=this,Ee=(0,Z.discardEPB)(X.data),Se=this.getAvcEncryptedData(Ee);this.decryptBuffer(Se.buffer).then(function(Ae){X.data=te.getAvcDecryptedUnit(Ee,Ae),te.decrypter.isSync()||te.decryptAvcSamples(D,N,U+1,Y)})},K.decryptAvcSamples=function(D,N,U,Y){if(D instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;N++,U=0){if(N>=D.length)return void Y();for(var X=D[N].units;!(U>=X.length);U++){var te=X[U];if(!(te.data.length<=48||te.type!==1&&te.type!==5||(this.decryptAvcSample(D,N,U,Y,te),this.decrypter.isSync())))return}}},ne}();function Pe(){return Pe=Object.assign?Object.assign.bind():function(ne){for(var K=1;K<arguments.length;K++){var D=arguments[K];for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(ne[N]=D[N])}return ne},Pe.apply(this,arguments)}var xe=188;function P(ne,K,D,N){return{key:ne,frame:!1,pts:K,dts:D,units:[],debug:N,length:0}}function H(ne,K){return((31&ne[K+1])<<8)+ne[K+2]}function O(ne,K){return(31&ne[K+10])<<8|ne[K+11]}function se(ne,K,D,N){var U={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},Y=K+3+((15&ne[K+1])<<8|ne[K+2])-4;for(K+=12+((15&ne[K+10])<<8|ne[K+11]);K<Y;){var X=H(ne,K);switch(ne[K]){case 207:if(!N){q.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:U.audio===-1&&(U.audio=X);break;case 21:U.id3===-1&&(U.id3=X);break;case 219:if(!N){q.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:U.avc===-1&&(U.avc=X);break;case 3:case 4:D.mpeg!==!0&&D.mp3!==!0?q.logger.log("MPEG audio found, not supported in this browser"):U.audio===-1&&(U.audio=X,U.segmentCodec="mp3");break;case 36:q.logger.warn("Unsupported HEVC stream type found")}K+=5+((15&ne[K+3])<<8|ne[K+4])}return U}function le(ne){var K,D,N,U,Y,X=0,te=ne.data;if(!ne||ne.size===0)return null;for(;te[0].length<19&&te.length>1;){var Ee=new Uint8Array(te[0].length+te[1].length);Ee.set(te[0]),Ee.set(te[1],te[0].length),te[0]=Ee,te.splice(1,1)}if(((K=te[0])[0]<<16)+(K[1]<<8)+K[2]===1){if((D=(K[4]<<8)+K[5])&&D>ne.size-6)return null;var Se=K[7];192&Se&&(U=536870912*(14&K[9])+4194304*(255&K[10])+16384*(254&K[11])+128*(255&K[12])+(254&K[13])/2,64&Se?U-(Y=536870912*(14&K[14])+4194304*(255&K[15])+16384*(254&K[16])+128*(255&K[17])+(254&K[18])/2)>54e5&&(q.logger.warn(Math.round((U-Y)/9e4)+"s delta between PTS and DTS, align them"),U=Y):Y=U);var Ae=(N=K[8])+9;if(ne.size<=Ae)return null;ne.size-=Ae;for(var Fe=new Uint8Array(ne.size),qe=0,Be=te.length;qe<Be;qe++){var Xe=(K=te[qe]).byteLength;if(Ae){if(Ae>Xe){Ae-=Xe;continue}K=K.subarray(Ae),Xe-=Ae,Ae=0}Fe.set(K,X),X+=Xe}return D&&(D-=N+3),{data:Fe,pts:U,dts:Y,len:D}}return null}function Te(ne,K){if(ne.units.length&&ne.frame){if(ne.pts===void 0){var D=K.samples,N=D.length;if(!N)return void K.dropped++;var U=D[N-1];ne.pts=U.pts,ne.dts=U.dts}K.samples.push(ne)}ne.debug.length&&q.logger.log(ne.pts+"/"+ne.dts+":"+ne.debug)}const De=function(){function ne(D,N,U){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=D,this.config=N,this.typeSupported=U}ne.probe=function(D){var N=ne.syncOffset(D);return N>0&&q.logger.warn("MPEG2-TS detected but first sync word found @ offset "+N),N!==-1},ne.syncOffset=function(D){for(var N=D.length,U=Math.min(940,D.length-xe)+1,Y=0;Y<U;){for(var X=!1,te=Y;te<N&&D[te]===71;te+=xe)if(X||H(D,te)!==0||(X=!0),X&&te+xe>U)return Y;Y++}return-1},ne.createTrack=function(D,N){return{container:D==="video"||D==="audio"?"video/mp2t":void 0,type:D,id:Z.RemuxerTrackIdConfig[D],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:D==="audio"?N:void 0}};var K=ne.prototype;return K.resetInitSegment=function(D,N,U,Y){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=ne.createTrack("video"),this._audioTrack=ne.createTrack("audio",Y),this._id3Track=ne.createTrack("id3"),this._txtTrack=ne.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=N,this.videoCodec=U,this._duration=Y},K.resetTimeStamp=function(){},K.resetContiguity=function(){var D=this._audioTrack,N=this._avcTrack,U=this._id3Track;D&&(D.pesData=null),N&&(N.pesData=null),U&&(U.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},K.demux=function(D,N,U,Y){var X;U===void 0&&(U=!1),Y===void 0&&(Y=!1),U||(this.sampleAes=null);var te=this._avcTrack,Ee=this._audioTrack,Se=this._id3Track,Ae=this._txtTrack,Fe=te.pid,qe=te.pesData,Be=Ee.pid,Xe=Se.pid,at=Ee.pesData,ht=Se.pesData,ze=null,vt=this.pmtParsed,Ot=this._pmtId,yt=D.length;if(this.remainderData&&(yt=(D=(0,Z.appendUint8Array)(this.remainderData,D)).length,this.remainderData=null),yt<xe&&!Y)return this.remainderData=D,{audioTrack:Ee,videoTrack:te,id3Track:Se,textTrack:Ae};var Ft=Math.max(0,ne.syncOffset(D));(yt-=(yt-Ft)%xe)<D.byteLength&&!Y&&(this.remainderData=new Uint8Array(D.buffer,yt,D.buffer.byteLength-yt));for(var Rt=0,Qe=Ft;Qe<yt;Qe+=xe)if(D[Qe]===71){var Kt=!!(64&D[Qe+1]),ar=H(D,Qe),St=void 0;if((48&D[Qe+3])>>4>1){if((St=Qe+5+D[Qe+4])===Qe+xe)continue}else St=Qe+4;switch(ar){case Fe:Kt&&(qe&&(X=le(qe))&&this.parseAVCPES(te,Ae,X,!1),qe={data:[],size:0}),qe&&(qe.data.push(D.subarray(St,Qe+xe)),qe.size+=Qe+xe-St);break;case Be:if(Kt){if(at&&(X=le(at)))switch(Ee.segmentCodec){case"aac":this.parseAACPES(Ee,X);break;case"mp3":this.parseMPEGPES(Ee,X)}at={data:[],size:0}}at&&(at.data.push(D.subarray(St,Qe+xe)),at.size+=Qe+xe-St);break;case Xe:Kt&&(ht&&(X=le(ht))&&this.parseID3PES(Se,X),ht={data:[],size:0}),ht&&(ht.data.push(D.subarray(St,Qe+xe)),ht.size+=Qe+xe-St);break;case 0:Kt&&(St+=D[St]+1),Ot=this._pmtId=O(D,St);break;case Ot:Kt&&(St+=D[St]+1);var Mt=se(D,St,this.typeSupported,U);(Fe=Mt.avc)>0&&(te.pid=Fe),(Be=Mt.audio)>0&&(Ee.pid=Be,Ee.segmentCodec=Mt.segmentCodec),(Xe=Mt.id3)>0&&(Se.pid=Xe),ze===null||vt||(q.logger.warn("MPEG-TS PMT found at "+Qe+" after unknown PID '"+ze+"'. Backtracking to sync byte @"+Ft+" to parse all TS packets."),ze=null,Qe=Ft-188),vt=this.pmtParsed=!0;break;case 17:case 8191:break;default:ze=ar}}else Rt++;Rt>0&&this.observer.emit(L.Events.ERROR,L.Events.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+Rt+" TS packet/s that do not start with 0x47"}),te.pesData=qe,Ee.pesData=at,Se.pesData=ht;var or={audioTrack:Ee,videoTrack:te,id3Track:Se,textTrack:Ae};return Y&&this.extractRemainingSamples(or),or},K.flush=function(){var D,N=this.remainderData;return this.remainderData=null,D=N?this.demux(N,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(D),this.sampleAes?this.decrypt(D,this.sampleAes):D},K.extractRemainingSamples=function(D){var N,U=D.audioTrack,Y=D.videoTrack,X=D.id3Track,te=D.textTrack,Ee=Y.pesData,Se=U.pesData,Ae=X.pesData;if(Ee&&(N=le(Ee))?(this.parseAVCPES(Y,te,N,!0),Y.pesData=null):Y.pesData=Ee,Se&&(N=le(Se))){switch(U.segmentCodec){case"aac":this.parseAACPES(U,N);break;case"mp3":this.parseMPEGPES(U,N)}U.pesData=null}else Se!=null&&Se.size&&q.logger.log("last AAC PES packet truncated,might overlap between fragments"),U.pesData=Se;Ae&&(N=le(Ae))?(this.parseID3PES(X,N),X.pesData=null):X.pesData=Ae},K.demuxSampleAes=function(D,N,U){var Y=this.demux(D,U,!0,!this.config.progressive),X=this.sampleAes=new ke(this.observer,this.config,N);return this.decrypt(Y,X)},K.decrypt=function(D,N){return new Promise(function(U){var Y=D.audioTrack,X=D.videoTrack;Y.samples&&Y.segmentCodec==="aac"?N.decryptAacSamples(Y.samples,0,function(){X.samples?N.decryptAvcSamples(X.samples,0,0,function(){U(D)}):U(D)}):X.samples&&N.decryptAvcSamples(X.samples,0,0,function(){U(D)})})},K.destroy=function(){this._duration=0},K.parseAVCPES=function(D,N,U,Y){var X,te=this,Ee=this.parseAVCNALu(D,U.data),Se=this.avcSample,Ae=!1;U.data=null,Se&&Ee.length&&!D.audFound&&(Te(Se,D),Se=this.avcSample=P(!1,U.pts,U.dts,"")),Ee.forEach(function(Fe){switch(Fe.type){case 1:X=!0,Se||(Se=te.avcSample=P(!0,U.pts,U.dts,"")),Se.frame=!0;var qe=Fe.data;if(Ae&&qe.length>4){var Be=new we(qe).readSliceType();Be!==2&&Be!==4&&Be!==7&&Be!==9||(Se.key=!0)}break;case 5:X=!0,Se||(Se=te.avcSample=P(!0,U.pts,U.dts,"")),Se.key=!0,Se.frame=!0;break;case 6:X=!0,(0,Z.parseSEIMessageFromNALu)(Fe.data,1,U.pts,N.samples);break;case 7:if(X=!0,Ae=!0,!D.sps){var Xe=new we(Fe.data).readSPS();D.width=Xe.width,D.height=Xe.height,D.pixelRatio=Xe.pixelRatio,D.sps=[Fe.data],D.duration=te._duration;for(var at=Fe.data.subarray(1,4),ht="avc1.",ze=0;ze<3;ze++){var vt=at[ze].toString(16);vt.length<2&&(vt="0"+vt),ht+=vt}D.codec=ht}break;case 8:X=!0,D.pps||(D.pps=[Fe.data]);break;case 9:X=!1,D.audFound=!0,Se&&Te(Se,D),Se=te.avcSample=P(!1,U.pts,U.dts,"");break;case 12:X=!0;break;default:X=!1,Se&&(Se.debug+="unknown NAL "+Fe.type+" ")}Se&&X&&Se.units.push(Fe)}),Y&&Se&&(Te(Se,D),this.avcSample=null)},K.getLastNalUnit=function(D){var N,U,Y=this.avcSample;if(Y&&Y.units.length!==0||(Y=D[D.length-1]),(N=Y)!==null&&N!==void 0&&N.units){var X=Y.units;U=X[X.length-1]}return U},K.parseAVCNALu=function(D,N){var U,Y,X=N.byteLength,te=D.naluState||0,Ee=te,Se=[],Ae=0,Fe=-1,qe=0;for(te===-1&&(Fe=0,qe=31&N[0],te=0,Ae=1);Ae<X;)if(U=N[Ae++],te)if(te!==1)if(U)if(U===1){if(Fe>=0){var Be={data:N.subarray(Fe,Ae-te-1),type:qe};Se.push(Be)}else{var Xe=this.getLastNalUnit(D.samples);if(Xe&&(Ee&&Ae<=4-Ee&&Xe.state&&(Xe.data=Xe.data.subarray(0,Xe.data.byteLength-Ee)),(Y=Ae-te-1)>0)){var at=new Uint8Array(Xe.data.byteLength+Y);at.set(Xe.data,0),at.set(N.subarray(0,Y),Xe.data.byteLength),Xe.data=at,Xe.state=0}}Ae<X?(Fe=Ae,qe=31&N[Ae],te=0):te=-1}else te=0;else te=3;else te=U?0:2;else te=U?0:1;if(Fe>=0&&te>=0){var ht={data:N.subarray(Fe,X),type:qe,state:te};Se.push(ht)}if(Se.length===0){var ze=this.getLastNalUnit(D.samples);if(ze){var vt=new Uint8Array(ze.data.byteLength+N.byteLength);vt.set(ze.data,0),vt.set(N,ze.data.byteLength),ze.data=vt}}return D.naluState=te,Se},K.parseAACPES=function(D,N){var U,Y,X,te,Ee,Se=0,Ae=this.aacOverFlow,Fe=N.data;if(Ae){this.aacOverFlow=null;var qe=Ae.missing,Be=Ae.sample.unit.byteLength;if(qe===-1){var Xe=new Uint8Array(Be+Fe.byteLength);Xe.set(Ae.sample.unit,0),Xe.set(Fe,Be),Fe=Xe}else{var at=Be-qe;Ae.sample.unit.set(Fe.subarray(0,qe),at),D.samples.push(Ae.sample),Se=Ae.missing}}for(U=Se,Y=Fe.length;U<Y-1&&!pe(Fe,U);U++);if(U===Se||(U<Y-1?(X="AAC PES did not start with ADTS header,offset:"+U,te=!1):(X="no ADTS header found in AAC PES",te=!0),q.logger.warn("parsing error:"+X),this.observer.emit(L.Events.ERROR,L.Events.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:te,reason:X}),!te)){if(ee(D,this.observer,Fe,U,this.audioCodec),N.pts!==void 0)Ee=N.pts;else{if(!Ae)return void q.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var ht=C(D.samplerate);Ee=Ae.sample.pts+ht}for(var ze,vt=0;U<Y;){if(U+=(ze=W(D,Fe,U,Ee,vt)).length,ze.missing){this.aacOverFlow=ze;break}for(vt++;U<Y-1&&!pe(Fe,U);U++);}}},K.parseMPEGPES=function(D,N){var U=N.data,Y=U.length,X=0,te=0,Ee=N.pts;if(Ee!==void 0)for(;te<Y;)if(ge(U,te)){var Se=Ze(D,U,te,Ee,X);if(!Se)break;te+=Se.length,X++}else te++;else q.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},K.parseID3PES=function(D,N){if(N.pts!==void 0){var U=Pe({},N,{type:this._avcTrack?k.MetadataSchema.emsg:k.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});D.samples.push(U)}else q.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},ne}();function _e(ne,K){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,N){return D.__proto__=N,D},_e(ne,K)}const Re=function(ne){var K,D;function N(){return ne.apply(this,arguments)||this}D=ne,(K=N).prototype=Object.create(D.prototype),K.prototype.constructor=K,_e(K,D);var U=N.prototype;return U.resetInitSegment=function(Y,X,te,Ee){ne.prototype.resetInitSegment.call(this,Y,X,te,Ee),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:X,duration:Ee,inputTimeScale:9e4,dropped:0}},N.probe=function(Y){if(!Y)return!1;for(var X=(I.getID3Data(Y,0)||[]).length,te=Y.length;X<te;X++)if(ae(Y,X))return q.logger.log("MPEG Audio sync word found !"),!0;return!1},U.canParse=function(Y,X){return function(te,Ee){return ue(te,Ee)&&4<=te.length-Ee}(Y,X)},U.appendFrame=function(Y,X,te){if(this.basePTS!==null)return Ze(Y,X,te,this.basePTS,this.frameIndex)},N}(re);var ye=b(524),Me=b(923);function Ie(ne,K){var D=ne==null?void 0:ne.codec;return D&&D.length>4?D:D==="hvc1"||D==="hev1"?"hvc1.1.c.L120.90":D==="av01"?"av01.0.04M.08":D==="avc1"||K===Me.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const Ne=function(){function ne(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var K=ne.prototype;return K.destroy=function(){},K.resetTimeStamp=function(D){this.initPTS=D,this.lastEndTime=null},K.resetNextTimestamp=function(){this.lastEndTime=null},K.resetInitSegment=function(D,N,U,Y){this.audioCodec=N,this.videoCodec=U,this.generateInitSegment((0,Z.patchEncyptionData)(D,Y)),this.emitInitSegment=!0},K.generateInitSegment=function(D){var N=this.audioCodec,U=this.videoCodec;if(!D||!D.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var Y=this.initData=(0,Z.parseInitSegment)(D);N||(N=Ie(Y.audio,Me.ElementaryStreamTypes.AUDIO)),U||(U=Ie(Y.video,Me.ElementaryStreamTypes.VIDEO));var X={};Y.audio&&Y.video?X.audiovideo={container:"video/mp4",codec:N+","+U,initSegment:D,id:"main"}:Y.audio?X.audio={container:"audio/mp4",codec:N,initSegment:D,id:"audio"}:Y.video?X.video={container:"video/mp4",codec:U,initSegment:D,id:"main"}:q.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=X},K.remux=function(D,N,U,Y,X){var te,Ee=this.initPTS,Se=this.lastEndTime,Ae={audio:void 0,video:void 0,text:Y,id3:U,initSegment:void 0};(0,y.isFiniteNumber)(Se)||(Se=this.lastEndTime=X||0);var Fe=N.samples;if(!Fe||!Fe.length)return Ae;var qe={initPTS:void 0,timescale:1},Be=this.initData;if(Be&&Be.length||(this.generateInitSegment(Fe),Be=this.initData),!Be||!Be.length)return q.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),Ae;this.emitInitSegment&&(qe.tracks=this.initTracks,this.emitInitSegment=!1);var Xe=(0,Z.getStartDTS)(Be,Fe);(0,y.isFiniteNumber)(Ee)||(this.initPTS=qe.initPTS=Ee=Xe-X);var at=(0,Z.getDuration)(Fe,Be),ht=D?Xe-Ee:Se,ze=ht+at;(0,Z.offsetStartDTS)(Be,Fe,Ee),at>0?this.lastEndTime=ze:(q.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var vt=!!Be.audio,Ot=!!Be.video,yt="";vt&&(yt+="audio"),Ot&&(yt+="video");var Ft={data1:Fe,startPTS:ht,startDTS:ht,endPTS:ze,endDTS:ze,type:yt,hasAudio:vt,hasVideo:Ot,nb:1,dropped:0};Ae.audio=Ft.type==="audio"?Ft:void 0,Ae.video=Ft.type!=="audio"?Ft:void 0,Ae.initSegment=qe;var Rt=(te=this.initPTS)!=null?te:0;return Ae.id3=(0,ye.flushTextTrackMetadataCueSamples)(U,X,Rt,Rt),Y.samples.length&&(Ae.text=(0,ye.flushTextTrackUserdataCueSamples)(Y,X,Rt)),Ae},ne}();var Ve;try{Ve=self.performance.now.bind(self.performance)}catch{q.logger.debug("Unable to use Performance API on this environment"),Ve=self.Date.now}var $e=[{demux:he,remux:Ne},{demux:De,remux:ye.default},{demux:ce,remux:ye.default},{demux:Re,remux:ye.default}],tt=function(){function ne(D,N,U,Y,X){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=D,this.typeSupported=N,this.config=U,this.vendor=Y,this.id=X}var K=ne.prototype;return K.configure=function(D){this.transmuxConfig=D,this.decrypter&&this.decrypter.reset()},K.push=function(D,N,U,Y){var X=this,te=U.transmuxing;te.executeStart=Ve();var Ee=new Uint8Array(D),Se=this.currentTransmuxState,Ae=this.transmuxConfig;Y&&(this.currentTransmuxState=Y);var Fe=Y||Se,qe=Fe.contiguous,Be=Fe.discontinuity,Xe=Fe.trackSwitch,at=Fe.accurateTimeOffset,ht=Fe.timeOffset,ze=Fe.initSegmentChange,vt=Ae.audioCodec,Ot=Ae.videoCodec,yt=Ae.defaultInitPts,Ft=Ae.duration,Rt=Ae.initSegmentData,Qe=function(Nr,gr){var _t=null;return Nr.byteLength>0&&gr!=null&&gr.key!=null&&gr.iv!==null&&gr.method!=null&&(_t=gr),_t}(Ee,N);if(Qe&&Qe.method==="AES-128"){var Kt=this.getDecrypter();if(!Kt.isSync())return this.decryptionPromise=Kt.webCryptoDecrypt(Ee,Qe.key.buffer,Qe.iv.buffer).then(function(Nr){var gr=X.push(Nr,null,U);return X.decryptionPromise=null,gr}),this.decryptionPromise;var ar=Kt.softwareDecrypt(Ee,Qe.key.buffer,Qe.iv.buffer);if(U.part>-1&&(ar=Kt.flush()),!ar)return te.executeEnd=Ve(),et(U);Ee=new Uint8Array(ar)}var St=this.needsProbing(Be,Xe);St&&this.configureTransmuxer(Ee),(Be||Xe||ze||St)&&this.resetInitSegment(Rt,vt,Ot,Ft,N),(Be||ze||St)&&this.resetInitialTimestamp(yt),qe||this.resetContiguity();var Mt=this.transmux(Ee,Qe,ht,at,U),or=this.currentTransmuxState;return or.contiguous=!0,or.discontinuity=!1,or.trackSwitch=!1,te.executeEnd=Ve(),Mt},K.flush=function(D){var N=this,U=D.transmuxing;U.executeStart=Ve();var Y=this.decrypter,X=this.currentTransmuxState,te=this.decryptionPromise;if(te)return te.then(function(){return N.flush(D)});var Ee=[],Se=X.timeOffset;if(Y){var Ae=Y.flush();Ae&&Ee.push(this.push(Ae,null,D))}var Fe=this.demuxer,qe=this.remuxer;if(!Fe||!qe)return this.observer.emit(L.Events.ERROR,L.Events.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),U.executeEnd=Ve(),[et(D)];var Be=Fe.flush(Se);return dt(Be)?Be.then(function(Xe){return N.flushRemux(Ee,Xe,D),Ee}):(this.flushRemux(Ee,Be,D),Ee)},K.flushRemux=function(D,N,U){var Y=N.audioTrack,X=N.videoTrack,te=N.id3Track,Ee=N.textTrack,Se=this.currentTransmuxState,Ae=Se.accurateTimeOffset,Fe=Se.timeOffset;q.logger.log("[transmuxer.ts]: Flushed fragment "+U.sn+(U.part>-1?" p: "+U.part:"")+" of level "+U.level);var qe=this.remuxer.remux(Y,X,te,Ee,Fe,Ae,!0,this.id);D.push({remuxResult:qe,chunkMeta:U}),U.transmuxing.executeEnd=Ve()},K.resetInitialTimestamp=function(D){var N=this.demuxer,U=this.remuxer;N&&U&&(N.resetTimeStamp(D),U.resetTimeStamp(D))},K.resetContiguity=function(){var D=this.demuxer,N=this.remuxer;D&&N&&(D.resetContiguity(),N.resetNextTimestamp())},K.resetInitSegment=function(D,N,U,Y,X){var te=this.demuxer,Ee=this.remuxer;te&&Ee&&(te.resetInitSegment(D,N,U,Y),Ee.resetInitSegment(D,N,U,X))},K.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},K.transmux=function(D,N,U,Y,X){return N&&N.method==="SAMPLE-AES"?this.transmuxSampleAes(D,N,U,Y,X):this.transmuxUnencrypted(D,U,Y,X)},K.transmuxUnencrypted=function(D,N,U,Y){var X=this.demuxer.demux(D,N,!1,!this.config.progressive),te=X.audioTrack,Ee=X.videoTrack,Se=X.id3Track,Ae=X.textTrack;return{remuxResult:this.remuxer.remux(te,Ee,Se,Ae,N,U,!1,this.id),chunkMeta:Y}},K.transmuxSampleAes=function(D,N,U,Y,X){var te=this;return this.demuxer.demuxSampleAes(D,N,U).then(function(Ee){return{remuxResult:te.remuxer.remux(Ee.audioTrack,Ee.videoTrack,Ee.id3Track,Ee.textTrack,U,Y,!1,te.id),chunkMeta:X}})},K.configureTransmuxer=function(D){for(var N,U=this.config,Y=this.observer,X=this.typeSupported,te=this.vendor,Ee=0,Se=$e.length;Ee<Se;Ee++)if($e[Ee].demux.probe(D)){N=$e[Ee];break}N||(q.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),N={demux:he,remux:Ne});var Ae=this.demuxer,Fe=this.remuxer,qe=N.remux,Be=N.demux;Fe&&Fe instanceof qe||(this.remuxer=new qe(Y,U,X,te)),Ae&&Ae instanceof Be||(this.demuxer=new Be(Y,U,X),this.probe=Be.probe)},K.needsProbing=function(D,N){return!this.demuxer||!this.remuxer||D||N},K.getDecrypter=function(){var D=this.decrypter;return D||(D=this.decrypter=new A.default(this.config)),D},ne}(),et=function(ne){return{remuxResult:{},chunkMeta:ne}};function dt(ne){return"then"in ne&&ne.then instanceof Function}var Tt=function(ne,K,D,N,U){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=ne,this.videoCodec=K,this.initSegmentData=D,this.duration=N,this.defaultInitPts=U},bt=function(ne,K,D,N,U,Y){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=ne,this.contiguous=K,this.accurateTimeOffset=D,this.trackSwitch=N,this.timeOffset=U,this.initSegmentChange=Y}},973:(E,S,b)=>{var L,w;b.r(S),b.d(S,{ErrorDetails:()=>w,ErrorTypes:()=>L}),function(A){A.NETWORK_ERROR="networkError",A.MEDIA_ERROR="mediaError",A.KEY_SYSTEM_ERROR="keySystemError",A.MUX_ERROR="muxError",A.OTHER_ERROR="otherError"}(L||(L={})),function(A){A.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",A.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",A.KEY_SYSTEM_NO_SESSION="keySystemNoSession",A.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",A.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",A.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",A.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",A.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",A.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",A.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",A.MANIFEST_LOAD_ERROR="manifestLoadError",A.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",A.MANIFEST_PARSING_ERROR="manifestParsingError",A.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",A.LEVEL_EMPTY_ERROR="levelEmptyError",A.LEVEL_LOAD_ERROR="levelLoadError",A.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",A.LEVEL_SWITCH_ERROR="levelSwitchError",A.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",A.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",A.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",A.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",A.FRAG_LOAD_ERROR="fragLoadError",A.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",A.FRAG_DECRYPT_ERROR="fragDecryptError",A.FRAG_PARSING_ERROR="fragParsingError",A.REMUX_ALLOC_ERROR="remuxAllocError",A.KEY_LOAD_ERROR="keyLoadError",A.KEY_LOAD_TIMEOUT="keyLoadTimeOut",A.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",A.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",A.BUFFER_APPEND_ERROR="bufferAppendError",A.BUFFER_APPENDING_ERROR="bufferAppendingError",A.BUFFER_STALLED_ERROR="bufferStalledError",A.BUFFER_FULL_ERROR="bufferFullError",A.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",A.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",A.INTERNAL_EXCEPTION="internalException",A.INTERNAL_ABORTED="aborted",A.UNKNOWN="unknown"}(w||(w={}))},851:(E,S,b)=>{var L;b.r(S),b.d(S,{Events:()=>L}),function(w){w.MEDIA_ATTACHING="hlsMediaAttaching",w.MEDIA_ATTACHED="hlsMediaAttached",w.MEDIA_DETACHING="hlsMediaDetaching",w.MEDIA_DETACHED="hlsMediaDetached",w.BUFFER_RESET="hlsBufferReset",w.BUFFER_CODECS="hlsBufferCodecs",w.BUFFER_CREATED="hlsBufferCreated",w.BUFFER_APPENDING="hlsBufferAppending",w.BUFFER_APPENDED="hlsBufferAppended",w.BUFFER_EOS="hlsBufferEos",w.BUFFER_FLUSHING="hlsBufferFlushing",w.BUFFER_FLUSHED="hlsBufferFlushed",w.MANIFEST_LOADING="hlsManifestLoading",w.MANIFEST_LOADED="hlsManifestLoaded",w.MANIFEST_PARSED="hlsManifestParsed",w.LEVEL_SWITCHING="hlsLevelSwitching",w.LEVEL_SWITCHED="hlsLevelSwitched",w.LEVEL_LOADING="hlsLevelLoading",w.LEVEL_LOADED="hlsLevelLoaded",w.LEVEL_UPDATED="hlsLevelUpdated",w.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",w.LEVELS_UPDATED="hlsLevelsUpdated",w.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",w.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",w.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",w.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",w.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",w.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",w.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",w.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",w.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",w.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",w.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",w.CUES_PARSED="hlsCuesParsed",w.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",w.INIT_PTS_FOUND="hlsInitPtsFound",w.FRAG_LOADING="hlsFragLoading",w.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",w.FRAG_LOADED="hlsFragLoaded",w.FRAG_DECRYPTED="hlsFragDecrypted",w.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",w.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",w.FRAG_PARSING_METADATA="hlsFragParsingMetadata",w.FRAG_PARSED="hlsFragParsed",w.FRAG_BUFFERED="hlsFragBuffered",w.FRAG_CHANGED="hlsFragChanged",w.FPS_DROP="hlsFpsDrop",w.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",w.ERROR="hlsError",w.DESTROYING="hlsDestroying",w.KEY_LOADING="hlsKeyLoading",w.KEY_LOADED="hlsKeyLoaded",w.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",w.BACK_BUFFER_REACHED="hlsBackBufferReached"}(L||(L={}))},76:(E,S,b)=>{b.r(S),b.d(S,{default:()=>yo});var L,w=b(945),A=b(965),y=b(851),I=b(973),k=b(93),z=/^(\d+)x(\d+)$/,Z=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,V=function(){function p(t){for(var r in typeof t=="string"&&(t=p.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var f=p.prototype;return f.decimalInteger=function(t){var r=parseInt(this[t],10);return r>Number.MAX_SAFE_INTEGER?1/0:r},f.hexadecimalInteger=function(t){if(this[t]){var r=(this[t]||"0x").slice(2);r=(1&r.length?"0":"")+r;for(var s=new Uint8Array(r.length/2),a=0;a<r.length/2;a++)s[a]=parseInt(r.slice(2*a,2*a+2),16);return s}return null},f.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>Number.MAX_SAFE_INTEGER?1/0:r},f.decimalFloatingPoint=function(t){return parseFloat(this[t])},f.optionalFloat=function(t,r){var s=this[t];return s?parseFloat(s):r},f.enumeratedString=function(t){return this[t]},f.bool=function(t){return this[t]==="YES"},f.decimalResolution=function(t){var r=z.exec(this[t]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}},p.parseAttrList=function(t){var r,s={};for(Z.lastIndex=0;(r=Z.exec(t))!==null;){var a=r[2];a.indexOf('"')===0&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),s[r[1]]=a}return s},p}();function M(){return M=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},M.apply(this,arguments)}function B(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}(function(p){p.ID="ID",p.CLASS="CLASS",p.START_DATE="START-DATE",p.DURATION="DURATION",p.END_DATE="END-DATE",p.END_ON_NEXT="END-ON-NEXT",p.PLANNED_DURATION="PLANNED-DURATION",p.SCTE35_OUT="SCTE35-OUT",p.SCTE35_IN="SCTE35-IN"})(L||(L={}));var re=function(){function p(r,s){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,s){var a=s.attr;for(var o in a)if(Object.prototype.hasOwnProperty.call(r,o)&&r[o]!==a[o]){k.logger.warn('DATERANGE tag attribute: "'+o+'" does not match for tags with ID: "'+r.ID+'"'),this._badValueForSameId=o;break}r=M(new V({}),a,r)}if(this.attr=r,this._startDate=new Date(r[L.START_DATE]),L.END_DATE in this.attr){var i=new Date(this.attr[L.END_DATE]);(0,A.isFiniteNumber)(i.getTime())&&(this._endDate=i)}}var f,t;return f=p,(t=[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var r=this.duration;return r!==null?new Date(this._startDate.getTime()+1e3*r):null}},{key:"duration",get:function(){if(L.DURATION in this.attr){var r=this.attr.decimalFloatingPoint(L.DURATION);if((0,A.isFiniteNumber)(r))return r}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return L.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(L.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(L.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,A.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}])&&B(f.prototype,t),Object.defineProperty(f,"prototype",{writable:!1}),p}(),q=b(923);function Q(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}var $,ie,pe,Ce=function(){function p(r){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=r}var f,t;return p.prototype.reloaded=function(r){if(!r)return this.advanced=!0,void(this.updated=!0);var s=this.lastPartSn-r.lastPartSn,a=this.lastPartIndex-r.lastPartIndex;this.updated=this.endSN!==r.endSN||!!a||!!s,this.advanced=this.endSN>r.endSN||s>0||s===0&&a>0,this.updated||this.advanced?this.misses=Math.floor(.6*r.misses):this.misses=r.misses+1,this.availabilityDelay=r.availabilityDelay},f=p,(t=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,A.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var r=this.driftEndTime-this.driftStartTime;return r>0?1e3*(this.driftEnd-this.driftStart)/r:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var r;return(r=this.fragments)!==null&&r!==void 0&&r.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&Q(f.prototype,t),Object.defineProperty(f,"prototype",{writable:!1}),p}();function ee(p){return Uint8Array.from(atob(p),function(f){return f.charCodeAt(0)})}function C(p){return Uint8Array.from(unescape(encodeURIComponent(p)),function(f){return f.charCodeAt(0)})}function W(p){switch(p){case ie.FAIRPLAY:return $.FAIRPLAY;case ie.PLAYREADY:return $.PLAYREADY;case ie.WIDEVINE:return $.WIDEVINE;case ie.CLEARKEY:return $.CLEARKEY}}function F(p){switch(p){case $.FAIRPLAY:return ie.FAIRPLAY;case $.PLAYREADY:return ie.PLAYREADY;case $.WIDEVINE:return ie.WIDEVINE;case $.CLEARKEY:return ie.CLEARKEY}}function ce(p){var f=p.drmSystems,t=p.widevineLicenseUrl,r=f?[$.FAIRPLAY,$.WIDEVINE,$.PLAYREADY,$.CLEARKEY].filter(function(s){return!!f[s]}):[];return!r[$.WIDEVINE]&&t&&r.push($.WIDEVINE),r}(function(p){p.CLEARKEY="org.w3.clearkey",p.FAIRPLAY="com.apple.fps",p.PLAYREADY="com.microsoft.playready",p.WIDEVINE="com.widevine.alpha"})($||($={})),function(p){p.CLEARKEY="org.w3.clearkey",p.FAIRPLAY="com.apple.streamingkeydelivery",p.PLAYREADY="com.microsoft.playready",p.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"}(ie||(ie={})),function(p){p.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"}(pe||(pe={}));var me=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null,he=b(63),fe={},Ke=function(){function p(t,r,s,a,o){a===void 0&&(a=[1]),o===void 0&&(o=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=r,this.keyFormat=s,this.keyFormatVersions=a,this.iv=o,this.encrypted=!!t&&t!=="NONE",this.isCommonEncryption=this.encrypted&&t!=="AES-128"}p.clearKeyUriToKeyIdMap=function(){fe={}};var f=p.prototype;return f.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;switch(this.keyFormat){case"identity":return this.method==="SAMPLE-AES";case ie.FAIRPLAY:case ie.WIDEVINE:case ie.PLAYREADY:case ie.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},f.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof t!="number"&&(this.method!=="AES-128"||this.iv||k.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var r=function(G){for(var j=new Uint8Array(16),J=12;J<16;J++)j[J]=G>>8*(15-J)&255;return j}(t);return new p(this.method,this.uri,"identity",this.keyFormatVersions,r)}var s=function(G){var j,J,oe=G.split(":"),ve=null;if(oe[0]==="data"&&oe.length===2){var de=oe[1].split(";"),be=de[de.length-1].split(",");if(be.length===2){var je=be[0]==="base64",Ye=be[1];je?(de.splice(-1,1),ve=ee(Ye)):(j=C(Ye).subarray(0,16),(J=new Uint8Array(16)).set(j,16-j.length),ve=J)}}return ve}(this.uri);if(s)switch(this.keyFormat){case ie.WIDEVINE:this.pssh=s,s.length>=22&&(this.keyId=s.subarray(s.length-22,s.length-6));break;case ie.PLAYREADY:var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,he.mp4pssh)(a,null,s);var o=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2),i=String.fromCharCode.apply(null,Array.from(o)),l=i.substring(i.indexOf("<"),i.length),d=new DOMParser().parseFromString(l,"text/xml").getElementsByTagName("KID")[0];if(d){var h=d.childNodes[0]?d.childNodes[0].nodeValue:d.getAttribute("VALUE");if(h){var v=ee(h).subarray(0,16);(function(G){var j=function(J,oe,ve){var de=J[oe];J[oe]=J[ve],J[ve]=de};j(G,0,3),j(G,1,2),j(G,4,5),j(G,6,7)})(v),this.keyId=v}}break;default:var T=s.subarray(0,16);if(T.length!==16){var _=new Uint8Array(16);_.set(T,16-T.length),T=_}this.keyId=T}if(!this.keyId||this.keyId.byteLength!==16){var R=fe[this.uri];if(!R){var x=Object.keys(fe).length%Number.MAX_SAFE_INTEGER;R=new Uint8Array(16),new DataView(R.buffer,12,4).setUint32(0,x),fe[this.uri]=R}this.keyId=R}return this},p}(),We={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function Ge(p,f){return MediaSource.isTypeSupported((f||"video")+'/mp4;codecs="'+p+'"')}function Ue(){return Ue=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},Ue.apply(this,arguments)}var Ze=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,ft=/#EXT-X-MEDIA:(.*)/g,ue=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ge=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),ae=function(){function p(){}return p.findGroup=function(f,t){for(var r=0;r<f.length;r++){var s=f[r];if(s.id===t)return s}},p.convertAVC1ToAVCOTI=function(f){var t=f.split(".");if(t.length>2){var r=t.shift()+".";return(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).slice(-4)}return f},p.resolve=function(f,t){return(0,w.buildAbsoluteURL)(t,f,{alwaysNormalize:!0})},p.parseMasterPlaylist=function(f,t){var r,s=[],a=[],o={},i=[],l=!1;for(Ze.lastIndex=0;(r=Ze.exec(f))!=null;)if(r[1]){var d,h=new V(r[1]),v={attrs:h,bitrate:h.decimalInteger("AVERAGE-BANDWIDTH")||h.decimalInteger("BANDWIDTH"),name:h.NAME,url:p.resolve(r[2],t)},T=h.decimalResolution("RESOLUTION");T&&(v.width=T.width,v.height=T.height),ke((h.CODECS||"").split(/[ ,]+/).filter(function(G){return G}),v),v.videoCodec&&v.videoCodec.indexOf("avc1")!==-1&&(v.videoCodec=p.convertAVC1ToAVCOTI(v.videoCodec)),(d=v.unknownCodecs)!==null&&d!==void 0&&d.length||a.push(v),s.push(v)}else if(r[3]){var _=new V(r[3]);_["DATA-ID"]&&(l=!0,o[_["DATA-ID"]]=_)}else if(r[4]){var R=r[4],x=we(R,t);x.encrypted&&x.isSupported()?i.push(x):k.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+R+'"')}return{levels:a.length>0&&a.length<s.length?a:s,sessionData:l?o:null,sessionKeys:i.length?i:null}},p.parseMasterPlaylistMedia=function(f,t,r,s){var a;s===void 0&&(s=[]);var o=[],i=0;for(ft.lastIndex=0;(a=ft.exec(f))!==null;){var l=new V(a[1]);if(l.TYPE===r){var d={attrs:l,bitrate:0,id:i++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:r,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?p.resolve(l.URI,t):""};if(s.length){var h=p.findGroup(s,d.groupId)||s[0];Pe(d,h,"audioCodec"),Pe(d,h,"textCodec")}o.push(d)}}return o},p.parseLevelPlaylist=function(f,t,r,s,a){var o,i,l,d=new Ce(t),h=d.fragments,v=null,T=0,_=0,R=0,x=0,G=null,j=new q.Fragment(s,t),J=-1,oe=!1;for(ue.lastIndex=0,d.m3u8=f;(o=ue.exec(f))!==null;){oe&&(oe=!1,(j=new q.Fragment(s,t)).start=R,j.sn=T,j.cc=x,j.level=r,v&&(j.initSegment=v,j.rawProgramDateTime=v.rawProgramDateTime,v.rawProgramDateTime=null));var ve=o[1];if(ve){j.duration=parseFloat(ve);var de=(" "+o[2]).slice(1);j.title=de||null,j.tagList.push(de?["INF",ve,de]:["INF",ve])}else if(o[3])(0,A.isFiniteNumber)(j.duration)&&(j.start=R,l&&H(j,l,d),j.sn=T,j.level=r,j.cc=x,j.urlId=a,h.push(j),j.relurl=(" "+o[3]).slice(1),xe(j,G),G=j,R+=j.duration,T++,_=0,oe=!0);else if(o[4]){var be=(" "+o[4]).slice(1);G?j.setByteRange(be,G):j.setByteRange(be)}else if(o[5])j.rawProgramDateTime=(" "+o[5]).slice(1),j.tagList.push(["PROGRAM-DATE-TIME",j.rawProgramDateTime]),J===-1&&(J=h.length);else{if(!(o=o[0].match(ge))){k.logger.warn("No matches on slow regex match for level playlist!");continue}for(i=1;i<o.length&&o[i]===void 0;i++);var je=(" "+o[i]).slice(1),Ye=(" "+o[i+1]).slice(1),Le=o[i+2]?(" "+o[i+2]).slice(1):"";switch(je){case"PLAYLIST-TYPE":d.type=Ye.toUpperCase();break;case"MEDIA-SEQUENCE":T=d.startSN=parseInt(Ye);break;case"SKIP":var He=new V(Ye),Oe=He.decimalInteger("SKIPPED-SEGMENTS");if((0,A.isFiniteNumber)(Oe)){d.skippedSegments=Oe;for(var ot=Oe;ot--;)h.unshift(null);T+=Oe}var Et=He.enumeratedString("RECENTLY-REMOVED-DATERANGES");Et&&(d.recentlyRemovedDateranges=Et.split("	"));break;case"TARGETDURATION":d.targetduration=parseFloat(Ye);break;case"VERSION":d.version=parseInt(Ye);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"#":(Ye||Le)&&j.tagList.push(Le?[Ye,Le]:[Ye]);break;case"DISCONTINUITY":x++,j.tagList.push(["DIS"]);break;case"GAP":j.tagList.push([je]);break;case"BITRATE":j.tagList.push([je,Ye]);break;case"DATERANGE":var st=new V(Ye),lt=new re(st,d.dateRanges[st.ID]);lt.isValid||d.skippedSegments?d.dateRanges[lt.id]=lt:k.logger.warn('Ignoring invalid DATERANGE tag: "'+Ye+'"'),j.tagList.push(["EXT-X-DATERANGE",Ye]);break;case"DISCONTINUITY-SEQUENCE":x=parseInt(Ye);break;case"KEY":var gt=we(Ye,t);if(gt.isSupported()){if(gt.method==="NONE"){l=void 0;break}l||(l={}),l[gt.keyFormat]&&(l=Ue({},l)),l[gt.keyFormat]=gt}else k.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+Ye+'"');break;case"START":var Nt=new V(Ye).decimalFloatingPoint("TIME-OFFSET");(0,A.isFiniteNumber)(Nt)&&(d.startTimeOffset=Nt);break;case"MAP":var It=new V(Ye);if(j.duration){var At=new q.Fragment(s,t);P(At,It,r,l),v=At,j.initSegment=v,v.rawProgramDateTime&&!j.rawProgramDateTime&&(j.rawProgramDateTime=v.rawProgramDateTime)}else P(j,It,r,l),v=j,oe=!0;break;case"SERVER-CONTROL":var Dt=new V(Ye);d.canBlockReload=Dt.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=Dt.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&Dt.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=Dt.optionalFloat("PART-HOLD-BACK",0),d.holdBack=Dt.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var mr=new V(Ye);d.partTarget=mr.decimalFloatingPoint("PART-TARGET");break;case"PART":var jr=d.partList;jr||(jr=d.partList=[]);var en=_>0?jr[jr.length-1]:void 0,Dn=_++,tn=new q.Part(new V(Ye),j,t,Dn,en);jr.push(tn),j.duration+=tn.duration;break;case"PRELOAD-HINT":var ei=new V(Ye);d.preloadHint=ei;break;case"RENDITION-REPORT":var Je=new V(Ye);d.renditionReports=d.renditionReports||[],d.renditionReports.push(Je);break;default:k.logger.warn("line parsed but not handled: "+o)}}}G&&!G.relurl?(h.pop(),R-=G.duration,d.partList&&(d.fragmentHint=G)):d.partList&&(xe(j,G),j.cc=x,d.fragmentHint=j,l&&H(j,l,d));var rt=h.length,Rn=h[0],ur=h[rt-1];if((R+=d.skippedSegments*d.targetduration)>0&&rt&&ur){d.averagetargetduration=R/rt;var yr=ur.sn;d.endSN=yr!=="initSegment"?yr:0,d.live||(ur.endList=!0),Rn&&(d.startCC=Rn.cc)}else d.endSN=0,d.startCC=0;return d.fragmentHint&&(R+=d.fragmentHint.duration),d.totalduration=R,d.endCC=x,J>0&&function(rn,Er){for(var Tr=rn[Er],Lr=Er;Lr--;){var Vt=rn[Lr];if(!Vt)return;Vt.programDateTime=Tr.programDateTime-1e3*Vt.duration,Tr=Vt}}(h,J),d},p}();function we(p,f){var t,r,s=new V(p),a=(t=s.enumeratedString("METHOD"))!=null?t:"",o=s.URI,i=s.hexadecimalInteger("IV"),l=s.enumeratedString("KEYFORMATVERSIONS"),d=(r=s.enumeratedString("KEYFORMAT"))!=null?r:"identity";o&&s.IV&&!i&&k.logger.error("Invalid IV: "+s.IV);var h=o?ae.resolve(o,f):"",v=(l||"1").split("/").map(Number).filter(Number.isFinite);return new Ke(a,h,d,v,i)}function ke(p,f){["video","audio","text"].forEach(function(t){var r=p.filter(function(a){return function(o,i){var l=We[i];return!!l&&l[o.slice(0,4)]===!0}(a,t)});if(r.length){var s=r.filter(function(a){return a.lastIndexOf("avc1",0)===0||a.lastIndexOf("mp4a",0)===0});f[t+"Codec"]=s.length>0?s[0]:r[0],p=p.filter(function(a){return r.indexOf(a)===-1})}}),f.unknownCodecs=p}function Pe(p,f,t){var r=f[t];r&&(p[t]=r)}function xe(p,f){p.rawProgramDateTime?p.programDateTime=Date.parse(p.rawProgramDateTime):f!=null&&f.programDateTime&&(p.programDateTime=f.endProgramDateTime),(0,A.isFiniteNumber)(p.programDateTime)||(p.programDateTime=null,p.rawProgramDateTime=null)}function P(p,f,t,r){p.relurl=f.URI,f.BYTERANGE&&p.setByteRange(f.BYTERANGE),p.level=t,p.sn="initSegment",r&&(p.levelkeys=r),p.initSegment=null}function H(p,f,t){p.levelkeys=f;var r=t.encryptedFragments;r.length&&r[r.length-1].levelkeys===f||!Object.keys(f).some(function(s){return f[s].isCommonEncryption})||r.push(p)}var O=b(308);function se(p,f){var t=p.url;return t!==void 0&&t.indexOf("data:")!==0||(t=f.url),t}const le=function(){function p(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var f=p.prototype;return f.startLoad=function(t){},f.stopLoad=function(){this.destroyInternalLoaders()},f.registerListeners=function(){var t=this.hls;t.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(y.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(y.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(y.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},f.unregisterListeners=function(){var t=this.hls;t.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(y.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(y.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(y.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},f.createInternalLoader=function(t){var r=this.hls.config,s=r.pLoader,a=r.loader,o=new(s||a)(r);return t.loader=o,this.loaders[t.type]=o,o},f.getInternalLoader=function(t){return this.loaders[t.type]},f.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},f.destroyInternalLoaders=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy(),this.resetInternalLoader(t)}},f.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},f.onManifestLoading=function(t,r){var s=r.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:O.PlaylistContextType.MANIFEST,url:s,deliveryDirectives:null})},f.onLevelLoading=function(t,r){var s=r.id,a=r.level,o=r.url,i=r.deliveryDirectives;this.load({id:s,groupId:null,level:a,responseType:"text",type:O.PlaylistContextType.LEVEL,url:o,deliveryDirectives:i})},f.onAudioTrackLoading=function(t,r){var s=r.id,a=r.groupId,o=r.url,i=r.deliveryDirectives;this.load({id:s,groupId:a,level:null,responseType:"text",type:O.PlaylistContextType.AUDIO_TRACK,url:o,deliveryDirectives:i})},f.onSubtitleTrackLoading=function(t,r){var s=r.id,a=r.groupId,o=r.url,i=r.deliveryDirectives;this.load({id:s,groupId:a,level:null,responseType:"text",type:O.PlaylistContextType.SUBTITLE_TRACK,url:o,deliveryDirectives:i})},f.load=function(t){var r,s,a,o,i,l,d=this.hls.config,h=this.getInternalLoader(t);if(h){var v=h.context;if(v&&v.url===t.url)return void k.logger.trace("[playlist-loader]: playlist request ongoing");k.logger.log("[playlist-loader]: aborting previous loader for type: "+t.type),h.abort()}switch(t.type){case O.PlaylistContextType.MANIFEST:s=d.manifestLoadingMaxRetry,a=d.manifestLoadingTimeOut,o=d.manifestLoadingRetryDelay,i=d.manifestLoadingMaxRetryTimeout;break;case O.PlaylistContextType.LEVEL:case O.PlaylistContextType.AUDIO_TRACK:case O.PlaylistContextType.SUBTITLE_TRACK:s=0,a=d.levelLoadingTimeOut;break;default:s=d.levelLoadingMaxRetry,a=d.levelLoadingTimeOut,o=d.levelLoadingRetryDelay,i=d.levelLoadingMaxRetryTimeout}if(h=this.createInternalLoader(t),(r=t.deliveryDirectives)!==null&&r!==void 0&&r.part&&(t.type===O.PlaylistContextType.LEVEL&&t.level!==null?l=this.hls.levels[t.level].details:t.type===O.PlaylistContextType.AUDIO_TRACK&&t.id!==null?l=this.hls.audioTracks[t.id].details:t.type===O.PlaylistContextType.SUBTITLE_TRACK&&t.id!==null&&(l=this.hls.subtitleTracks[t.id].details),l)){var T=l.partTarget,_=l.targetduration;T&&_&&(a=Math.min(1e3*Math.max(3*T,.8*_),a))}var R={timeout:a,maxRetry:s,retryDelay:o,maxRetryDelay:i,highWaterMark:0},x={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};h.load(t,R,x)},f.loadsuccess=function(t,r,s,a){a===void 0&&(a=null),this.resetInternalLoader(s.type);var o=t.data;o.indexOf("#EXTM3U")===0?(r.parsing.start=performance.now(),o.indexOf("#EXTINF:")>0||o.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,r,s,a):this.handleMasterPlaylist(t,r,s,a)):this.handleManifestParsingError(t,s,"no EXTM3U delimiter",a)},f.loaderror=function(t,r,s){s===void 0&&(s=null),this.handleNetworkError(r,s,!1,t)},f.loadtimeout=function(t,r,s){s===void 0&&(s=null),this.handleNetworkError(r,s,!0)},f.handleMasterPlaylist=function(t,r,s,a){var o=this.hls,i=t.data,l=se(t,s),d=ae.parseMasterPlaylist(i,l),h=d.levels,v=d.sessionData,T=d.sessionKeys;if(h.length){var _=h.map(function(J){return{id:J.attrs.AUDIO,audioCodec:J.audioCodec}}),R=h.map(function(J){return{id:J.attrs.SUBTITLES,textCodec:J.textCodec}}),x=ae.parseMasterPlaylistMedia(i,l,"AUDIO",_),G=ae.parseMasterPlaylistMedia(i,l,"SUBTITLES",R),j=ae.parseMasterPlaylistMedia(i,l,"CLOSED-CAPTIONS");x.length&&(x.some(function(J){return!J.url})||!h[0].audioCodec||h[0].attrs.AUDIO||(k.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),x.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new V({}),bitrate:0,url:""}))),o.trigger(y.Events.MANIFEST_LOADED,{levels:h,audioTracks:x,subtitles:G,captions:j,url:l,stats:r,networkDetails:a,sessionData:v,sessionKeys:T})}else this.handleManifestParsingError(t,s,"no level found in manifest",a)},f.handleTrackOrLevelPlaylist=function(t,r,s,a){var o=this.hls,i=s.id,l=s.level,d=s.type,h=se(t,s),v=(0,A.isFiniteNumber)(i)?i:0,T=(0,A.isFiniteNumber)(l)?l:v,_=function(G){switch(G.type){case O.PlaylistContextType.AUDIO_TRACK:return O.PlaylistLevelType.AUDIO;case O.PlaylistContextType.SUBTITLE_TRACK:return O.PlaylistLevelType.SUBTITLE;default:return O.PlaylistLevelType.MAIN}}(s),R=ae.parseLevelPlaylist(t.data,h,T,_,v);if(R.fragments.length){if(d===O.PlaylistContextType.MANIFEST){var x={attrs:new V({}),bitrate:0,details:R,name:"",url:h};o.trigger(y.Events.MANIFEST_LOADED,{levels:[x],audioTracks:[],url:h,stats:r,networkDetails:a,sessionData:null,sessionKeys:null})}r.parsing.end=performance.now(),s.levelDetails=R,this.handlePlaylistLoaded(t,r,s,a)}else o.trigger(y.Events.ERROR,{type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:h,reason:"no fragments found in level",level:typeof s.level=="number"?s.level:void 0})},f.handleManifestParsingError=function(t,r,s,a){this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:r.type===O.PlaylistContextType.MANIFEST,url:t.url,reason:s,response:t,context:r,networkDetails:a})},f.handleNetworkError=function(t,r,s,a){s===void 0&&(s=!1),k.logger.warn("[playlist-loader]: A network "+(s?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var o=I.ErrorDetails.UNKNOWN,i=!1,l=this.getInternalLoader(t);switch(t.type){case O.PlaylistContextType.MANIFEST:o=s?I.ErrorDetails.MANIFEST_LOAD_TIMEOUT:I.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case O.PlaylistContextType.LEVEL:o=s?I.ErrorDetails.LEVEL_LOAD_TIMEOUT:I.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case O.PlaylistContextType.AUDIO_TRACK:o=s?I.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:I.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1;break;case O.PlaylistContextType.SUBTITLE_TRACK:o=s?I.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:I.ErrorDetails.SUBTITLE_LOAD_ERROR,i=!1}l&&this.resetInternalLoader(t.type);var d={type:I.ErrorTypes.NETWORK_ERROR,details:o,fatal:i,url:t.url,loader:l,context:t,networkDetails:r};a&&(d.response=a),this.hls.trigger(y.Events.ERROR,d)},f.handlePlaylistLoaded=function(t,r,s,a){var o=s.type,i=s.level,l=s.id,d=s.groupId,h=s.loader,v=s.levelDetails,T=s.deliveryDirectives;if(v!=null&&v.targetduration){if(h)switch(v.live&&(h.getCacheAge&&(v.ageHeader=h.getCacheAge()||0),h.getCacheAge&&!isNaN(v.ageHeader)||(v.ageHeader=0)),o){case O.PlaylistContextType.MANIFEST:case O.PlaylistContextType.LEVEL:this.hls.trigger(y.Events.LEVEL_LOADED,{details:v,level:i||0,id:l||0,stats:r,networkDetails:a,deliveryDirectives:T});break;case O.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(y.Events.AUDIO_TRACK_LOADED,{details:v,id:l||0,groupId:d||"",stats:r,networkDetails:a,deliveryDirectives:T});break;case O.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(y.Events.SUBTITLE_TRACK_LOADED,{details:v,id:l||0,groupId:d||"",stats:r,networkDetails:a,deliveryDirectives:T})}}else this.handleManifestParsingError(t,s,"invalid target duration",a)},p}();function Te(p,f){var t;try{t=new Event("addtrack")}catch{(t=document.createEvent("Event")).initEvent("addtrack",!1,!1)}t.track=p,f.dispatchEvent(t)}function De(p,f){var t=p.mode;if(t==="disabled"&&(p.mode="hidden"),p.cues&&!p.cues.getCueById(f.id))try{if(p.addCue(f),!p.cues.getCueById(f.id))throw new Error("addCue is failed for: "+f)}catch(s){k.logger.debug("[texttrack-utils]: "+s);var r=new self.TextTrackCue(f.startTime,f.endTime,f.text);r.id=f.id,p.addCue(r)}t==="disabled"&&(p.mode=t)}function _e(p){var f=p.mode;if(f==="disabled"&&(p.mode="hidden"),p.cues)for(var t=p.cues.length;t--;)p.removeCue(p.cues[t]);f==="disabled"&&(p.mode=f)}function Re(p,f,t,r){var s=p.mode;if(s==="disabled"&&(p.mode="hidden"),p.cues&&p.cues.length>0)for(var a=function(i,l,d){var h=[],v=function(x,G){if(G<x[0].startTime)return 0;var j=x.length-1;if(G>x[j].endTime)return-1;for(var J=0,oe=j;J<=oe;){var ve=Math.floor((oe+J)/2);if(G<x[ve].startTime)oe=ve-1;else{if(!(G>x[ve].startTime&&J<j))return ve;J=ve+1}}return x[J].startTime-G<G-x[oe].startTime?J:oe}(i,l);if(v>-1)for(var T=v,_=i.length;T<_;T++){var R=i[T];if(R.startTime>=l&&R.endTime<=d)h.push(R);else if(R.startTime>d)return h}return h}(p.cues,f,t),o=0;o<a.length;o++)r&&!r(a[o])||p.removeCue(a[o]);s==="disabled"&&(p.mode=s)}var ye=b(181),Me=b(856);function Ie(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var Ne=function(){var p=Ie();try{new p(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Ve(p,f){return p.getTime()/1e3-f}const $e=function(){function p(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}var f=p.prototype;return f.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},f._registerListeners=function(){var t=this.hls;t.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(y.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},f._unregisterListeners=function(){var t=this.hls;t.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(y.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},f.onMediaAttached=function(t,r){this.media=r.media},f.onMediaDetaching=function(){this.id3Track&&(_e(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},f.onManifestLoading=function(){this.dateRangeCuesAppended={}},f.createTrack=function(t){var r=this.getID3Track(t.textTracks);return r.mode="hidden",r},f.getID3Track=function(t){if(this.media){for(var r=0;r<t.length;r++){var s=t[r];if(s.kind==="metadata"&&s.label==="id3")return Te(s,this.media),s}return this.media.addTextTrack("metadata","id3")}},f.onFragParsingMetadata=function(t,r){if(this.media){var s=this.hls.config,a=s.enableEmsgMetadataCues,o=s.enableID3MetadataCues;if(a||o){var i=r.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var l=Ie(),d=0;d<i.length;d++){var h=i[d].type;if((h!==Me.MetadataSchema.emsg||a)&&o){var v=ye.getID3Frames(i[d].data);if(v){var T=i[d].pts,_=T+i[d].duration;_>Ne&&(_=Ne),_-T<=0&&(_=T+.25);for(var R=0;R<v.length;R++){var x=v[R];if(!ye.isTimeStampFrame(x)){this.updateId3CueEnds(T);var G=new l(T,_,"");G.value=x,h&&(G.type=h),this.id3Track.addCue(G)}}}}}}}},f.updateId3CueEnds=function(t){var r,s=(r=this.id3Track)===null||r===void 0?void 0:r.cues;if(s)for(var a=s.length;a--;){var o=s[a];o.startTime<t&&o.endTime===Ne&&(o.endTime=t)}},f.onBufferFlushing=function(t,r){var s=r.startOffset,a=r.endOffset,o=r.type,i=this.id3Track,l=this.hls;if(l){var d=l.config,h=d.enableEmsgMetadataCues,v=d.enableID3MetadataCues;i&&(h||v)&&Re(i,s,a,o==="audio"?function(T){return T.type===Me.MetadataSchema.audioId3&&v}:o==="video"?function(T){return T.type===Me.MetadataSchema.emsg&&h}:function(T){return T.type===Me.MetadataSchema.audioId3&&v||T.type===Me.MetadataSchema.emsg&&h})}},f.onLevelUpdated=function(t,r){var s=this,a=r.details;if(this.media&&a.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var o=this.dateRangeCuesAppended,i=this.id3Track,l=a.dateRanges,d=Object.keys(l);if(i)for(var h=Object.keys(o).filter(function(J){return!d.includes(J)}),v=function(J){var oe=h[J];Object.keys(o[oe].cues).forEach(function(ve){i.removeCue(o[oe].cues[ve])}),delete o[oe]},T=h.length;T--;)v(T);var _=a.fragments[a.fragments.length-1];if(d.length!==0&&(0,A.isFiniteNumber)(_==null?void 0:_.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var R=_.programDateTime/1e3-_.start,x=Ie(),G=function(J){var oe=d[J],ve=l[oe],de=o[oe],be=(de==null?void 0:de.cues)||{},je=(de==null?void 0:de.durationKnown)||!1,Ye=Ve(ve.startDate,R),Le=Ne,He=ve.endDate;if(He)Le=Ve(He,R),je=!0;else if(ve.endOnNext&&!je){var Oe=d.reduce(function(It,At){var Dt=l[At];return Dt.class===ve.class&&Dt.id!==At&&Dt.startDate>ve.startDate&&It.push(Dt),It},[]).sort(function(It,At){return It.startDate.getTime()-At.startDate.getTime()})[0];Oe&&(Le=Ve(Oe.startDate,R),je=!0)}for(var ot,Et=Object.keys(ve.attr),st=0;st<Et.length;st++){var lt=Et[st];if(lt!==L.ID&&lt!==L.CLASS&&lt!==L.START_DATE&&lt!==L.DURATION&&lt!==L.END_DATE&&lt!==L.END_ON_NEXT){var gt=be[lt];if(gt)je&&!de.durationKnown&&(gt.endTime=Le);else{var Nt=ve.attr[lt];gt=new x(Ye,Le,""),lt!==L.SCTE35_OUT&&lt!==L.SCTE35_IN||(ot=Nt,Nt=Uint8Array.from(ot.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),gt.value={key:lt,data:Nt},gt.type=Me.MetadataSchema.dateRange,s.id3Track.addCue(gt),be[lt]=gt}}}o[oe]={cues:be,dateRange:ve,durationKnown:je}},j=0;j<d.length;j++)G(j)}}},p}();function tt(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}var et=function(){function p(s){var a=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return a.timeupdate()},this.hls=s,this.config=s.config,this.registerListeners()}var f,t,r=p.prototype;return r.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},r.registerListeners=function(){this.hls.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(y.Events.ERROR,this.onError,this)},r.unregisterListeners=function(){this.hls.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(y.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(y.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(y.Events.ERROR,this.onError)},r.onMediaAttached=function(s,a){this.media=a.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},r.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},r.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},r.onLevelUpdated=function(s,a){var o=a.details;this.levelDetails=o,o.advanced&&this.timeupdate(),!o.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},r.onError=function(s,a){a.details===I.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,k.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},r.timeupdate=function(){var s=this.media,a=this.levelDetails;if(s&&a){this.currentTime=s.currentTime;var o=this.computeLatency();if(o!==null){this._latency=o;var i=this.config,l=i.lowLatencyMode,d=i.maxLiveSyncPlaybackRate;if(l&&d!==1){var h=this.targetLatency;if(h!==null){var v=o-h,T=v<Math.min(this.maxLatency,h+a.targetduration);if(a.live&&T&&v>.05&&this.forwardBufferLength>1){var _=Math.min(2,Math.max(1,d)),R=Math.round(2/(1+Math.exp(-.75*v-this.edgeStalled))*20)/20;s.playbackRate=Math.min(_,Math.max(1,R))}else s.playbackRate!==1&&s.playbackRate!==0&&(s.playbackRate=1)}}}}},r.estimateLiveEdge=function(){var s=this.levelDetails;return s===null?null:s.edge+s.age},r.computeLatency=function(){var s=this.estimateLiveEdge();return s===null?null:s-this.currentTime},f=p,(t=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var s=this.config,a=this.levelDetails;return s.liveMaxLatencyDuration!==void 0?s.liveMaxLatencyDuration:a?s.liveMaxLatencyDurationCount*a.targetduration:0}},{key:"targetLatency",get:function(){var s=this.levelDetails;if(s===null)return null;var a=s.holdBack,o=s.partHoldBack,i=s.targetduration,l=this.config,d=l.liveSyncDuration,h=l.liveSyncDurationCount,v=l.lowLatencyMode,T=this.hls.userConfig,_=v&&o||a;(T.liveSyncDuration||T.liveSyncDurationCount||_===0)&&(_=d!==void 0?d:h*i);var R=i;return _+Math.min(1*this.stallCount,R)}},{key:"liveSyncPosition",get:function(){var s=this.estimateLiveEdge(),a=this.targetLatency,o=this.levelDetails;if(s===null||a===null||o===null)return null;var i=o.edge,l=s-a-this.edgeStalled,d=i-o.totalduration,h=i-(this.config.lowLatencyMode&&o.partTarget||o.targetduration);return Math.min(Math.max(d,l),h)}},{key:"drift",get:function(){var s=this.levelDetails;return s===null?1:s.drift}},{key:"edgeStalled",get:function(){var s=this.levelDetails;if(s===null)return 0;var a=3*(this.config.lowLatencyMode&&s.partTarget||s.targetduration);return Math.max(s.age-a,0)}},{key:"forwardBufferLength",get:function(){var s=this.media,a=this.levelDetails;if(!s||!a)return 0;var o=s.buffered.length;return(o?s.buffered.end(o-1):a.edge)-this.currentTime}}])&&tt(f.prototype,t),Object.defineProperty(f,"prototype",{writable:!1}),p}();function dt(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}var Tt,bt=["NONE","TYPE-0","TYPE-1","TYPE-2",null];(function(p){p.No="",p.Yes="YES",p.v2="v2"})(Tt||(Tt={}));var ne=function(){function p(f,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=f,this.part=t,this.skip=r}return p.prototype.addDirectives=function(f){var t=new self.URL(f);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},p}(),K=function(){function p(r){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[r.url],this.attrs=r.attrs,this.bitrate=r.bitrate,r.details&&(this.details=r.details),this.id=r.id||0,this.name=r.name,this.width=r.width||0,this.height=r.height||0,this.audioCodec=r.audioCodec,this.videoCodec=r.videoCodec,this.unknownCodecs=r.unknownCodecs,this.codecSet=[r.videoCodec,r.audioCodec].filter(function(s){return s}).join(",").replace(/\.[^.,]+/g,"")}var f,t;return f=p,(t=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(r){var s=r%this.url.length;this._urlId!==s&&(this.details=void 0,this._urlId=s)}}])&&dt(f.prototype,t),Object.defineProperty(f,"prototype",{writable:!1}),p}();function D(){return D=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},D.apply(this,arguments)}function N(p,f,t){switch(f){case"audio":p.audioGroupIds||(p.audioGroupIds=[]),p.audioGroupIds.push(t);break;case"text":p.textGroupIds||(p.textGroupIds=[]),p.textGroupIds.push(t)}}function U(p){var f={};p.forEach(function(t){var r=t.groupId||"";t.id=f[r]=f[r]||0,f[r]++})}function Y(p,f){var t=f.startPTS;if((0,A.isFiniteNumber)(t)){var r,s=0;f.sn>p.sn?(s=t-p.start,r=p):(s=p.start-t,r=f),r.duration!==s&&(r.duration=s)}else f.sn>p.sn?p.cc===f.cc&&p.minEndPTS?f.start=p.start+(p.minEndPTS-p.start):f.start=p.start+p.duration:f.start=Math.max(p.start-f.duration,0)}function X(p,f,t,r,s,a){r-t<=0&&(k.logger.warn("Fragment should have a positive duration",f),r=t+f.duration,a=s+f.duration);var o=t,i=r,l=f.startPTS,d=f.endPTS;if((0,A.isFiniteNumber)(l)){var h=Math.abs(l-t);(0,A.isFiniteNumber)(f.deltaPTS)?f.deltaPTS=Math.max(h,f.deltaPTS):f.deltaPTS=h,o=Math.max(t,l),t=Math.min(t,l),s=Math.min(s,f.startDTS),i=Math.min(r,d),r=Math.max(r,d),a=Math.max(a,f.endDTS)}f.duration=r-t;var v=t-f.start;f.start=f.startPTS=t,f.maxStartPTS=o,f.startDTS=s,f.endPTS=r,f.minEndPTS=i,f.endDTS=a;var T,_=f.sn;if(!p||_<p.startSN||_>p.endSN)return 0;var R=_-p.startSN,x=p.fragments;for(x[R]=f,T=R;T>0;T--)Y(x[T],x[T-1]);for(T=R;T<x.length-1;T++)Y(x[T],x[T+1]);return p.fragmentHint&&Y(x[x.length-1],p.fragmentHint),p.PTSKnown=p.alignedSliding=!0,v}function te(p,f){var t=f.startSN+f.skippedSegments-p.startSN,r=p.fragments;t<0||t>=r.length||Ee(f,r[t].start)}function Ee(p,f){if(f){for(var t=p.fragments,r=p.skippedSegments;r<t.length;r++)t[r].start+=f;p.fragmentHint&&(p.fragmentHint.start+=f)}}var Se=function(){function p(t,r){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=k.logger.log.bind(k.logger,r+":"),this.warn=k.logger.warn.bind(k.logger,r+":"),this.hls=t}var f=p.prototype;return f.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},f.onError=function(t,r){!r.fatal||r.type!==I.ErrorTypes.NETWORK_ERROR&&r.type!==I.ErrorTypes.KEY_SYSTEM_ERROR||this.stopLoad()},f.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},f.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},f.stopLoad=function(){this.canLoad=!1,this.clearTimer()},f.switchParams=function(t,r){var s=r==null?void 0:r.renditionReports;if(s)for(var a=0;a<s.length;a++){var o=s[a],i=void 0;try{i=new self.URL(o.URI,r.url).href}catch(v){k.logger.warn("Could not construct new URL for Rendition Report: "+v),i=o.URI||""}if(i===t.slice(-i.length)){var l=parseInt(o["LAST-MSN"])||(r==null?void 0:r.lastPartSn),d=parseInt(o["LAST-PART"])||(r==null?void 0:r.lastPartIndex);if(this.hls.config.lowLatencyMode){var h=Math.min(r.age-r.partTarget,r.targetduration);d>=0&&h>r.partTarget&&(d+=1)}return new ne(l,d>=0?d:void 0,Tt.No)}}},f.loadPlaylist=function(t){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},f.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},f.playlistLoaded=function(t,r,s){var a=this,o=r.details,i=r.stats,l=self.performance.now(),d=i.loading.first?Math.max(0,l-i.loading.first):0;if(o.advancedDateTime=Date.now()-d,o.live||s!=null&&s.live){if(o.reloaded(s),s&&this.log("live playlist "+t+" "+(o.advanced?"REFRESHED "+o.lastPartSn+"-"+o.lastPartIndex:"MISSED")),s&&o.fragments.length>0&&function(He,Oe){for(var ot=null,Et=He.fragments,st=Et.length-1;st>=0;st--){var lt=Et[st].initSegment;if(lt){ot=lt;break}}He.fragmentHint&&delete He.fragmentHint.endPTS;var gt,Nt,It,At,Dt,mr=0;if(function(Je,rt,Rn){for(var ur=rt.skippedSegments,yr=Math.max(Je.startSN,rt.startSN)-rt.startSN,rn=(Je.fragmentHint?1:0)+(ur?rt.endSN:Math.min(Je.endSN,rt.endSN))-rt.startSN,Er=rt.startSN-Je.startSN,Tr=rt.fragmentHint?rt.fragments.concat(rt.fragmentHint):rt.fragments,Lr=Je.fragmentHint?Je.fragments.concat(Je.fragmentHint):Je.fragments,Vt=yr;Vt<=rn;Vt++){var _s=Lr[Er+Vt],ti=Tr[Vt];ur&&!ti&&Vt<ur&&(ti=rt.fragments[Vt]=_s),_s&&ti&&Rn(_s,ti)}}(He,Oe,function(Je,rt){Je.relurl&&(mr=Je.cc-rt.cc),(0,A.isFiniteNumber)(Je.startPTS)&&(0,A.isFiniteNumber)(Je.endPTS)&&(rt.start=rt.startPTS=Je.startPTS,rt.startDTS=Je.startDTS,rt.appendedPTS=Je.appendedPTS,rt.maxStartPTS=Je.maxStartPTS,rt.endPTS=Je.endPTS,rt.endDTS=Je.endDTS,rt.minEndPTS=Je.minEndPTS,rt.duration=Je.endPTS-Je.startPTS,rt.duration&&(gt=rt),Oe.PTSKnown=Oe.alignedSliding=!0),rt.elementaryStreams=Je.elementaryStreams,rt.loader=Je.loader,rt.stats=Je.stats,rt.urlId=Je.urlId,Je.initSegment&&(rt.initSegment=Je.initSegment,ot=Je.initSegment)}),ot&&(Oe.fragmentHint?Oe.fragments.concat(Oe.fragmentHint):Oe.fragments).forEach(function(Je){var rt;Je.initSegment&&Je.initSegment.relurl!==((rt=ot)===null||rt===void 0?void 0:rt.relurl)||(Je.initSegment=ot)}),Oe.skippedSegments)if(Oe.deltaUpdateFailed=Oe.fragments.some(function(Je){return!Je}),Oe.deltaUpdateFailed){k.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var jr=Oe.skippedSegments;jr--;)Oe.fragments.shift();Oe.startSN=Oe.fragments[0].sn,Oe.startCC=Oe.fragments[0].cc}else Oe.canSkipDateRanges&&(Oe.dateRanges=(Nt=He.dateRanges,It=Oe.dateRanges,At=Oe.recentlyRemovedDateranges,Dt=D({},Nt),At&&At.forEach(function(Je){delete Dt[Je]}),Object.keys(It).forEach(function(Je){var rt=new re(It[Je].attr,Dt[Je]);rt.isValid?Dt[Je]=rt:k.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(It[Je].attr)+'"')}),Dt));var en=Oe.fragments;if(mr){k.logger.warn("discontinuity sliding from playlist, take drift into account");for(var Dn=0;Dn<en.length;Dn++)en[Dn].cc+=mr}Oe.skippedSegments&&(Oe.startCC=Oe.fragments[0].cc),function(Je,rt,Rn){if(Je&&rt)for(var ur=0,yr=0,rn=Je.length;yr<=rn;yr++){var Er=Je[yr],Tr=rt[yr+ur];Er&&Tr&&Er.index===Tr.index&&Er.fragment.sn===Tr.fragment.sn?(Lr=Er,(Vt=Tr).elementaryStreams=Lr.elementaryStreams,Vt.stats=Lr.stats):ur--}var Lr,Vt}(He.partList,Oe.partList),gt?X(Oe,gt,gt.startPTS,gt.endPTS,gt.startDTS,gt.endDTS):te(He,Oe),en.length&&(Oe.totalduration=Oe.edge-en[0].start),Oe.driftStartTime=He.driftStartTime,Oe.driftStart=He.driftStart;var tn=Oe.advancedDateTime;if(Oe.advanced&&tn){var ei=Oe.edge;Oe.driftStart||(Oe.driftStartTime=tn,Oe.driftStart=ei),Oe.driftEndTime=tn,Oe.driftEnd=ei}else Oe.driftEndTime=He.driftEndTime,Oe.driftEnd=He.driftEnd,Oe.advancedDateTime=He.advancedDateTime}(s,o),!this.canLoad||!o.live)return;var h,v=void 0,T=void 0;if(o.canBlockReload&&o.endSN&&o.advanced){var _=this.hls.config.lowLatencyMode,R=o.lastPartSn,x=o.endSN,G=o.lastPartIndex,j=R===x;G!==-1?(v=j?x+1:R,T=j?_?0:G:G+1):v=x+1;var J=o.age,oe=J+o.ageHeader,ve=Math.min(oe-o.partTarget,1.5*o.targetduration);if(ve>0){if(s&&ve>s.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+s.tuneInGoal+" to: "+ve+" with playlist age: "+o.age),ve=0;else{var de=Math.floor(ve/o.targetduration);v+=de,T!==void 0&&(T+=Math.round(ve%o.targetduration/o.partTarget)),this.log("CDN Tune-in age: "+o.ageHeader+"s last advanced "+J.toFixed(2)+"s goal: "+ve+" skip sn "+de+" to part "+T)}o.tuneInGoal=ve}if(h=this.getDeliveryDirectives(o,r.deliveryDirectives,v,T),_||!j)return void this.loadPlaylist(h)}else h=this.getDeliveryDirectives(o,r.deliveryDirectives,v,T);var be=this.hls.mainForwardBufferInfo,je=be?be.end-be.len:0,Ye=function(He,Oe){Oe===void 0&&(Oe=1/0);var ot=1e3*He.targetduration;if(He.updated){var Et=He.fragments;if(Et.length&&4*ot>Oe){var st=1e3*Et[Et.length-1].duration;st<ot&&(ot=st)}}else ot/=2;return Math.round(ot)}(o,1e3*(o.edge-je));o.updated?l>this.requestScheduled+Ye&&(this.requestScheduled=i.loading.start):this.requestScheduled=-1,v!==void 0&&o.canBlockReload?this.requestScheduled=i.loading.first+Ye-(1e3*o.partTarget||1e3):this.requestScheduled=(this.requestScheduled===-1?l:this.requestScheduled)+Ye;var Le=this.requestScheduled-l;Le=Math.max(0,Le),this.log("reload live playlist "+t+" in "+Math.round(Le)+" ms"),this.timer=self.setTimeout(function(){return a.loadPlaylist(h)},Le)}else this.clearTimer()},f.getDeliveryDirectives=function(t,r,s,a){var o=function(i,l){var d=i.canSkipUntil,h=i.canSkipDateRanges,v=i.endSN;return d&&(l!==void 0?l-v:0)<d?h?Tt.v2:Tt.Yes:Tt.No}(t,s);return r!=null&&r.skip&&t.deltaUpdateFailed&&(s=r.msn,a=r.part,o=Tt.No),new ne(s,a,o)},f.retryLoadingOrFail=function(t){var r,s=this,a=this.hls.config,o=this.retryCount<a.levelLoadingMaxRetry;if(o)if(this.requestScheduled=-1,this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&(r=t.context)!==null&&r!==void 0&&r.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var i=Math.min(Math.pow(2,this.retryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return s.loadPlaylist()},i),this.warn("retry playlist loading #"+this.retryCount+" in "+i+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return o},p}();function Ae(){return Ae=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},Ae.apply(this,arguments)}function Fe(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function qe(p,f){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},qe(p,f)}var Be,Xe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),at=function(p){var f,t;function r(i){var l;return(l=p.call(this,i,"[level-controller]")||this)._levels=[],l._firstLevel=-1,l._startLevel=void 0,l.currentLevelIndex=-1,l.manualLevelIndex=-1,l.onParsedComplete=void 0,l._registerListeners(),l}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,qe(f,t);var s,a,o=r.prototype;return o._registerListeners=function(){var i=this.hls;i.on(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),i.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.on(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),i.on(y.Events.FRAG_LOADED,this.onFragLoaded,this),i.on(y.Events.ERROR,this.onError,this)},o._unregisterListeners=function(){var i=this.hls;i.off(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),i.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.off(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),i.off(y.Events.FRAG_LOADED,this.onFragLoaded,this),i.off(y.Events.ERROR,this.onError,this)},o.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,p.prototype.destroy.call(this)},o.startLoad=function(){this._levels.forEach(function(i){i.loadError=0}),p.prototype.startLoad.call(this)},o.onManifestLoaded=function(i,l){var d,h,v=[],T=[],_=[],R={},x=!1,G=!1,j=!1;if(l.levels.forEach(function(de){var be=de.attrs;x=x||!(!de.width||!de.height),G=G||!!de.videoCodec,j=j||!!de.audioCodec,Xe&&de.audioCodec&&de.audioCodec.indexOf("mp4a.40.34")!==-1&&(de.audioCodec=void 0);var je=de.bitrate+"-"+de.attrs.RESOLUTION+"-"+de.attrs.CODECS;(h=R[je])?h.url.push(de.url):(h=new K(de),R[je]=h,v.push(h)),be&&(be.AUDIO&&N(h,"audio",be.AUDIO),be.SUBTITLES&&N(h,"text",be.SUBTITLES))}),(x||G)&&j&&(v=v.filter(function(de){var be=de.videoCodec,je=de.width,Ye=de.height;return!!be||!(!je||!Ye)})),v=v.filter(function(de){var be=de.audioCodec,je=de.videoCodec;return(!be||Ge(be,"audio"))&&(!je||Ge(je,"video"))}),l.audioTracks&&U(T=l.audioTracks.filter(function(de){return!de.audioCodec||Ge(de.audioCodec,"audio")})),l.subtitles&&U(_=l.subtitles),v.length>0){d=v[0].bitrate,v.sort(function(de,be){return de.attrs["HDCP-LEVEL"]!==be.attrs["HDCP-LEVEL"]?(de.attrs["HDCP-LEVEL"]||"")>(be.attrs["HDCP-LEVEL"]||"")?1:-1:de.bitrate!==be.bitrate?de.bitrate-be.bitrate:de.attrs.SCORE!==be.attrs.SCORE?de.attrs.decimalFloatingPoint("SCORE")-be.attrs.decimalFloatingPoint("SCORE"):x&&de.height!==be.height?de.height-be.height:0}),this._levels=v;for(var J=0;J<v.length;J++)if(v[J].bitrate===d){this._firstLevel=J,this.log("manifest loaded, "+v.length+" level(s) found, first bitrate: "+d);break}var oe=j&&!G,ve={levels:v,audioTracks:T,subtitleTracks:_,sessionData:l.sessionData,sessionKeys:l.sessionKeys,firstLevel:this._firstLevel,stats:l.stats,audio:j,video:G,altAudio:!oe&&T.some(function(de){return!!de.url})};this.hls.trigger(y.Events.MANIFEST_PARSED,ve),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:l.url,reason:"no level with compatible codecs found in manifest"})},o.onError=function(i,l){var d,h;if(p.prototype.onError.call(this,i,l),!l.fatal){var v=l.context,T=this._levels[this.currentLevelIndex];if(v&&(v.type===O.PlaylistContextType.AUDIO_TRACK&&T.audioGroupIds&&v.groupId===T.audioGroupIds[T.urlId]||v.type===O.PlaylistContextType.SUBTITLE_TRACK&&T.textGroupIds&&v.groupId===T.textGroupIds[T.urlId]))this.redundantFailover(this.currentLevelIndex);else{var _,R=!1,x=!0;switch(l.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:case I.ErrorDetails.KEY_LOAD_ERROR:case I.ErrorDetails.KEY_LOAD_TIMEOUT:if(l.frag){var G=l.frag.type===O.PlaylistLevelType.MAIN?l.frag.level:this.currentLevelIndex,j=this._levels[G];j?(j.fragmentError++,j.fragmentError>this.hls.config.fragLoadingMaxRetry&&(_=G)):_=G}break;case I.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var J=T.attrs["HDCP-LEVEL"];J&&(this.hls.maxHdcpLevel=bt[bt.indexOf(J)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case I.ErrorDetails.FRAG_PARSING_ERROR:case I.ErrorDetails.KEY_SYSTEM_NO_SESSION:_=((d=l.frag)===null||d===void 0?void 0:d.type)===O.PlaylistLevelType.MAIN?l.frag.level:this.currentLevelIndex,l.levelRetry=!1;break;case I.ErrorDetails.LEVEL_LOAD_ERROR:case I.ErrorDetails.LEVEL_LOAD_TIMEOUT:v&&(v.deliveryDirectives&&(x=!1),_=v.level),R=!0;break;case I.ErrorDetails.REMUX_ALLOC_ERROR:_=(h=l.level)!=null?h:this.currentLevelIndex,R=!0}_!==void 0&&this.recoverLevel(l,_,R,x)}}},o.recoverLevel=function(i,l,d,h){var v=i.details,T=this._levels[l];if(T.loadError++,d){if(!this.retryLoadingOrFail(i))return void(this.currentLevelIndex=-1);i.levelRetry=!0}if(h){var _=T.url.length;if(_>1&&T.loadError<_)i.levelRetry=!0,this.redundantFailover(l);else if(this.manualLevelIndex===-1){for(var R=-1,x=this._levels,G=x.length;G--;){var j=(G+this.currentLevelIndex)%x.length;if(j!==this.currentLevelIndex&&x[j].loadError===0){R=j;break}}R>-1&&this.currentLevelIndex!==R?(this.warn(v+": switch to "+R),i.levelRetry=!0,this.hls.nextAutoLevel=R):i.levelRetry===!1&&(i.fatal=!0)}}},o.redundantFailover=function(i){var l=this._levels[i],d=l.url.length;if(d>1){var h=(l.urlId+1)%d;this.warn("Switching to redundant URL-id "+h),this._levels.forEach(function(v){v.urlId=h}),this.level=i}},o.onFragLoaded=function(i,l){var d=l.frag;if(d!==void 0&&d.type===O.PlaylistLevelType.MAIN){var h=this._levels[d.level];h!==void 0&&(h.fragmentError=0,h.loadError=0)}},o.onLevelLoaded=function(i,l){var d,h,v=l.level,T=l.details,_=this._levels[v];if(!_)return this.warn("Invalid level index "+v),void((h=l.deliveryDirectives)!==null&&h!==void 0&&h.skip&&(T.deltaUpdateFailed=!0));v===this.currentLevelIndex?(_.fragmentError===0&&(_.loadError=0,this.retryCount=0),this.playlistLoaded(v,l,_.details)):(d=l.deliveryDirectives)!==null&&d!==void 0&&d.skip&&(T.deltaUpdateFailed=!0)},o.onAudioTrackSwitched=function(i,l){var d=this.hls.levels[this.currentLevelIndex];if(d&&d.audioGroupIds){for(var h=-1,v=this.hls.audioTracks[l.id].groupId,T=0;T<d.audioGroupIds.length;T++)if(d.audioGroupIds[T]===v){h=T;break}h!==d.urlId&&(d.urlId=h,this.startLoad())}},o.loadPlaylist=function(i){p.prototype.loadPlaylist.call(this);var l=this.currentLevelIndex,d=this._levels[l];if(this.canLoad&&d&&d.url.length>0){var h=d.urlId,v=d.url[h];if(i)try{v=i.addDirectives(v)}catch(T){this.warn("Could not construct new URL with HLS Delivery Directives: "+T)}this.log("Attempt loading level index "+l+((i==null?void 0:i.msn)!==void 0?" at sn "+i.msn+" part "+i.part:"")+" with URL-id "+h+" "+v),this.clearTimer(),this.hls.trigger(y.Events.LEVEL_LOADING,{url:v,level:l,id:h,deliveryDirectives:i||null})}},o.removeLevel=function(i,l){var d=function(v,T){return T!==l},h=this._levels.filter(function(v,T){return T!==i||v.url.length>1&&l!==void 0&&(v.url=v.url.filter(d),v.audioGroupIds&&(v.audioGroupIds=v.audioGroupIds.filter(d)),v.textGroupIds&&(v.textGroupIds=v.textGroupIds.filter(d)),v.urlId=0,!0)}).map(function(v,T){var _=v.details;return _!=null&&_.fragments&&_.fragments.forEach(function(R){R.level=T}),v});this._levels=h,this.hls.trigger(y.Events.LEVELS_UPDATED,{levels:h})},s=r,(a=[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(i){var l,d=this._levels;if(d.length!==0&&(this.currentLevelIndex!==i||(l=d[i])===null||l===void 0||!l.details)){if(i<0||i>=d.length){var h=i<0;if(this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.OTHER_ERROR,details:I.ErrorDetails.LEVEL_SWITCH_ERROR,level:i,fatal:h,reason:"invalid level idx"}),h)return;i=Math.min(i,d.length-1)}this.clearTimer();var v=this.currentLevelIndex,T=d[v],_=d[i];this.log("switching to level "+i+" from "+v),this.currentLevelIndex=i;var R=Ae({},_,{level:i,maxBitrate:_.maxBitrate,uri:_.uri,urlId:_.urlId});delete R._urlId,this.hls.trigger(y.Events.LEVEL_SWITCHING,R);var x=_.details;if(!x||x.live){var G=this.switchParams(_.uri,T==null?void 0:T.details);this.loadPlaylist(G)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(i){this.manualLevelIndex=i,this._startLevel===void 0&&(this._startLevel=i),i!==-1&&(this.level=i)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(i){this._firstLevel=i}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var i=this.hls.config.startLevel;return i!==void 0?i:this._firstLevel}return this._startLevel},set:function(i){this._startLevel=i}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(i){this.level=i,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=i)}}])&&Fe(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),r}(Se);(function(p){p.NOT_LOADED="NOT_LOADED",p.APPENDING="APPENDING",p.PARTIAL="PARTIAL",p.OK="OK"})(Be||(Be={}));var ht=function(){function p(t){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var f=p.prototype;return f._registerListeners=function(){var t=this.hls;t.on(y.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(y.Events.FRAG_LOADED,this.onFragLoaded,this)},f._unregisterListeners=function(){var t=this.hls;t.off(y.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(y.Events.FRAG_LOADED,this.onFragLoaded,this)},f.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},f.getAppendedFrag=function(t,r){if(r===O.PlaylistLevelType.MAIN){var s=this.activeFragment,a=this.activeParts;if(!s)return null;if(a)for(var o=a.length;o--;){var i=a[o],l=i?i.end:s.appendedPTS;if(i.start<=t&&l!==void 0&&t<=l)return o>9&&(this.activeParts=a.slice(o-9)),i}else if(s.start<=t&&s.appendedPTS!==void 0&&t<=s.appendedPTS)return s}return this.getBufferedFrag(t,r)},f.getBufferedFrag=function(t,r){for(var s=this.fragments,a=Object.keys(s),o=a.length;o--;){var i=s[a[o]];if((i==null?void 0:i.body.type)===r&&i.buffered){var l=i.body;if(l.start<=t&&t<=l.end)return l}}return null},f.detectEvictedFragments=function(t,r,s){var a=this;this.timeRanges&&(this.timeRanges[t]=r),Object.keys(this.fragments).forEach(function(o){var i=a.fragments[o];if(i)if(i.buffered||i.loaded){var l=i.range[t];l&&l.time.some(function(d){var h=!a.isTimeBuffered(d.startPTS,d.endPTS,r);return h&&a.removeFragment(i.body),h})}else i.body.type===s&&a.removeFragment(i.body)})},f.detectPartialFragments=function(t){var r=this,s=this.timeRanges,a=t.frag,o=t.part;if(s&&a.sn!=="initSegment"){var i=vt(a),l=this.fragments[i];l&&(Object.keys(s).forEach(function(d){var h=a.elementaryStreams[d];if(h){var v=s[d],T=o!==null||h.partial===!0;l.range[d]=r.getBufferedTimes(a,o,T,v)}}),l.loaded=null,Object.keys(l.range).length?(l.buffered=!0,l.body.endList&&(this.endListFragments[l.body.type]=l)):this.removeFragment(l.body))}},f.fragBuffered=function(t){var r=vt(t),s=this.fragments[r];s&&(s.loaded=null,s.buffered=!0)},f.getBufferedTimes=function(t,r,s,a){for(var o={time:[],partial:s},i=r?r.start:t.start,l=r?r.end:t.end,d=t.minEndPTS||l,h=t.maxStartPTS||i,v=0;v<a.length;v++){var T=a.start(v)-this.bufferPadding,_=a.end(v)+this.bufferPadding;if(h>=T&&d<=_){o.time.push({startPTS:Math.max(i,a.start(v)),endPTS:Math.min(l,a.end(v))});break}if(i<_&&l>T)o.partial=!0,o.time.push({startPTS:Math.max(i,a.start(v)),endPTS:Math.min(l,a.end(v))});else if(l<=T)break}return o},f.getPartialFragment=function(t){var r,s,a,o=null,i=0,l=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach(function(h){var v=d[h];v&&ze(v)&&(s=v.body.start-l,a=v.body.end+l,t>=s&&t<=a&&(r=Math.min(t-s,a-t),i<=r&&(o=v.body,i=r)))}),o},f.isEndListAppended=function(t){var r=this.endListFragments[t];return r!==void 0&&(r.buffered||ze(r))},f.getState=function(t){var r=vt(t),s=this.fragments[r];return s?s.buffered?ze(s)?Be.PARTIAL:Be.OK:Be.APPENDING:Be.NOT_LOADED},f.isTimeBuffered=function(t,r,s){for(var a,o,i=0;i<s.length;i++){if(a=s.start(i)-this.bufferPadding,o=s.end(i)+this.bufferPadding,t>=a&&r<=o)return!0;if(r<=a)return!1}return!1},f.onFragLoaded=function(t,r){var s=r.frag,a=r.part;if(s.sn!=="initSegment"&&!s.bitrateTest&&!a){var o=vt(s);this.fragments[o]={body:s,loaded:r,buffered:!1,range:Object.create(null)}}},f.onBufferAppended=function(t,r){var s=this,a=r.frag,o=r.part,i=r.timeRanges;if(a.type===O.PlaylistLevelType.MAIN)if(this.activeFragment!==a&&(this.activeFragment=a,a.appendedPTS=void 0),o){var l=this.activeParts;l||(this.activeParts=l=[]),l.push(o)}else this.activeParts=null;this.timeRanges=i,Object.keys(i).forEach(function(d){var h=i[d];if(s.detectEvictedFragments(d,h),!o&&a.type===O.PlaylistLevelType.MAIN){var v=a.elementaryStreams[d];if(!v)return;for(var T=0;T<h.length;T++){var _=h.end(T);_<=v.endPTS&&_>v.startPTS?a.appendedPTS=Math.max(_,a.appendedPTS||0):a.appendedPTS=v.endPTS}}})},f.onFragBuffered=function(t,r){this.detectPartialFragments(r)},f.hasFragment=function(t){var r=vt(t);return!!this.fragments[r]},f.removeFragmentsInRange=function(t,r,s){var a=this;Object.keys(this.fragments).forEach(function(o){var i=a.fragments[o];if(i&&i.buffered){var l=i.body;l.type===s&&l.start<r&&l.end>t&&a.removeFragment(l)}})},f.removeFragment=function(t){var r=vt(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),t.appendedPTS=void 0,delete this.fragments[r],t.endList&&delete this.endListFragments[t.type]},f.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},p}();function ze(p){var f,t;return p.buffered&&(((f=p.range.video)===null||f===void 0?void 0:f.partial)||((t=p.range.audio)===null||t===void 0?void 0:t.partial))}function vt(p){return p.type+"_"+p.level+"_"+p.urlId+"_"+p.sn}function Ot(p){var f=typeof Map=="function"?new Map:void 0;return Ot=function(t){if(t===null||(r=t,Function.toString.call(r).indexOf("[native code]")===-1))return t;var r;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(t))return f.get(t);f.set(t,s)}function s(){return yt(t,arguments,Qe(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Rt(s,t)},Ot(p)}function yt(p,f,t){return yt=Ft()?Reflect.construct.bind():function(r,s,a){var o=[null];o.push.apply(o,s);var i=new(Function.bind.apply(r,o));return a&&Rt(i,a.prototype),i},yt.apply(null,arguments)}function Ft(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rt(p,f){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Rt(p,f)}function Qe(p){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},Qe(p)}var Kt=Math.pow(2,17),ar=function(){function p(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var f=p.prototype;return f.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},f.abort=function(){this.loader&&this.loader.abort()},f.load=function(t,r){var s=this,a=t.url;if(!a)return Promise.reject(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(a?"part list":"url")));this.abort();var o=this.config,i=o.fLoader,l=o.loader;return new Promise(function(d,h){s.loader&&s.loader.destroy();var v=s.loader=t.loader=i?new i(o):new l(o),T=St(t),_={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout,highWaterMark:t.sn==="initSegment"?1/0:Kt};t.stats=v.stats,v.load(T,_,{onSuccess:function(R,x,G,j){s.resetLoader(t,v);var J=R.data;G.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(J.slice(0,16)),J=J.slice(16)),d({frag:t,part:null,payload:J,networkDetails:j})},onError:function(R,x,G){s.resetLoader(t,v),h(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:R,networkDetails:G}))},onAbort:function(R,x,G){s.resetLoader(t,v),h(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:G}))},onTimeout:function(R,x,G){s.resetLoader(t,v),h(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:G}))},onProgress:function(R,x,G,j){r&&r({frag:t,part:null,payload:G,networkDetails:j})}})})},f.loadPart=function(t,r,s){var a=this;this.abort();var o=this.config,i=o.fLoader,l=o.loader;return new Promise(function(d,h){a.loader&&a.loader.destroy();var v=a.loader=t.loader=i?new i(o):new l(o),T=St(t,r),_={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout,highWaterMark:Kt};r.stats=v.stats,v.load(T,_,{onSuccess:function(R,x,G,j){a.resetLoader(t,v),a.updateStatsFromPart(t,r);var J={frag:t,part:r,payload:R.data,networkDetails:j};s(J),d(J)},onError:function(R,x,G){a.resetLoader(t,v),h(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:r,response:R,networkDetails:G}))},onAbort:function(R,x,G){t.stats.aborted=r.stats.aborted,a.resetLoader(t,v),h(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,part:r,networkDetails:G}))},onTimeout:function(R,x,G){a.resetLoader(t,v),h(new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:r,networkDetails:G}))}})})},f.updateStatsFromPart=function(t,r){var s=t.stats,a=r.stats,o=a.total;if(s.loaded+=a.loaded,o){var i=Math.round(t.duration/r.duration),l=Math.min(Math.round(s.loaded/o),i),d=(i-l)*Math.round(s.loaded/l);s.total=s.loaded+d}else s.total=Math.max(s.loaded,s.total);var h=s.loading,v=a.loading;h.start?h.first+=v.first-v.start:(h.start=v.start,h.first=v.first),h.end=v.end},f.resetLoader=function(t,r){t.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()},p}();function St(p,f){f===void 0&&(f=null);var t=f||p,r={frag:p,part:f,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,a=t.byteRangeEndOffset;if((0,A.isFiniteNumber)(s)&&(0,A.isFiniteNumber)(a)){var o,i=s,l=a;if(p.sn==="initSegment"&&((o=p.decryptdata)===null||o===void 0?void 0:o.method)==="AES-128"){var d=a-s;d%16&&(l=a+(16-d%16)),s!==0&&(r.resetIV=!0,i=s-16)}r.rangeStart=i,r.rangeEnd=l}return r}var Mt=function(p){var f,t;function r(s){for(var a,o=arguments.length,i=new Array(o>1?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];return(a=p.call.apply(p,[this].concat(i))||this).data=void 0,a.data=s,a}return t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,Rt(f,t),r}(Ot(Error)),or=function(){function p(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}var f=p.prototype;return f.abort=function(){for(var t in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[t].loader;r&&r.abort()}},f.detach=function(){for(var t in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[t];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}},f.destroy=function(){for(var t in this.detach(),this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[t].loader;r&&r.destroy()}this.keyUriToKeyInfo={}},f.createKeyLoadError=function(t,r,s,a){return r===void 0&&(r=I.ErrorDetails.KEY_LOAD_ERROR),new Mt({type:I.ErrorTypes.NETWORK_ERROR,details:r,fatal:!1,frag:t,networkDetails:s})},f.loadClear=function(t,r){var s=this;if(this.emeController&&this.config.emeEnabled)for(var a=t.sn,o=t.cc,i=function(d){var h=r[d];if(o<=h.cc&&(a==="initSegment"||a<h.sn))return s.emeController.selectKeySystemFormat(h).then(function(v){h.setKeyFormat(v)}),"break"},l=0;l<r.length&&i(l)!=="break";l++);},f.load=function(t){var r=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then(function(s){return r.loadInternal(t,s)}):this.loadInternal(t)},f.loadInternal=function(t,r){var s,a;r&&t.setKeyFormat(r);var o=t.decryptdata;if(!o){var i=r?"Expected frag.decryptdata to be defined after setting format "+r:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(t,I.ErrorDetails.KEY_LOAD_ERROR,null,i))}var l=o.uri;if(!l)return Promise.reject(this.createKeyLoadError(t,I.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+l+'"'));var d,h=this.keyUriToKeyInfo[l];if((s=h)!==null&&s!==void 0&&s.decryptdata.key)return o.key=h.decryptdata.key,Promise.resolve({frag:t,keyInfo:h});if((a=h)!==null&&a!==void 0&&a.keyLoadPromise)switch((d=h.mediaKeySessionContext)===null||d===void 0?void 0:d.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return h.keyLoadPromise.then(function(v){return o.key=v.keyInfo.decryptdata.key,{frag:t,keyInfo:h}})}switch(h=this.keyUriToKeyInfo[l]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(h,t):this.loadKeyEME(h,t);case"AES-128":return this.loadKeyHTTP(h,t);default:return Promise.reject(this.createKeyLoadError(t,I.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+o.method+'"'))}},f.loadKeyEME=function(t,r){var s={frag:r,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var a=this.emeController.loadKey(s);if(a)return(t.keyLoadPromise=a.then(function(o){return t.mediaKeySessionContext=o,s})).catch(function(o){throw t.keyLoadPromise=null,o})}return Promise.resolve(s)},f.loadKeyHTTP=function(t,r){var s=this,a=this.config,o=new a.loader(a);return r.keyLoader=t.loader=o,t.keyLoadPromise=new Promise(function(i,l){var d={keyInfo:t,frag:r,responseType:"arraybuffer",url:t.decryptdata.uri},h={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:0},v={onSuccess:function(T,_,R,x){var G=R.frag,j=R.keyInfo,J=R.url;if(!G.decryptdata||j!==s.keyUriToKeyInfo[J])return l(s.createKeyLoadError(G,I.ErrorDetails.KEY_LOAD_ERROR,x,"after key load, decryptdata unset or changed"));j.decryptdata.key=G.decryptdata.key=new Uint8Array(T.data),G.keyLoader=null,j.loader=null,i({frag:G,keyInfo:j})},onError:function(T,_,R){s.resetLoader(_),l(s.createKeyLoadError(r,I.ErrorDetails.KEY_LOAD_ERROR,R))},onTimeout:function(T,_,R){s.resetLoader(_),l(s.createKeyLoadError(r,I.ErrorDetails.KEY_LOAD_TIMEOUT,R))},onAbort:function(T,_,R){s.resetLoader(_),l(s.createKeyLoadError(r,I.ErrorDetails.INTERNAL_ABORTED,R))}};o.load(d,h,v)})},f.resetLoader=function(t){var r=t.frag,s=t.keyInfo,a=t.url,o=s.loader;r.keyLoader===o&&(r.keyLoader=null,s.loader=null),delete this.keyUriToKeyInfo[a],o&&o.destroy()},p}(),Nr=function(){function p(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var f=p.prototype;return f.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},f.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},f.onHandlerDestroyed=function(){},f.hasInterval=function(){return!!this._tickInterval},f.hasNextTick=function(){return!!this._tickTimer},f.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},f.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},f.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},f.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},f.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},f.doTick=function(){},p}(),gr={length:0,start:function(){return 0},end:function(){return 0}},_t=function(){function p(){}return p.isBuffered=function(f,t){try{if(f){for(var r=p.getBuffered(f),s=0;s<r.length;s++)if(t>=r.start(s)&&t<=r.end(s))return!0}}catch{}return!1},p.bufferInfo=function(f,t,r){try{if(f){var s,a=p.getBuffered(f),o=[];for(s=0;s<a.length;s++)o.push({start:a.start(s),end:a.end(s)});return this.bufferedInfo(o,t,r)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}},p.bufferedInfo=function(f,t,r){t=Math.max(0,t),f.sort(function(x,G){return x.start-G.start||G.end-x.end});var s=[];if(r)for(var a=0;a<f.length;a++){var o=s.length;if(o){var i=s[o-1].end;f[a].start-i<r?f[a].end>i&&(s[o-1].end=f[a].end):s.push(f[a])}else s.push(f[a])}else s=f;for(var l,d=0,h=t,v=t,T=0;T<s.length;T++){var _=s[T].start,R=s[T].end;if(t+r>=_&&t<R)h=_,d=(v=R)-t;else if(t+r<_){l=_;break}}return{len:d,start:h||0,end:v||0,nextStart:l}},p.getBuffered=function(f){try{return f.buffered}catch(t){return k.logger.log("failed to get media.buffered",t),gr}},p}(),Hi=function(p,f,t,r,s,a){r===void 0&&(r=0),s===void 0&&(s=-1),a===void 0&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=p,this.sn=f,this.id=t,this.size=r,this.part=s,this.partial=a};function Ca(p,f){for(var t=null,r=0,s=p.length;r<s;r++){var a=p[r];if(a&&a.cc===f){t=a;break}}return t}function xa(p,f){if(p){var t=p.start+f;p.start=p.startPTS=t,p.endPTS=t+p.duration}}function Ki(p,f){for(var t=f.fragments,r=0,s=t.length;r<s;r++)xa(t[r],p);f.fragmentHint&&xa(f.fragmentHint,p),f.alignedSliding=!0}function Pa(p,f){if(p.hasProgramDateTime&&f.hasProgramDateTime){var t=p.fragments,r=f.fragments;if(t.length&&r.length){var s=r[Math.round(r.length/2)-1],a=Ca(t,s.cc)||t[Math.round(t.length/2)-1],o=s.programDateTime,i=a.programDateTime;o!==null&&i!==null&&Ki((i-o)/1e3-(a.start-s.start),p)}}}const Oa=function(p,f){for(var t=0,r=p.length-1,s=null,a=null;t<=r;){var o=f(a=p[s=(t+r)/2|0]);if(o>0)t=s+1;else{if(!(o<0))return a;r=s-1}}return null};function ji(p,f,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var s=null;if(p?s=f[p.sn-f[0].sn+1]||null:t===0&&f[0].start===0&&(s=f[0]),s&&Gi(t,r,s)===0)return s;var a=Oa(f,Gi.bind(null,t,r));return!a||a===p&&s?s:a}function Gi(p,f,t){if(p===void 0&&(p=0),f===void 0&&(f=0),t.start<=p&&t.start+t.duration>p)return 0;var r=Math.min(f,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=p?1:t.start-r>p&&t.start?-1:0}function Fu(p,f,t){var r=1e3*Math.min(f,t.duration+(t.deltaPTS?t.deltaPTS:0));return(t.endProgramDateTime||0)-r>p}var Mu=b(21);const Nu=function(p){for(var f="",t=p.length,r=0;r<t;r++)f+="["+p.start(r).toFixed(3)+"-"+p.end(r).toFixed(3)+"]";return f};function Uu(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function Vi(p,f){return Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Vi(p,f)}var er="STOPPED",ut="IDLE",Wi="KEY_LOADING",Xr="FRAG_LOADING",Qr="FRAG_LOADING_WAITING_RETRY",qn="WAITING_TRACK",lr="PARSING",Sn="PARSED",_n="ENDED",pr="ERROR",An="WAITING_INIT_PTS",Jr="WAITING_LEVEL",Yi=function(p){var f,t;function r(i,l,d,h){var v;return(v=p.call(this)||this).hls=void 0,v.fragPrevious=null,v.fragCurrent=null,v.fragmentTracker=void 0,v.transmuxer=null,v._state=er,v.media=null,v.mediaBuffer=null,v.config=void 0,v.bitrateTest=!1,v.lastCurrentTime=0,v.nextLoadPosition=0,v.startPosition=0,v.loadedmetadata=!1,v.fragLoadError=0,v.retryDate=0,v.levels=null,v.fragmentLoader=void 0,v.keyLoader=void 0,v.levelLastLoaded=null,v.startFragRequested=!1,v.decrypter=void 0,v.initPTS=[],v.onvseeking=null,v.onvended=null,v.logPrefix="",v.log=void 0,v.warn=void 0,v.logPrefix=h,v.log=k.logger.log.bind(k.logger,h+":"),v.warn=k.logger.warn.bind(k.logger,h+":"),v.hls=i,v.fragmentLoader=new ar(i.config),v.keyLoader=d,v.fragmentTracker=l,v.config=i.config,v.decrypter=new Mu.default(i.config),i.on(y.Events.LEVEL_SWITCHING,v.onLevelSwitching,function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(v)),v}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,Vi(f,t);var s,a,o=r.prototype;return o.doTick=function(){this.onTickEnd()},o.onTickEnd=function(){},o.startLoad=function(i){},o.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var i=this.fragCurrent;i&&(i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=er},o._streamEnded=function(i,l){if(l.live||i.nextStart||!i.end||!this.media)return!1;var d=l.partList;if(d!=null&&d.length){var h=d[d.length-1];return _t.isBuffered(this.media,h.start+h.duration/2)}var v=l.fragments[l.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(v)},o.getLevelDetails=function(){var i;if(this.levels&&this.levelLastLoaded!==null)return(i=this.levels[this.levelLastLoaded])===null||i===void 0?void 0:i.details},o.onMediaAttached=function(i,l){var d=this.media=this.mediaBuffer=l.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),d.addEventListener("seeking",this.onvseeking),d.addEventListener("ended",this.onvended);var h=this.config;this.levels&&h.autoStartLoad&&this.state===er&&this.startLoad(h.startPosition)},o.onMediaDetaching=function(){var i=this.media;i!=null&&i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i&&this.onvseeking&&this.onvended&&(i.removeEventListener("seeking",this.onvseeking),i.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},o.onMediaSeeking=function(){var i=this.config,l=this.fragCurrent,d=this.media,h=this.mediaBuffer,v=this.state,T=d?d.currentTime:0,_=_t.bufferInfo(h||d,T,i.maxBufferHole);if(this.log("media seeking to "+((0,A.isFiniteNumber)(T)?T.toFixed(3):T)+", state: "+v),this.state===_n)this.resetLoadingState();else if(l){var R=i.maxFragLookUpTolerance,x=l.start-R,G=l.start+l.duration+R;if(!_.len||G<_.start||x>_.end){var j=T>G;(T<x||j)&&(j&&l.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),l.abortRequests()),this.resetLoadingState())}}d&&(this.lastCurrentTime=T),this.loadedmetadata||_.len||(this.nextLoadPosition=this.startPosition=T),this.tickImmediate()},o.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},o.onLevelSwitching=function(i,l){this.fragLoadError=0},o.onHandlerDestroying=function(){this.stopLoad(),p.prototype.onHandlerDestroying.call(this)},o.onHandlerDestroyed=function(){this.state=er,this.hls.off(y.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,p.prototype.onHandlerDestroyed.call(this)},o.loadFragment=function(i,l,d){this._loadFragForPlayback(i,l,d)},o._loadFragForPlayback=function(i,l,d){var h=this;this._doFragLoad(i,l,d,function(v){if(h.fragContextChanged(i))return h.warn("Fragment "+i.sn+(v.part?" p: "+v.part.index:"")+" of level "+i.level+" was dropped during download."),void h.fragmentTracker.removeFragment(i);i.stats.chunkCount++,h._handleFragmentLoadProgress(v)}).then(function(v){if(v){h.fragLoadError=0;var T=h.state;h.fragContextChanged(i)?(T===Xr||!h.fragCurrent&&T===lr)&&(h.fragmentTracker.removeFragment(i),h.state=ut):("payload"in v&&(h.log("Loaded fragment "+i.sn+" of level "+i.level),h.hls.trigger(y.Events.FRAG_LOADED,v)),h._handleFragmentLoadComplete(v))}}).catch(function(v){h.state!==er&&h.state!==pr&&(h.warn(v),h.resetFragmentLoading(i))})},o.flushMainBuffer=function(i,l,d){if(d===void 0&&(d=null),i-l){var h={startOffset:i,endOffset:l,type:d};this.fragLoadError=0,this.hls.trigger(y.Events.BUFFER_FLUSHING,h)}},o._loadInitSegment=function(i,l){var d=this;this._doFragLoad(i,l).then(function(h){if(!h||d.fragContextChanged(i)||!d.levels)throw new Error("init load aborted");return h}).then(function(h){var v=d.hls,T=h.payload,_=i.decryptdata;if(T&&T.byteLength>0&&_&&_.key&&_.iv&&_.method==="AES-128"){var R=self.performance.now();return d.decrypter.decrypt(new Uint8Array(T),_.key.buffer,_.iv.buffer).then(function(x){var G=self.performance.now();return v.trigger(y.Events.FRAG_DECRYPTED,{frag:i,payload:x,stats:{tstart:R,tdecrypt:G}}),h.payload=x,h})}return h}).then(function(h){var v=d.fragCurrent,T=d.hls,_=d.levels;if(!_)throw new Error("init load aborted, missing levels");_[i.level].details;var R=i.stats;d.state=ut,d.fragLoadError=0,i.data=new Uint8Array(h.payload),R.parsing.start=R.buffering.start=self.performance.now(),R.parsing.end=R.buffering.end=self.performance.now(),h.frag===v&&T.trigger(y.Events.FRAG_BUFFERED,{stats:R,frag:v,part:null,id:i.type}),d.tick()}).catch(function(h){d.state!==er&&d.state!==pr&&(d.warn(h),d.resetFragmentLoading(i))})},o.fragContextChanged=function(i){var l=this.fragCurrent;return!i||!l||i.level!==l.level||i.sn!==l.sn||i.urlId!==l.urlId},o.fragBufferedComplete=function(i,l){var d,h,v,T,_=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+i.type+" sn: "+i.sn+(l?" part: "+l.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+i.level+" (frag:["+((d=i.startPTS)!=null?d:NaN).toFixed(3)+"-"+((h=i.endPTS)!=null?h:NaN).toFixed(3)+"] > buffer:"+(_?Nu(_t.getBuffered(_)):"(detached)")+")"),this.state=ut,_&&(!this.loadedmetadata&&i.type==O.PlaylistLevelType.MAIN&&_.buffered.length&&((v=this.fragCurrent)===null||v===void 0?void 0:v.sn)===((T=this.fragPrevious)===null||T===void 0?void 0:T.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},o.seekToStartPos=function(){},o._handleFragmentLoadComplete=function(i){var l=this.transmuxer;if(l){var d=i.frag,h=i.part,v=i.partsLoaded,T=!v||v.length===0||v.some(function(R){return!R}),_=new Hi(d.level,d.sn,d.stats.chunkCount+1,0,h?h.index:-1,!T);l.flush(_)}},o._handleFragmentLoadProgress=function(i){},o._doFragLoad=function(i,l,d,h){var v,T=this;if(d===void 0&&(d=null),!this.levels)throw new Error("frag load aborted, missing levels");var _=null;if(!i.encrypted||(v=i.decryptdata)!==null&&v!==void 0&&v.key?!i.encrypted&&l.encryptedFragments.length&&this.keyLoader.loadClear(i,l.encryptedFragments):(this.log("Loading key for "+i.sn+" of ["+l.startSN+"-"+l.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+i.level),this.state=Wi,this.fragCurrent=i,_=this.keyLoader.load(i).then(function(J){if(!T.fragContextChanged(J.frag))return T.hls.trigger(y.Events.KEY_LOADED,J),T.state===Wi&&(T.state=ut),J}),this.hls.trigger(y.Events.KEY_LOADING,{frag:i}),this.throwIfFragContextChanged("KEY_LOADING")),d=Math.max(i.start,d||0),this.config.lowLatencyMode&&l){var R=l.partList;if(R&&h){d>i.end&&l.fragmentHint&&(i=l.fragmentHint);var x=this.getNextPart(R,i,d);if(x>-1){var G=R[x];return this.log("Loading part sn: "+i.sn+" p: "+G.index+" cc: "+i.cc+" of playlist ["+l.startSN+"-"+l.endSN+"] parts [0-"+x+"-"+(R.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+i.level+", target: "+parseFloat(d.toFixed(3))),this.nextLoadPosition=G.start+G.duration,this.state=Xr,this.hls.trigger(y.Events.FRAG_LOADING,{frag:i,part:R[x],targetBufferTime:d}),this.throwIfFragContextChanged("FRAG_LOADING parts"),_?_.then(function(J){return!J||T.fragContextChanged(J.frag)?null:T.doFragPartsLoad(i,R,x,h)}).catch(function(J){return T.handleFragLoadError(J)}):this.doFragPartsLoad(i,R,x,h).catch(function(J){return T.handleFragLoadError(J)})}if(!i.url||this.loadedEndOfParts(R,d))return Promise.resolve(null)}}this.log("Loading fragment "+i.sn+" cc: "+i.cc+" "+(l?"of ["+l.startSN+"-"+l.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+i.level+", target: "+parseFloat(d.toFixed(3))),(0,A.isFiniteNumber)(i.sn)&&!this.bitrateTest&&(this.nextLoadPosition=i.start+i.duration),this.state=Xr,this.hls.trigger(y.Events.FRAG_LOADING,{frag:i,targetBufferTime:d}),this.throwIfFragContextChanged("FRAG_LOADING");var j=this.config.progressive;return j&&_?_.then(function(J){return!J||T.fragContextChanged(J==null?void 0:J.frag)?null:T.fragmentLoader.load(i,h)}).catch(function(J){return T.handleFragLoadError(J)}):Promise.all([this.fragmentLoader.load(i,j?h:void 0),_]).then(function(J){var oe=J[0];return!j&&oe&&h&&h(oe),oe}).catch(function(J){return T.handleFragLoadError(J)})},o.throwIfFragContextChanged=function(i){if(this.fragCurrent===null)throw new Error("frag load aborted, context changed in "+i)},o.doFragPartsLoad=function(i,l,d,h){var v=this;return new Promise(function(T,_){var R=[];(function x(G){var j=l[G];v.fragmentLoader.loadPart(i,j,h).then(function(J){R[j.index]=J;var oe=J.part;v.hls.trigger(y.Events.FRAG_LOADED,J);var ve=l[G+1];if(!ve||ve.fragment!==i)return T({frag:i,part:oe,partsLoaded:R});x(G+1)}).catch(_)})(d)})},o.handleFragLoadError=function(i){if("data"in i){var l=i.data;i.data&&l.details===I.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(l.frag,l.part):this.hls.trigger(y.Events.ERROR,l)}else this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.OTHER_ERROR,details:I.ErrorDetails.INTERNAL_EXCEPTION,err:i,fatal:!0});return null},o._handleTransmuxerFlush=function(i){var l=this.getCurrentContext(i);if(l&&this.state===lr){var d=l.frag,h=l.part,v=l.level,T=self.performance.now();d.stats.parsing.end=T,h&&(h.stats.parsing.end=T),this.updateLevelTiming(d,h,v,i.partial)}else this.fragCurrent||this.state===er||this.state===pr||(this.state=ut)},o.getCurrentContext=function(i){var l=this.levels,d=i.level,h=i.sn,v=i.part;if(!l||!l[d])return this.warn("Levels object was unset while buffering fragment "+h+" of level "+d+". The current chunk will not be buffered."),null;var T=l[d],_=v>-1?function(x,G,j){if(!x||!x.details)return null;var J=x.details.partList;if(J)for(var oe=J.length;oe--;){var ve=J[oe];if(ve.index===j&&ve.fragment.sn===G)return ve}return null}(T,h,v):null,R=_?_.fragment:function(x,G,j){if(!x||!x.details)return null;var J=x.details,oe=J.fragments[G-J.startSN];return oe||((oe=J.fragmentHint)&&oe.sn===G?oe:G<J.startSN&&j&&j.sn===G?j:null)}(T,h,this.fragCurrent);return R?{frag:R,part:_,level:T}:null},o.bufferFragmentData=function(i,l,d,h){if(i&&this.state===lr){var v=i.data1,T=i.data2,_=v;if(v&&T&&(_=(0,he.appendUint8Array)(v,T)),_&&_.length){var R={type:i.type,frag:l,part:d,chunkMeta:h,parent:l.type,data:_};this.hls.trigger(y.Events.BUFFER_APPENDING,R),i.dropped&&i.independent&&!d&&this.flushBufferGap(l)}}},o.flushBufferGap=function(i){var l=this.media;if(l)if(_t.isBuffered(l,l.currentTime)){var d=l.currentTime,h=_t.bufferInfo(l,d,0),v=i.duration,T=Math.min(2*this.config.maxFragLookUpTolerance,.25*v),_=Math.max(Math.min(i.start-T,h.end-T),d+T);i.start-_>T&&this.flushMainBuffer(_,i.start)}else this.flushMainBuffer(0,i.start)},o.getFwdBufferInfo=function(i,l){var d=this.config,h=this.getLoadPosition();if(!(0,A.isFiniteNumber)(h))return null;var v=_t.bufferInfo(i,h,d.maxBufferHole);if(v.len===0&&v.nextStart!==void 0){var T=this.fragmentTracker.getBufferedFrag(h,l);if(T&&v.nextStart<T.end)return _t.bufferInfo(i,h,Math.max(v.nextStart,d.maxBufferHole))}return v},o.getMaxBufferLength=function(i){var l,d=this.config;return l=i?Math.max(8*d.maxBufferSize/i,d.maxBufferLength):d.maxBufferLength,Math.min(l,d.maxMaxBufferLength)},o.reduceMaxBufferLength=function(i){var l=this.config,d=i||l.maxBufferLength;return l.maxMaxBufferLength>=d&&(l.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+l.maxMaxBufferLength+"s"),!0)},o.getNextFragment=function(i,l){var d=l.fragments,h=d.length;if(!h)return null;var v,T=this.config,_=d[0].start;if(l.live){var R=T.initialLiveManifestSize;if(h<R)return this.warn("Not enough fragments to start playback (have: "+h+", need: "+R+")"),null;l.PTSKnown||this.startFragRequested||this.startPosition!==-1||(v=this.getInitialLiveFragment(l,d),this.startPosition=v?this.hls.liveSyncPosition||v.start:i)}else i<=_&&(v=d[0]);if(!v){var x=T.lowLatencyMode?l.partEnd:l.fragmentEnd;v=this.getFragmentAtPosition(i,x,l)}return this.mapToInitFragWhenRequired(v)},o.mapToInitFragWhenRequired=function(i){return i==null||!i.initSegment||i!=null&&i.initSegment.data||this.bitrateTest?i:i.initSegment},o.getNextPart=function(i,l,d){for(var h=-1,v=!1,T=!0,_=0,R=i.length;_<R;_++){var x=i[_];if(T=T&&!x.independent,h>-1&&d<x.start)break;var G=x.loaded;G?h=-1:(v||x.independent||T)&&x.fragment===l&&(h=_),v=G}return h},o.loadedEndOfParts=function(i,l){var d=i[i.length-1];return d&&l>d.start&&d.loaded},o.getInitialLiveFragment=function(i,l){var d=this.fragPrevious,h=null;if(d){if(i.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+d.programDateTime),h=function(R,x,G){if(x===null||!Array.isArray(R)||!R.length||!(0,A.isFiniteNumber)(x)||x<(R[0].programDateTime||0)||x>=(R[R.length-1].endProgramDateTime||0))return null;G=G||0;for(var j=0;j<R.length;++j){var J=R[j];if(Fu(x,G,J))return J}return null}(l,d.endProgramDateTime,this.config.maxFragLookUpTolerance)),!h){var v=d.sn+1;if(v>=i.startSN&&v<=i.endSN){var T=l[v-i.startSN];d.cc===T.cc&&(h=T,this.log("Live playlist, switching playlist, load frag with next SN: "+h.sn))}h||(h=function(R,x){return Oa(R,function(G){return G.cc<x?1:G.cc>x?-1:0})}(l,d.cc),h&&this.log("Live playlist, switching playlist, load frag with same CC: "+h.sn))}}else{var _=this.hls.liveSyncPosition;_!==null&&(h=this.getFragmentAtPosition(_,this.bitrateTest?i.fragmentEnd:i.edge,i))}return h},o.getFragmentAtPosition=function(i,l,d){var h,v=this.config,T=this.fragPrevious,_=d.fragments,R=d.endSN,x=d.fragmentHint,G=v.maxFragLookUpTolerance,j=!!(v.lowLatencyMode&&d.partList&&x);if(j&&x&&!this.bitrateTest&&(_=_.concat(x),R=x.sn),h=i<l?ji(T,_,i,i>l-G?0:G):_[_.length-1]){var J=h.sn-d.startSN;if(this.fragmentTracker.getState(h)===Be.OK&&(T=h),T&&h.sn===T.sn&&!j&&T&&h.level===T.level){var oe=_[J+1];h.sn<R&&this.fragmentTracker.getState(oe)!==Be.OK?(this.log("SN "+h.sn+" just loaded, load next one: "+oe.sn),h=oe):h=null}}return h},o.synchronizeToLiveEdge=function(i){var l=this.config,d=this.media;if(d){var h=this.hls.liveSyncPosition,v=d.currentTime,T=i.fragments[0].start,_=i.edge,R=v>=T-l.maxFragLookUpTolerance&&v<=_;if(h!==null&&d.duration>h&&(v<h||!R)){var x=l.liveMaxLatencyDuration!==void 0?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*i.targetduration;(!R&&d.readyState<4||v<_-x)&&(this.loadedmetadata||(this.nextLoadPosition=h),d.readyState&&(this.warn("Playback: "+v.toFixed(3)+" is located too far from the end of live sliding playlist: "+_+", reset currentTime to : "+h.toFixed(3)),d.currentTime=h))}}},o.alignPlaylists=function(i,l){var d=this.levels,h=this.levelLastLoaded,v=this.fragPrevious,T=h!==null?d[h]:null,_=i.fragments.length;if(!_)return this.warn("No fragments in live playlist"),0;var R=i.fragments[0].start,x=!l,G=i.alignedSliding&&(0,A.isFiniteNumber)(R);if(x||!G&&!R){(function(J,oe,ve){oe&&(function(de,be,je){if(function(Le,He,Oe){return!(!He.details||!(Oe.endCC>Oe.startCC||Le&&Le.cc<Oe.startCC))}(de,je,be)){var Ye=function(Le,He,Oe){var ot=Le.fragments,Et=He.fragments;if(Et.length&&ot.length){var st=Ca(ot,Et[0].cc);if(st&&(!st||st.startPTS))return st;k.logger.log("No frag in previous level to align on")}else k.logger.log("No fragments to align")}(je.details,be);Ye&&(0,A.isFiniteNumber)(Ye.start)&&(k.logger.log("Adjusting PTS using last level due to CC increase within current level "+be.url),Ki(Ye.start,be))}}(J,ve,oe),!ve.alignedSliding&&oe.details&&function(de,be){if(be.fragments.length&&de.hasProgramDateTime&&be.hasProgramDateTime){var je=be.fragments[0].programDateTime,Ye=de.fragments[0].programDateTime,Le=(Ye-je)/1e3+be.fragments[0].start;Le&&(0,A.isFiniteNumber)(Le)&&(k.logger.log("Adjusting PTS using programDateTime delta "+(Ye-je)+"ms, sliding:"+Le.toFixed(3)+" "+de.url+" "),Ki(Le,de))}}(ve,oe.details),ve.alignedSliding||!oe.details||ve.skippedSegments||te(oe.details,ve))})(v,T,i);var j=i.fragments[0].start;return this.log("Live playlist sliding: "+j.toFixed(2)+" start-sn: "+(l?l.startSN:"na")+"->"+i.startSN+" prev-sn: "+(v?v.sn:"na")+" fragments: "+_),j}return R},o.waitForCdnTuneIn=function(i){return i.live&&i.canBlockReload&&i.partTarget&&i.tuneInGoal>Math.max(i.partHoldBack,3*i.partTarget)},o.setStartPosition=function(i,l){var d=this.startPosition;if(d<l&&(d=-1),d===-1||this.lastCurrentTime===-1){var h=i.startTimeOffset;(0,A.isFiniteNumber)(h)?(d=l+h,h<0&&(d+=i.totalduration),d=Math.min(Math.max(l,d),l+i.totalduration),this.log("Start time offset "+h+" found in playlist, adjust startPosition to "+d),this.startPosition=d):i.live?d=this.hls.liveSyncPosition||l:this.startPosition=d=0,this.lastCurrentTime=d}this.nextLoadPosition=d},o.getLoadPosition=function(){var i=this.media,l=0;return this.loadedmetadata&&i?l=i.currentTime:this.nextLoadPosition&&(l=this.nextLoadPosition),l},o.handleFragLoadAborted=function(i,l){this.transmuxer&&i.sn!=="initSegment"&&i.stats.aborted&&(this.warn("Fragment "+i.sn+(l?" part"+l.index:"")+" of level "+i.level+" was aborted"),this.resetFragmentLoading(i))},o.resetFragmentLoading=function(i){this.fragCurrent&&(this.fragContextChanged(i)||this.state===Qr)||(this.state=ut)},o.onFragmentOrKeyLoadError=function(i,l){if(l.fatal)return this.stopLoad(),void(this.state=pr);var d=this.config;if(l.chunkMeta){var h=this.getCurrentContext(l.chunkMeta);h&&(l.frag=h.frag,l.levelRetry=!0,this.fragLoadError=d.fragLoadingMaxRetry)}var v=l.frag;if(v&&v.type===i)if(this.fragCurrent,this.fragLoadError+1<=d.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var T=Math.min(Math.pow(2,this.fragLoadError)*d.fragLoadingRetryDelay,d.fragLoadingMaxRetryTimeout);this.warn("Fragment "+v.sn+" of "+i+" "+v.level+" failed to load, retrying in "+T+"ms"),this.retryDate=self.performance.now()+T,this.fragLoadError++,this.state=Qr}else l.levelRetry?(i===O.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=ut):(k.logger.error(l.details+" reaches max retry, redispatch as fatal ..."),l.fatal=!0,this.hls.stopLoad(),this.state=pr)},o.afterBufferFlushed=function(i,l,d){if(i){var h=_t.getBuffered(i);this.fragmentTracker.detectEvictedFragments(l,h,d),this.state===_n&&this.resetLoadingState()}},o.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ut},o.resetStartWhenNotLoaded=function(i){if(!this.loadedmetadata){this.startFragRequested=!1;var l=this.levels?this.levels[i].details:null;l!=null&&l.live?(this.startPosition=-1,this.setStartPosition(l,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},o.updateLevelTiming=function(i,l,d,h){var v=this,T=d.details;Object.keys(i.elementaryStreams).reduce(function(_,R){var x=i.elementaryStreams[R];if(x){var G=x.endPTS-x.startPTS;if(G<=0)return v.warn("Could not parse fragment "+i.sn+" "+R+" duration reliably ("+G+")"),_||!1;var j=h?0:X(T,i,x.startPTS,x.endPTS,x.startDTS,x.endDTS);return v.hls.trigger(y.Events.LEVEL_PTS_UPDATED,{details:T,level:d,drift:j,type:R,frag:i,start:x.startPTS,end:x.endPTS}),!0}return _},!1)||(this.warn("Found no media in fragment "+i.sn+" of level "+d.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=Sn,this.hls.trigger(y.Events.FRAG_PARSED,{frag:i,part:l})},o.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},s=r,(a=[{key:"state",get:function(){return this._state},set:function(i){var l=this._state;l!==i&&(this._state=i,this.log(l+"->"+i))}}])&&Uu(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),r}(Nr);function qi(){return self.MediaSource||self.WebKitMediaSource}function Fa(){return self.SourceBuffer||self.WebKitSourceBuffer}var $i=function(){var p=ENTRY_MODULE,f={},t=function s(a){var o=f[a];if(o!==void 0)return o.exports;var i=f[a]={exports:{}};return p[a].call(i.exports,i,i.exports,s),i.exports};t.m=p,t.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(a,{a}),a},t.d=function(s,a){for(var o in a)t.o(a,o)&&!t.o(s,o)&&Object.defineProperty(s,o,{enumerable:!0,get:a[o]})},t.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},t.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var r=t(ENTRY_MODULE);return r.default||r}.toString().split("ENTRY_MODULE"),Ma="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function Na(p){return(p+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function Bu(p,f,t){var r={};r[t]=[];var s=f.toString().replace(/^"[^"]+"/,"function"),a=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||s.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!a)return r;for(var o,i=a[1],l=new RegExp("(\\\\n|\\W)"+Na(i)+Ma,"g");o=l.exec(s);)o[3]!=="dll-reference"&&r[t].push(o[3]);for(l=new RegExp("\\("+Na(i)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+Ma,"g");o=l.exec(s);)p[o[2]]||(r[t].push(o[1]),p[o[2]]=b(o[1]).m),r[o[2]]=r[o[2]]||[],r[o[2]].push(o[4]);for(var d,h=Object.keys(r),v=0;v<h.length;v++)for(var T=0;T<r[h[v]].length;T++)d=r[h[v]][T],isNaN(1*d)||(r[h[v]][T]=1*r[h[v]][T]);return r}function Hu(p){return Object.keys(p).reduce(function(f,t){return f||p[t].length>0},!1)}function Ua(p,f,t,r){var s=p[r].map(function(a){return'"'+a+'": '+f[r][a].toString().replace(/^"[^"]+"/,"function")}).join(",");return $i[0]+"{"+s+"}"+$i[1]+'"'+t+'"'+$i[2]}var Ur=b(544),zi=b(729),Ku=b.n(zi),Xi=qi()||{isTypeSupported:function(){return!1}},Ba=function(){function p(t,r,s,a){var o=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var i=t.config;this.hls=t,this.id=r,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=s,this.onFlush=a;var l=function(T,_){(_=_||{}).frag=o.frag,_.id=o.id,o.hls.trigger(T,_)};this.observer=new zi.EventEmitter,this.observer.on(y.Events.FRAG_DECRYPTED,l),this.observer.on(y.Events.ERROR,l);var d={mp4:Xi.isTypeSupported("video/mp4"),mpeg:Xi.isTypeSupported("audio/mpeg"),mp3:Xi.isTypeSupported('audio/mp4; codecs="mp3"')},h=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){var v;k.logger.log("demuxing in webworker");try{v=this.worker=function(T,_){_=_||{};var R={main:b.m},x=_.all?{main:Object.keys(R.main)}:function(ve,de){for(var be={main:[de]},je={main:[]},Ye={main:{}};Hu(be);)for(var Le=Object.keys(be),He=0;He<Le.length;He++){var Oe=Le[He],ot=be[Oe].pop();if(Ye[Oe]=Ye[Oe]||{},!Ye[Oe][ot]&&ve[Oe][ot]){Ye[Oe][ot]=!0,je[Oe]=je[Oe]||[],je[Oe].push(ot);for(var Et=Bu(ve,ve[Oe][ot],Oe),st=Object.keys(Et),lt=0;lt<st.length;lt++)be[st[lt]]=be[st[lt]]||[],be[st[lt]]=be[st[lt]].concat(Et[st[lt]])}}return je}(R,T),G="";Object.keys(x).filter(function(ve){return ve!=="main"}).forEach(function(ve){for(var de=0;x[ve][de];)de++;x[ve].push(de),R[ve][de]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",G=G+"var "+ve+" = ("+Ua(x,R,de,modules)+`)();
`}),G=G+"new (("+Ua(x,R,T,"main")+")())(self);";var j=new window.Blob([G],{type:"text/javascript"}),J=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(j),oe=new window.Worker(J);return oe.objectURL=J,oe}(182),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(T){o.useWorker=!1,k.logger.warn("Exception in webworker, fallback to inline"),o.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.OTHER_ERROR,details:I.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(T.message+"  ("+T.filename+":"+T.lineno+")")})},v.postMessage({cmd:"init",typeSupported:d,vendor:h,id:r,config:JSON.stringify(i)})}catch(T){k.logger.warn("Error in worker:",T),k.logger.error("Error while initializing DemuxerWorker, fallback to inline"),v&&self.URL.revokeObjectURL(v.objectURL),this.transmuxer=new Ur.default(this.observer,d,i,h,r),this.worker=null}}else this.transmuxer=new Ur.default(this.observer,d,i,h,r)}var f=p.prototype;return f.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null,this.onwmsg=void 0;else{var r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}var s=this.observer;s&&s.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},f.push=function(t,r,s,a,o,i,l,d,h,v){var T,_,R=this;h.transmuxing.start=self.performance.now();var x=this.transmuxer,G=this.worker,j=i?i.start:o.start,J=o.decryptdata,oe=this.frag,ve=!(oe&&o.cc===oe.cc),de=!(oe&&h.level===oe.level),be=oe?h.sn-oe.sn:-1,je=this.part?h.part-this.part.index:-1,Ye=be===0&&h.id>1&&h.id===(oe==null?void 0:oe.stats.chunkCount),Le=!de&&(be===1||be===0&&(je===1||Ye&&je<=0)),He=self.performance.now();(de||be||o.stats.parsing.start===0)&&(o.stats.parsing.start=He),!i||!je&&Le||(i.stats.parsing.start=He);var Oe=!(oe&&((T=o.initSegment)===null||T===void 0?void 0:T.url)===((_=oe.initSegment)===null||_===void 0?void 0:_.url)),ot=new Ur.TransmuxState(ve,Le,d,de,j,Oe);if(!Le||ve||Oe){k.logger.log("[transmuxer-interface, "+o.type+"]: Starting new transmux session for sn: "+h.sn+" p: "+h.part+" level: "+h.level+" id: "+h.id+`
        discontinuity: `+ve+`
        trackSwitch: `+de+`
        contiguous: `+Le+`
        accurateTimeOffset: `+d+`
        timeOffset: `+j+`
        initSegmentChange: `+Oe);var Et=new Ur.TransmuxConfig(s,a,r,l,v);this.configureTransmuxer(Et)}if(this.frag=o,this.part=i,G)G.postMessage({cmd:"demux",data:t,decryptdata:J,chunkMeta:h,state:ot},t instanceof ArrayBuffer?[t]:[]);else if(x){var st=x.push(t,J,h,ot);(0,Ur.isPromise)(st)?(x.async=!0,st.then(function(lt){R.handleTransmuxComplete(lt)}).catch(function(lt){R.transmuxerError(lt,h,"transmuxer-interface push error")})):(x.async=!1,this.handleTransmuxComplete(st))}},f.flush=function(t){var r=this;t.transmuxing.start=self.performance.now();var s=this.transmuxer,a=this.worker;if(a)a.postMessage({cmd:"flush",chunkMeta:t});else if(s){var o=s.flush(t);(0,Ur.isPromise)(o)||s.async?((0,Ur.isPromise)(o)||(o=Promise.resolve(o)),o.then(function(i){r.handleFlushResult(i,t)}).catch(function(i){r.transmuxerError(i,t,"transmuxer-interface flush error")})):this.handleFlushResult(o,t)}},f.transmuxerError=function(t,r,s){this.hls&&this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:r,fatal:!1,error:t,err:t,reason:s})},f.handleFlushResult=function(t,r){var s=this;t.forEach(function(a){s.handleTransmuxComplete(a)}),this.onFlush(r)},f.onWorkerMessage=function(t){var r=t.data,s=this.hls;switch(r.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(r.data);break;case"flush":this.onFlush(r.data);break;case"workerLog":k.logger[r.data.logType]&&k.logger[r.data.logType](r.data.message);break;default:r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,s.trigger(r.event,r.data)}},f.configureTransmuxer=function(t){var r=this.worker,s=this.transmuxer;r?r.postMessage({cmd:"configure",config:t}):s&&s.configure(t)},f.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},p}(),ju=function(){function p(t,r,s,a){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=r,this.fragmentTracker=s,this.hls=a}var f=p.prototype;return f.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},f.poll=function(t,r){var s=this.config,a=this.media,o=this.stalled;if(a!==null){var i=a.currentTime,l=a.seeking,d=this.seeking&&!l,h=!this.seeking&&l;if(this.seeking=l,i===t){if((h||d)&&(this.stalled=null),!(a.paused&&!l||a.ended||a.playbackRate===0)&&_t.getBuffered(a).length){var v=_t.bufferInfo(a,i,0),T=v.len>0,_=v.nextStart||0;if(T||_){if(l){var R=v.len>2,x=!_||r&&r.start<=i||_-i>2&&!this.fragmentTracker.getPartialFragment(i);if(R||x)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var G,j=Math.max(_,v.start||0)-i,J=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,oe=!(J==null||(G=J.details)===null||G===void 0)&&G.live?2*J.details.targetduration:2;if(j>0&&j<=oe)return void this._trySkipBufferHole(null)}var ve=self.performance.now();if(o!==null){var de=ve-o;if(l||!(de>=250)||(this._reportStall(v),this.media)){var be=_t.bufferInfo(a,i,s.maxBufferHole);this._tryFixBufferStall(be,de)}}else this.stalled=ve}}}else if(this.moved=!0,o!==null){if(this.stallReported){var je=self.performance.now()-o;k.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(je)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},f._tryFixBufferStall=function(t,r){var s=this.config,a=this.fragmentTracker,o=this.media;if(o!==null){var i=o.currentTime,l=a.getPartialFragment(i);if(l&&(this._trySkipBufferHole(l)||!this.media))return;t.len>s.maxBufferHole&&r>1e3*s.highBufferWatchdogPeriod&&(k.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},f._reportStall=function(t){var r=this.hls,s=this.media;!this.stallReported&&s&&(this.stallReported=!0,k.logger.warn("Playback stalling at @"+s.currentTime+" due to low buffer ("+JSON.stringify(t)+")"),r.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t.len}))},f._trySkipBufferHole=function(t){var r=this.config,s=this.hls,a=this.media;if(a===null)return 0;for(var o=a.currentTime,i=0,l=_t.getBuffered(a),d=0;d<l.length;d++){var h=l.start(d);if(o+r.maxBufferHole>=i&&o<h){var v=Math.max(h+.05,a.currentTime+.1);return k.logger.warn("skipping hole, adjusting currentTime from "+o+" to "+v),this.moved=!0,this.stalled=null,a.currentTime=v,t&&s.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+o+" to "+v,frag:t}),v}i=l.end(d)}return 0},f._tryNudgeBuffer=function(){var t=this.config,r=this.hls,s=this.media,a=this.nudgeRetry;if(s!==null){var o=s.currentTime;if(this.nudgeRetry++,a<t.nudgeMaxRetry){var i=o+(a+1)*t.nudgeOffset;k.logger.warn("Nudging 'currentTime' from "+o+" to "+i),s.currentTime=i,r.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else k.logger.error("Playhead still not moving while enough data buffered @"+o+" after "+t.nudgeMaxRetry+" nudges"),r.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},p}();function Gu(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function Qi(p,f){return Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Qi(p,f)}var Vu=function(p){var f,t;function r(i,l,d){var h;return(h=p.call(this,i,l,d,"[stream-controller]")||this).audioCodecSwap=!1,h.gapController=null,h.level=-1,h._forceStartLoad=!1,h.altAudio=!1,h.audioOnly=!1,h.fragPlaying=null,h.onvplaying=null,h.onvseeked=null,h.fragLastKbps=0,h.couldBacktrack=!1,h.backtrackFragment=null,h.audioCodecSwitch=!1,h.videoBuffer=null,h._registerListeners(),h}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,Qi(f,t);var s,a,o=r.prototype;return o._registerListeners=function(){var i=this.hls;i.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.on(y.Events.LEVEL_LOADING,this.onLevelLoading,this),i.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.on(y.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),i.on(y.Events.ERROR,this.onError,this),i.on(y.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),i.on(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),i.on(y.Events.BUFFER_CREATED,this.onBufferCreated,this),i.on(y.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),i.on(y.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),i.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},o._unregisterListeners=function(){var i=this.hls;i.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.off(y.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),i.off(y.Events.ERROR,this.onError,this),i.off(y.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),i.off(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),i.off(y.Events.BUFFER_CREATED,this.onBufferCreated,this),i.off(y.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),i.off(y.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),i.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},o.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},o.startLoad=function(i){if(this.levels){var l=this.lastCurrentTime,d=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var h=d.startLevel;h===-1&&(d.config.testBandwidth&&this.levels.length>1?(h=0,this.bitrateTest=!0):h=d.nextAutoLevel),this.level=d.nextLoadLevel=h,this.loadedmetadata=!1}l>0&&i===-1&&(this.log("Override startPosition with lastCurrentTime @"+l.toFixed(3)),i=l),this.state=ut,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=i,this.tick()}else this._forceStartLoad=!0,this.state=er},o.stopLoad=function(){this._forceStartLoad=!1,p.prototype.stopLoad.call(this)},o.doTick=function(){switch(this.state){case ut:this.doTickIdle();break;case Jr:var i,l=this.levels,d=this.level,h=l==null||(i=l[d])===null||i===void 0?void 0:i.details;if(h&&(!h.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(h))break;this.state=ut;break}break;case Qr:var v,T=self.performance.now(),_=this.retryDate;(!_||T>=_||(v=this.media)!==null&&v!==void 0&&v.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=ut)}this.onTickEnd()},o.onTickEnd=function(){p.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},o.doTickIdle=function(){var i=this.hls,l=this.levelLastLoaded,d=this.levels,h=this.media,v=i.config,T=i.nextLoadLevel;if(l!==null&&(h||!this.startFragRequested&&v.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&d&&d[T]){var _=d[T],R=this.getMainFwdBufferInfo();if(R!==null){var x=this.getLevelDetails();if(x&&this._streamEnded(R,x)){var G={};return this.altAudio&&(G.type="video"),this.hls.trigger(y.Events.BUFFER_EOS,G),void(this.state=_n)}this.level=i.nextLoadLevel=T;var j=_.details;if(!j||this.state===Jr||j.live&&this.levelLastLoaded!==T)return this.level=T,void(this.state=Jr);if(!(R.len>=this.getMaxBufferLength(_.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>R.end&&(this.backtrackFragment=null);var J=this.backtrackFragment?this.backtrackFragment.start:R.end,oe=this.getNextFragment(J,j);if(this.couldBacktrack&&!this.fragPrevious&&oe&&oe.sn!=="initSegment"&&this.fragmentTracker.getState(oe)!==Be.OK){var ve,de=((ve=this.backtrackFragment)!=null?ve:oe).sn-j.startSN,be=j.fragments[de-1];be&&oe.cc===be.cc&&(oe=be,this.fragmentTracker.removeFragment(be))}else this.backtrackFragment&&R.len&&(this.backtrackFragment=null);if(oe&&this.fragmentTracker.getState(oe)===Be.OK&&this.nextLoadPosition>J){var je=this.audioOnly&&!this.altAudio?q.ElementaryStreamTypes.AUDIO:q.ElementaryStreamTypes.VIDEO,Ye=(je===q.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Ye&&this.afterBufferFlushed(Ye,je,O.PlaylistLevelType.MAIN),oe=this.getNextFragment(this.nextLoadPosition,j)}oe&&(!oe.initSegment||oe.initSegment.data||this.bitrateTest||(oe=oe.initSegment),this.loadFragment(oe,j,J))}}}},o.loadFragment=function(i,l,d){var h,v=this.fragmentTracker.getState(i);this.fragCurrent=i,v===Be.NOT_LOADED?i.sn==="initSegment"?this._loadInitSegment(i,l):this.bitrateTest?(this.log("Fragment "+i.sn+" of level "+i.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(i,l)):(this.startFragRequested=!0,p.prototype.loadFragment.call(this,i,l,d)):v===Be.APPENDING?this.reduceMaxBufferLength(i.duration)&&this.fragmentTracker.removeFragment(i):((h=this.media)===null||h===void 0?void 0:h.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},o.getAppendedFrag=function(i){var l=this.fragmentTracker.getAppendedFrag(i,O.PlaylistLevelType.MAIN);return l&&"fragment"in l?l.fragment:l},o.getBufferedFrag=function(i){return this.fragmentTracker.getBufferedFrag(i,O.PlaylistLevelType.MAIN)},o.followingBufferedFrag=function(i){return i?this.getBufferedFrag(i.end+.5):null},o.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},o.nextLevelSwitch=function(){var i=this.levels,l=this.media;if(l!=null&&l.readyState){var d,h=this.getAppendedFrag(l.currentTime);if(h&&h.start>1&&this.flushMainBuffer(0,h.start-1),!l.paused&&i){var v=i[this.hls.nextLoadLevel],T=this.fragLastKbps;d=T&&this.fragCurrent?this.fragCurrent.duration*v.maxBitrate/(1e3*T)+1:0}else d=0;var _=this.getBufferedFrag(l.currentTime+d);if(_){var R=this.followingBufferedFrag(_);if(R){this.abortCurrentFrag();var x=R.maxStartPTS?R.maxStartPTS:R.start,G=R.duration,j=Math.max(_.end,x+Math.min(Math.max(G-this.config.maxFragLookUpTolerance,.5*G),.75*G));this.flushMainBuffer(j,Number.POSITIVE_INFINITY)}}}},o.abortCurrentFrag=function(){var i=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,i&&i.abortRequests(),this.state){case Wi:case Xr:case Qr:case lr:case Sn:this.state=ut}this.nextLoadPosition=this.getLoadPosition()},o.flushMainBuffer=function(i,l){p.prototype.flushMainBuffer.call(this,i,l,this.altAudio?"video":null)},o.onMediaAttached=function(i,l){p.prototype.onMediaAttached.call(this,i,l);var d=l.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),d.addEventListener("playing",this.onvplaying),d.addEventListener("seeked",this.onvseeked),this.gapController=new ju(this.config,d,this.fragmentTracker,this.hls)},o.onMediaDetaching=function(){var i=this.media;i&&this.onvplaying&&this.onvseeked&&(i.removeEventListener("playing",this.onvplaying),i.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),p.prototype.onMediaDetaching.call(this)},o.onMediaPlaying=function(){this.tick()},o.onMediaSeeked=function(){var i=this.media,l=i?i.currentTime:null;(0,A.isFiniteNumber)(l)&&this.log("Media seeked to "+l.toFixed(3)),this.tick()},o.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(y.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},o.onManifestParsed=function(i,l){var d,h,v,T=!1,_=!1;l.levels.forEach(function(R){(d=R.audioCodec)&&(d.indexOf("mp4a.40.2")!==-1&&(T=!0),d.indexOf("mp4a.40.5")!==-1&&(_=!0))}),this.audioCodecSwitch=T&&_&&typeof((v=Fa())==null||(h=v.prototype)===null||h===void 0?void 0:h.changeType)!="function",this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=l.levels,this.startFragRequested=!1},o.onLevelLoading=function(i,l){var d=this.levels;if(d&&this.state===ut){var h=d[l.level];(!h.details||h.details.live&&this.levelLastLoaded!==l.level||this.waitForCdnTuneIn(h.details))&&(this.state=Jr)}},o.onLevelLoaded=function(i,l){var d,h=this.levels,v=l.level,T=l.details,_=T.totalduration;if(h){this.log("Level "+v+" loaded ["+T.startSN+","+T.endSN+"], cc ["+T.startCC+", "+T.endCC+"] duration:"+_);var R=this.fragCurrent;!R||this.state!==Xr&&this.state!==Qr||R.level!==l.level&&R.loader&&(this.state=ut,this.backtrackFragment=null,R.abortRequests());var x=h[v],G=0;if(T.live||(d=x.details)!==null&&d!==void 0&&d.live){if(T.fragments[0]||(T.deltaUpdateFailed=!0),T.deltaUpdateFailed)return;G=this.alignPlaylists(T,x.details)}if(x.details=T,this.levelLastLoaded=v,this.hls.trigger(y.Events.LEVEL_UPDATED,{details:T,level:v}),this.state===Jr){if(this.waitForCdnTuneIn(T))return;this.state=ut}this.startFragRequested?T.live&&this.synchronizeToLiveEdge(T):this.setStartPosition(T,G),this.tick()}else this.warn("Levels were reset while loading level "+v)},o._handleFragmentLoadProgress=function(i){var l,d=i.frag,h=i.part,v=i.payload,T=this.levels;if(T){var _=T[d.level],R=_.details;if(R){var x=_.videoCodec,G=R.PTSKnown||!R.live,j=(l=d.initSegment)===null||l===void 0?void 0:l.data,J=this._getAudioCodec(_),oe=this.transmuxer=this.transmuxer||new Ba(this.hls,O.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),ve=h?h.index:-1,de=ve!==-1,be=new Hi(d.level,d.sn,d.stats.chunkCount,v.byteLength,ve,de),je=this.initPTS[d.cc];oe.push(v,j,J,x,d,h,R.totalduration,G,be,je)}else this.warn("Dropping fragment "+d.sn+" of level "+d.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+d.sn+" of level "+d.level+" will not be buffered")},o.onAudioTrackSwitching=function(i,l){var d=this.altAudio,h=!!l.url,v=l.id;if(!h){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var T=this.fragCurrent;T&&(this.log("Switching to main audio track, cancel main fragment load"),T.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var _=this.hls;d&&_.trigger(y.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),_.trigger(y.Events.AUDIO_TRACK_SWITCHED,{id:v})}},o.onAudioTrackSwitched=function(i,l){var d=l.id,h=!!this.hls.audioTracks[d].url;if(h){var v=this.videoBuffer;v&&this.mediaBuffer!==v&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=v)}this.altAudio=h,this.tick()},o.onBufferCreated=function(i,l){var d,h,v=l.tracks,T=!1;for(var _ in v){var R=v[_];if(R.id==="main"){if(h=_,d=R,_==="video"){var x=v[_];x&&(this.videoBuffer=x.buffer)}}else T=!0}T&&d?(this.log("Alternate track found, use "+h+".buffered to schedule main fragment loading"),this.mediaBuffer=d.buffer):this.mediaBuffer=this.media},o.onFragBuffered=function(i,l){var d=l.frag,h=l.part;if(!d||d.type===O.PlaylistLevelType.MAIN){if(this.fragContextChanged(d))return this.warn("Fragment "+d.sn+(h?" p: "+h.index:"")+" of level "+d.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Sn&&(this.state=ut));var v=h?h.stats:d.stats;this.fragLastKbps=Math.round(8*v.total/(v.buffering.end-v.loading.first)),d.sn!=="initSegment"&&(this.fragPrevious=d),this.fragBufferedComplete(d,h)}},o.onError=function(i,l){if(l.type!==I.ErrorTypes.KEY_SYSTEM_ERROR)switch(l.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:case I.ErrorDetails.FRAG_PARSING_ERROR:case I.ErrorDetails.KEY_LOAD_ERROR:case I.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(O.PlaylistLevelType.MAIN,l);break;case I.ErrorDetails.LEVEL_LOAD_ERROR:case I.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==pr&&(l.fatal?(this.warn(""+l.details),this.state=pr):l.levelRetry||this.state!==Jr||(this.state=ut));break;case I.ErrorDetails.BUFFER_FULL_ERROR:if(l.parent==="main"&&(this.state===lr||this.state===Sn)){var d=!0,h=this.getFwdBufferInfo(this.media,O.PlaylistLevelType.MAIN);h&&h.len>.5&&(d=!this.reduceMaxBufferLength(h.len)),d&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(O.PlaylistLevelType.MAIN,l)},o.checkBuffer=function(){var i=this.media,l=this.gapController;if(i&&l&&i.readyState){if(this.loadedmetadata||!_t.getBuffered(i).length){var d=this.state!==ut?this.fragCurrent:null;l.poll(this.lastCurrentTime,d)}this.lastCurrentTime=i.currentTime}},o.onFragLoadEmergencyAborted=function(){this.state=ut,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},o.onBufferFlushed=function(i,l){var d=l.type;if(d!==q.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var h=(d===q.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(h,d,O.PlaylistLevelType.MAIN)}},o.onLevelsUpdated=function(i,l){this.levels=l.levels},o.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},o.seekToStartPos=function(){var i=this.media;if(i){var l=i.currentTime,d=this.startPosition;if(d>=0&&l<d){if(i.seeking)return void this.log("could not seek to "+d+", already seeking at "+l);var h=_t.getBuffered(i),v=(h.length?h.start(0):0)-d;v>0&&(v<this.config.maxBufferHole||v<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+v+" to match buffer start"),d+=v,this.startPosition=d),this.log("seek to target start position "+d+" from current time "+l),i.currentTime=d}}},o._getAudioCodec=function(i){var l=this.config.defaultAudioCodec||i.audioCodec;return this.audioCodecSwap&&l&&(this.log("Swapping audio codec"),l=l.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),l},o._loadBitrateTestFrag=function(i,l){var d=this;i.bitrateTest=!0,this._doFragLoad(i,l).then(function(h){var v=d.hls;if(h&&!d.fragContextChanged(i)){d.fragLoadError=0,d.state=ut,d.startFragRequested=!1,d.bitrateTest=!1;var T=i.stats;T.parsing.start=T.parsing.end=T.buffering.start=T.buffering.end=self.performance.now(),v.trigger(y.Events.FRAG_LOADED,h),i.bitrateTest=!1}})},o._handleTransmuxComplete=function(i){var l,d="main",h=this.hls,v=i.remuxResult,T=i.chunkMeta,_=this.getCurrentContext(T);if(!_)return this.warn("The loading context changed while buffering fragment "+T.sn+" of level "+T.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(T.level);var R=_.frag,x=_.part,G=_.level,j=v.video,J=v.text,oe=v.id3,ve=v.initSegment,de=G.details,be=this.altAudio?void 0:v.audio;if(!this.fragContextChanged(R)){if(this.state=lr,ve){ve.tracks&&(this._bufferInitSegment(G,ve.tracks,R,T),h.trigger(y.Events.FRAG_PARSING_INIT_SEGMENT,{frag:R,id:d,tracks:ve.tracks}));var je=ve.initPTS,Ye=ve.timescale;(0,A.isFiniteNumber)(je)&&(this.initPTS[R.cc]=je,h.trigger(y.Events.INIT_PTS_FOUND,{frag:R,id:d,initPTS:je,timescale:Ye}))}if(j&&v.independent!==!1){if(de){var Le=j.startPTS,He=j.endPTS,Oe=j.startDTS,ot=j.endDTS;if(x)x.elementaryStreams[j.type]={startPTS:Le,endPTS:He,startDTS:Oe,endDTS:ot};else if(j.firstKeyFrame&&j.independent&&T.id===1&&(this.couldBacktrack=!0),j.dropped&&j.independent){var Et=this.getMainFwdBufferInfo();if((Et?Et.end:this.getLoadPosition())+this.config.maxBufferHole<(j.firstKeyFramePTS?j.firstKeyFramePTS:Le)-this.config.maxBufferHole)return void this.backtrack(R);R.setElementaryStreamInfo(j.type,R.start,He,R.start,ot,!0)}R.setElementaryStreamInfo(j.type,Le,He,Oe,ot),this.backtrackFragment&&(this.backtrackFragment=R),this.bufferFragmentData(j,R,x,T)}}else if(v.independent===!1)return void this.backtrack(R);if(be){var st=be.startPTS,lt=be.endPTS,gt=be.startDTS,Nt=be.endDTS;x&&(x.elementaryStreams[q.ElementaryStreamTypes.AUDIO]={startPTS:st,endPTS:lt,startDTS:gt,endDTS:Nt}),R.setElementaryStreamInfo(q.ElementaryStreamTypes.AUDIO,st,lt,gt,Nt),this.bufferFragmentData(be,R,x,T)}if(de&&oe!=null&&(l=oe.samples)!==null&&l!==void 0&&l.length){var It={id:d,frag:R,details:de,samples:oe.samples};h.trigger(y.Events.FRAG_PARSING_METADATA,It)}if(de&&J){var At={id:d,frag:R,details:de,samples:J.samples};h.trigger(y.Events.FRAG_PARSING_USERDATA,At)}}},o._bufferInitSegment=function(i,l,d,h){var v=this;if(this.state===lr){this.audioOnly=!!l.audio&&!l.video,this.altAudio&&!this.audioOnly&&delete l.audio;var T=l.audio,_=l.video,R=l.audiovideo;if(T){var x=i.audioCodec,G=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(x&&(x=x.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),T.metadata.channelCount!==1&&G.indexOf("firefox")===-1&&(x="mp4a.40.5")),G.indexOf("android")!==-1&&T.container!=="audio/mpeg"&&(x="mp4a.40.2",this.log("Android: force audio codec to "+x)),i.audioCodec&&i.audioCodec!==x&&this.log('Swapping manifest audio codec "'+i.audioCodec+'" for "'+x+'"'),T.levelCodec=x,T.id="main",this.log("Init audio buffer, container:"+T.container+", codecs[selected/level/parsed]=["+(x||"")+"/"+(i.audioCodec||"")+"/"+T.codec+"]")}_&&(_.levelCodec=i.videoCodec,_.id="main",this.log("Init video buffer, container:"+_.container+", codecs[level/parsed]=["+(i.videoCodec||"")+"/"+_.codec+"]")),R&&this.log("Init audiovideo buffer, container:"+R.container+", codecs[level/parsed]=["+(i.attrs.CODECS||"")+"/"+R.codec+"]"),this.hls.trigger(y.Events.BUFFER_CODECS,l),Object.keys(l).forEach(function(j){var J=l[j].initSegment;J!=null&&J.byteLength&&v.hls.trigger(y.Events.BUFFER_APPENDING,{type:j,data:J,frag:d,part:null,chunkMeta:h,parent:d.type})}),this.tick()}},o.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,O.PlaylistLevelType.MAIN)},o.backtrack=function(i){this.couldBacktrack=!0,this.backtrackFragment=i,this.resetTransmuxer(),this.flushBufferGap(i),this.fragmentTracker.removeFragment(i),this.fragPrevious=null,this.nextLoadPosition=i.start,this.state=ut},o.checkFragmentChanged=function(){var i=this.media,l=null;if(i&&i.readyState>1&&i.seeking===!1){var d=i.currentTime;if(_t.isBuffered(i,d)?l=this.getAppendedFrag(d):_t.isBuffered(i,d+.1)&&(l=this.getAppendedFrag(d+.1)),l){this.backtrackFragment=null;var h=this.fragPlaying,v=l.level;h&&l.sn===h.sn&&h.level===v&&l.urlId===h.urlId||(this.fragPlaying=l,this.hls.trigger(y.Events.FRAG_CHANGED,{frag:l}),h&&h.level===v||this.hls.trigger(y.Events.LEVEL_SWITCHED,{level:v}))}}},s=r,(a=[{key:"nextLevel",get:function(){var i=this.nextBufferedFrag;return i?i.level:-1}},{key:"currentFrag",get:function(){var i=this.media;return i?this.fragPlaying||this.getAppendedFrag(i.currentTime):null}},{key:"currentProgramDateTime",get:function(){var i=this.media;if(i){var l=i.currentTime,d=this.currentFrag;if(d&&(0,A.isFiniteNumber)(l)&&(0,A.isFiniteNumber)(d.programDateTime)){var h=d.programDateTime+1e3*(l-d.start);return new Date(h)}}return null}},{key:"currentLevel",get:function(){var i=this.currentFrag;return i?i.level:-1}},{key:"nextBufferedFrag",get:function(){var i=this.currentFrag;return i?this.followingBufferedFrag(i):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&Gu(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),r}(Yi);const $n=function(){function p(t,r,s){r===void 0&&(r=0),s===void 0&&(s=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=r,this.totalWeight_=s}var f=p.prototype;return f.sample=function(t,r){var s=Math.pow(this.alpha_,t);this.estimate_=r*(1-s)+s*this.estimate_,this.totalWeight_+=t},f.getTotalWeight=function(){return this.totalWeight_},f.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},p}(),Wu=function(){function p(t,r,s){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new $n(t),this.fast_=new $n(r)}var f=p.prototype;return f.update=function(t,r){var s=this.slow_,a=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new $n(t,s.getEstimate(),s.getTotalWeight())),this.fast_.halfLife!==r&&(this.fast_=new $n(r,a.getEstimate(),a.getTotalWeight()))},f.sample=function(t,r){var s=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*r/s;this.fast_.sample(s,a),this.slow_.sample(s,a)},f.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},f.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},f.destroy=function(){},p}();function Yu(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}const qu=function(){function p(s){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=s;var a=s.config;this.bwEstimator=new Wu(a.abrEwmaSlowVoD,a.abrEwmaFastVoD,a.abrEwmaDefaultEstimate),this.registerListeners()}var f,t,r=p.prototype;return r.registerListeners=function(){var s=this.hls;s.on(y.Events.FRAG_LOADING,this.onFragLoading,this),s.on(y.Events.FRAG_LOADED,this.onFragLoaded,this),s.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),s.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),s.on(y.Events.ERROR,this.onError,this)},r.unregisterListeners=function(){var s=this.hls;s.off(y.Events.FRAG_LOADING,this.onFragLoading,this),s.off(y.Events.FRAG_LOADED,this.onFragLoaded,this),s.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),s.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),s.off(y.Events.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},r.onFragLoading=function(s,a){var o,i=a.frag;i.type===O.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=(o=a.part)!=null?o:null,this.timer=self.setInterval(this.onCheck,100)))},r.onLevelLoaded=function(s,a){var o=this.hls.config;a.details.live?this.bwEstimator.update(o.abrEwmaSlowLive,o.abrEwmaFastLive):this.bwEstimator.update(o.abrEwmaSlowVoD,o.abrEwmaFastVoD)},r._abandonRulesCheck=function(){var s=this.fragCurrent,a=this.partCurrent,o=this.hls,i=o.autoLevelEnabled,l=o.media;if(s&&l){var d=a?a.stats:s.stats,h=a?a.duration:s.duration;if(d.aborted||d.loaded&&d.loaded===d.total||s.level===0)return this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!l.paused&&l.playbackRate&&l.readyState){var v=o.mainForwardBufferInfo;if(v!==null){var T=performance.now()-d.loading.start,_=Math.abs(l.playbackRate);if(!(T<=500*h/_)){var R=d.loaded&&d.loading.first,x=this.bwEstimator.getEstimate(),G=o.levels,j=o.minAutoLevel,J=G[s.level],oe=d.total||Math.max(d.loaded,Math.round(h*J.maxBitrate/8)),ve=R?1e3*d.loaded/T:0,de=ve?(oe-d.loaded)/ve:8*oe/x,be=v.len/_;if(!(de<=be)){var je,Ye=Number.POSITIVE_INFINITY;for(je=s.level-1;je>j;je--){var Le=G[je].maxBitrate;if((Ye=ve?h*Le/(6.4*ve):h*Le/x)<be)break}Ye>=de||(k.logger.warn("Fragment "+s.sn+(a?" part "+a.index:"")+" of level "+s.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+je+`
      Current BW estimate: `+((0,A.isFiniteNumber)(x)?(x/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+de.toFixed(3)+` s
      Estimated load time for the next fragment: `+Ye.toFixed(3)+` s
      Time to underbuffer: `+be.toFixed(3)+" s"),o.nextLoadLevel=je,R&&this.bwEstimator.sample(T,d.loaded),this.clearTimer(),(s.loader||s.keyLoader)&&(this.fragCurrent=this.partCurrent=null,s.abortRequests()),o.trigger(y.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:a,stats:d}))}}}}}},r.onFragLoaded=function(s,a){var o=a.frag,i=a.part;if(o.type===O.PlaylistLevelType.MAIN&&(0,A.isFiniteNumber)(o.sn)){var l=i?i.stats:o.stats,d=i?i.duration:o.duration;if(this.clearTimer(),this.lastLoadedFragLevel=o.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var h=this.hls.levels[o.level],v=(h.loaded?h.loaded.bytes:0)+l.loaded,T=(h.loaded?h.loaded.duration:0)+d;h.loaded={bytes:v,duration:T},h.realBitrate=Math.round(8*v/T)}if(o.bitrateTest){var _={stats:l,frag:o,part:i,id:o.type};this.onFragBuffered(y.Events.FRAG_BUFFERED,_)}}},r.onFragBuffered=function(s,a){var o=a.frag,i=a.part,l=i?i.stats:o.stats;if(!l.aborted&&o.type===O.PlaylistLevelType.MAIN&&o.sn!=="initSegment"){var d=l.parsing.end-l.loading.start;this.bwEstimator.sample(d,l.loaded),l.bwEstimate=this.bwEstimator.getEstimate(),o.bitrateTest?this.bitrateTestDelay=d/1e3:this.bitrateTestDelay=0}},r.onError=function(s,a){var o;if(((o=a.frag)===null||o===void 0?void 0:o.type)===O.PlaylistLevelType.MAIN){if(a.type===I.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(a.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:case I.ErrorDetails.KEY_LOAD_ERROR:case I.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},r.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},r.getNextABRAutoLevel=function(){var s=this.fragCurrent,a=this.partCurrent,o=this.hls,i=o.maxAutoLevel,l=o.config,d=o.minAutoLevel,h=o.media,v=a?a.duration:s?s.duration:0,T=h&&h.playbackRate!==0?Math.abs(h.playbackRate):1,_=this.bwEstimator?this.bwEstimator.getEstimate():l.abrEwmaDefaultEstimate,R=o.mainForwardBufferInfo,x=(R?R.len:0)/T,G=this.findBestLevel(_,d,i,x,l.abrBandWidthFactor,l.abrBandWidthUpFactor);if(G>=0)return G;k.logger.trace((x?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var j=v?Math.min(v,l.maxStarvationDelay):l.maxStarvationDelay,J=l.abrBandWidthFactor,oe=l.abrBandWidthUpFactor;if(!x){var ve=this.bitrateTestDelay;ve&&(j=(v?Math.min(v,l.maxLoadingDelay):l.maxLoadingDelay)-ve,k.logger.trace("bitrate test took "+Math.round(1e3*ve)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*j)+" ms"),J=oe=1)}return G=this.findBestLevel(_,d,i,x+j,J,oe),Math.max(G,0)},r.findBestLevel=function(s,a,o,i,l,d){for(var h,v=this.fragCurrent,T=this.partCurrent,_=this.lastLoadedFragLevel,R=this.hls.levels,x=R[_],G=!(x==null||(h=x.details)===null||h===void 0||!h.live),j=x==null?void 0:x.codecSet,J=T?T.duration:v?v.duration:0,oe=o;oe>=a;oe--){var ve=R[oe];if(ve&&(!j||ve.codecSet===j)){var de,be=ve.details,je=(T?be==null?void 0:be.partTarget:be==null?void 0:be.averagetargetduration)||J;de=oe<=_?l*s:d*s;var Ye=R[oe].maxBitrate,Le=Ye*je/de;if(k.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+oe+"/"+Math.round(de)+"/"+Ye+"/"+je+"/"+i+"/"+Le),de>Ye&&(Le===0||!(0,A.isFiniteNumber)(Le)||G&&!this.bitrateTestDelay||Le<i))return oe}}return-1},f=p,(t=[{key:"nextAutoLevel",get:function(){var s=this._nextAutoLevel,a=this.bwEstimator;if(s!==-1&&!a.canEstimate())return s;var o=this.getNextABRAutoLevel();return s!==-1&&this.hls.levels[o].loadError?s:(s!==-1&&(o=Math.min(s,o)),o)},set:function(s){this._nextAutoLevel=s}}])&&Yu(f.prototype,t),Object.defineProperty(f,"prototype",{writable:!1}),p}();var Ha=function(){function p(){this.chunks=[],this.dataLength=0}var f=p.prototype;return f.push=function(t){this.chunks.push(t),this.dataLength+=t.length},f.flush=function(){var t,r=this.chunks,s=this.dataLength;return r.length?(t=r.length===1?r[0]:function(a,o){for(var i=new Uint8Array(o),l=0,d=0;d<a.length;d++){var h=a[d];i.set(h,l),l+=h.length}return i}(r,s),this.reset(),t):new Uint8Array(0)},f.reset=function(){this.chunks.length=0,this.dataLength=0},p}();function zn(){return zn=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},zn.apply(this,arguments)}function Ji(p,f){return Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Ji(p,f)}var $u=function(p){var f,t;function r(a,o,i){var l;return(l=p.call(this,a,o,i,"[audio-stream-controller]")||this).videoBuffer=null,l.videoTrackCC=-1,l.waitingVideoCC=-1,l.audioSwitch=!1,l.trackId=-1,l.waitingData=null,l.mainDetails=null,l.bufferFlushed=!1,l.cachedTrackLoadedData=null,l._registerListeners(),l}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,Ji(f,t);var s=r.prototype;return s.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},s._registerListeners=function(){var a=this.hls;a.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),a.on(y.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),a.on(y.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),a.on(y.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),a.on(y.Events.ERROR,this.onError,this),a.on(y.Events.BUFFER_RESET,this.onBufferReset,this),a.on(y.Events.BUFFER_CREATED,this.onBufferCreated,this),a.on(y.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),a.on(y.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),a.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},s._unregisterListeners=function(){var a=this.hls;a.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),a.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),a.off(y.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),a.off(y.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),a.off(y.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),a.off(y.Events.ERROR,this.onError,this),a.off(y.Events.BUFFER_RESET,this.onBufferReset,this),a.off(y.Events.BUFFER_CREATED,this.onBufferCreated,this),a.off(y.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),a.off(y.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),a.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},s.onInitPtsFound=function(a,o){var i=o.frag,l=o.id,d=o.initPTS;if(l==="main"){var h=i.cc;this.initPTS[i.cc]=d,this.log("InitPTS for cc: "+h+" found from main: "+d),this.videoTrackCC=h,this.state===An&&this.tick()}},s.startLoad=function(a){if(!this.levels)return this.startPosition=a,void(this.state=er);var o=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,o>0&&a===-1?(this.log("Override startPosition with lastCurrentTime @"+o.toFixed(3)),a=o,this.state=ut):(this.loadedmetadata=!1,this.state=qn),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=a,this.tick()},s.doTick=function(){switch(this.state){case ut:this.doTickIdle();break;case qn:var a,o=this.levels,i=this.trackId,l=o==null||(a=o[i])===null||a===void 0?void 0:a.details;if(l){if(this.waitForCdnTuneIn(l))break;this.state=An}break;case Qr:var d,h=performance.now(),v=this.retryDate;(!v||h>=v||(d=this.media)!==null&&d!==void 0&&d.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=ut);break;case An:var T=this.waitingData;if(T){var _=T.frag,R=T.part,x=T.cache,G=T.complete;if(this.initPTS[_.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=Xr;var j={frag:_,part:R,payload:x.flush(),networkDetails:null};this._handleFragmentLoadProgress(j),G&&p.prototype._handleFragmentLoadComplete.call(this,j)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+_.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var J=this.getLoadPosition(),oe=_t.bufferInfo(this.mediaBuffer,J,this.config.maxBufferHole);Gi(oe.end,this.config.maxFragLookUpTolerance,_)<0&&(this.log("Waiting fragment cc ("+_.cc+") @ "+_.start+" cancelled because another fragment at "+oe.end+" is needed"),this.clearWaitingFragment())}}else this.state=ut}this.onTickEnd()},s.clearWaitingFragment=function(){var a=this.waitingData;a&&(this.fragmentTracker.removeFragment(a.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ut)},s.resetLoadingState=function(){this.clearWaitingFragment(),p.prototype.resetLoadingState.call(this)},s.onTickEnd=function(){var a=this.media;a&&a.readyState&&(this.lastCurrentTime=a.currentTime)},s.doTickIdle=function(){var a=this.hls,o=this.levels,i=this.media,l=this.trackId,d=a.config;if(o&&o[l]&&(i||!this.startFragRequested&&d.startFragPrefetch)){var h=o[l].details;if(!h||h.live&&this.levelLastLoaded!==l||this.waitForCdnTuneIn(h))this.state=qn;else{var v=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&v&&(this.bufferFlushed=!1,this.afterBufferFlushed(v,q.ElementaryStreamTypes.AUDIO,O.PlaylistLevelType.AUDIO));var T=this.getFwdBufferInfo(v,O.PlaylistLevelType.AUDIO);if(T!==null){var _=this.audioSwitch;if(!_&&this._streamEnded(T,h))return a.trigger(y.Events.BUFFER_EOS,{type:"audio"}),void(this.state=_n);var R=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,O.PlaylistLevelType.MAIN);if(!(T.len>=this.getMaxBufferLength(R==null?void 0:R.len))||_){var x=h.fragments[0].start,G=T.end;if(_&&i){var j=this.getLoadPosition();G=j,h.PTSKnown&&j<x&&(T.end>x||T.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=x+.05)}if(!(R&&G>R.end+h.targetduration)&&(R&&R.len||!T.len)){var J=this.getNextFragment(G,h);J?this.loadFragment(J,h,G):this.bufferFlushed=!0}}}}}},s.getMaxBufferLength=function(a){var o=p.prototype.getMaxBufferLength.call(this);return a?Math.max(o,a):o},s.onMediaDetaching=function(){this.videoBuffer=null,p.prototype.onMediaDetaching.call(this)},s.onAudioTracksUpdated=function(a,o){var i=o.audioTracks;this.resetTransmuxer(),this.levels=i.map(function(l){return new K(l)})},s.onAudioTrackSwitching=function(a,o){var i=!!o.url;this.trackId=o.id;var l=this.fragCurrent;l&&l.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.audioSwitch=!0,this.state=ut):this.state=er,this.tick()},s.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},s.onLevelLoaded=function(a,o){this.mainDetails=o.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(y.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},s.onAudioTrackLoaded=function(a,o){var i;if(this.mainDetails!=null){var l=this.levels,d=o.details,h=o.id;if(l){this.log("Track "+h+" loaded ["+d.startSN+","+d.endSN+"],duration:"+d.totalduration);var v=l[h],T=0;if(d.live||(i=v.details)!==null&&i!==void 0&&i.live){var _=this.mainDetails;if(d.fragments[0]||(d.deltaUpdateFailed=!0),d.deltaUpdateFailed||!_)return;!v.details&&d.hasProgramDateTime&&_.hasProgramDateTime?(Pa(d,_),T=d.fragments[0].start):T=this.alignPlaylists(d,v.details)}v.details=d,this.levelLastLoaded=h,this.startFragRequested||!this.mainDetails&&d.live||this.setStartPosition(v.details,T),this.state!==qn||this.waitForCdnTuneIn(d)||(this.state=ut),this.tick()}else this.warn("Audio tracks were reset while loading level "+h)}else this.cachedTrackLoadedData=o},s._handleFragmentLoadProgress=function(a){var o,i=a.frag,l=a.part,d=a.payload,h=this.config,v=this.trackId,T=this.levels;if(T){var _=T[v],R=_.details,x=h.defaultAudioCodec||_.audioCodec||"mp4a.40.2",G=this.transmuxer;G||(G=this.transmuxer=new Ba(this.hls,O.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var j=this.initPTS[i.cc],J=(o=i.initSegment)===null||o===void 0?void 0:o.data;if(j!==void 0){var oe=l?l.index:-1,ve=oe!==-1,de=new Hi(i.level,i.sn,i.stats.chunkCount,d.byteLength,oe,ve);G.push(d,J,x,"",i,l,R.totalduration,!1,de,j)}else this.log("Unknown video PTS for cc "+i.cc+", waiting for video PTS before demuxing audio frag "+i.sn+" of ["+R.startSN+" ,"+R.endSN+"],track "+v),(this.waitingData=this.waitingData||{frag:i,part:l,cache:new Ha,complete:!1}).cache.push(new Uint8Array(d)),this.waitingVideoCC=this.videoTrackCC,this.state=An}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},s._handleFragmentLoadComplete=function(a){this.waitingData?this.waitingData.complete=!0:p.prototype._handleFragmentLoadComplete.call(this,a)},s.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},s.onBufferCreated=function(a,o){var i=o.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),o.tracks.video&&(this.videoBuffer=o.tracks.video.buffer||null)},s.onFragBuffered=function(a,o){var i,l=o.frag,d=o.part;l.type===O.PlaylistLevelType.AUDIO?this.fragContextChanged(l)?this.warn("Fragment "+l.sn+(d?" p: "+d.index:"")+" of level "+l.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):(l.sn!=="initSegment"&&(this.fragPrevious=l,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(y.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(l,d)):this.loadedmetadata||l.type!==O.PlaylistLevelType.MAIN||(i=this.videoBuffer||this.media)!==null&&i!==void 0&&i.buffered.length&&(this.loadedmetadata=!0)},s.onError=function(a,o){if(o.type!==I.ErrorTypes.KEY_SYSTEM_ERROR)switch(o.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:case I.ErrorDetails.FRAG_PARSING_ERROR:case I.ErrorDetails.KEY_LOAD_ERROR:case I.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(O.PlaylistLevelType.AUDIO,o);break;case I.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case I.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==pr&&this.state!==er&&(this.state=o.fatal?pr:ut,this.warn(o.details+" while loading frag, switching to "+this.state+" state"));break;case I.ErrorDetails.BUFFER_FULL_ERROR:if(o.parent==="audio"&&(this.state===lr||this.state===Sn)){var i=!0,l=this.getFwdBufferInfo(this.mediaBuffer,O.PlaylistLevelType.AUDIO);l&&l.len>.5&&(i=!this.reduceMaxBufferLength(l.len)),i&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,p.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(O.PlaylistLevelType.AUDIO,o)},s.onBufferFlushed=function(a,o){o.type===q.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===_n&&(this.state=ut))},s._handleTransmuxComplete=function(a){var o,i="audio",l=this.hls,d=a.remuxResult,h=a.chunkMeta,v=this.getCurrentContext(h);if(!v)return this.warn("The loading context changed while buffering fragment "+h.sn+" of level "+h.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(h.level);var T=v.frag,_=v.part,R=v.level.details,x=d.audio,G=d.text,j=d.id3,J=d.initSegment;if(!this.fragContextChanged(T)&&R){if(this.state=lr,this.audioSwitch&&x&&this.completeAudioSwitch(),J!=null&&J.tracks&&(this._bufferInitSegment(J.tracks,T,h),l.trigger(y.Events.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:i,tracks:J.tracks})),x){var oe=x.startPTS,ve=x.endPTS,de=x.startDTS,be=x.endDTS;_&&(_.elementaryStreams[q.ElementaryStreamTypes.AUDIO]={startPTS:oe,endPTS:ve,startDTS:de,endDTS:be}),T.setElementaryStreamInfo(q.ElementaryStreamTypes.AUDIO,oe,ve,de,be),this.bufferFragmentData(x,T,_,h)}if(j!=null&&(o=j.samples)!==null&&o!==void 0&&o.length){var je=zn({id:i,frag:T,details:R},j);l.trigger(y.Events.FRAG_PARSING_METADATA,je)}if(G){var Ye=zn({id:i,frag:T,details:R},G);l.trigger(y.Events.FRAG_PARSING_USERDATA,Ye)}}},s._bufferInitSegment=function(a,o,i){if(this.state===lr){a.video&&delete a.video;var l=a.audio;if(l){l.levelCodec=l.codec,l.id="audio",this.log("Init audio buffer, container:"+l.container+", codecs[parsed]=["+l.codec+"]"),this.hls.trigger(y.Events.BUFFER_CODECS,a);var d=l.initSegment;if(d!=null&&d.byteLength){var h={type:"audio",frag:o,part:null,chunkMeta:i,parent:o.type,data:d};this.hls.trigger(y.Events.BUFFER_APPENDING,h)}this.tick()}}},s.loadFragment=function(a,o,i){var l=this.fragmentTracker.getState(a);this.fragCurrent=a,(this.audioSwitch||l===Be.NOT_LOADED||l===Be.PARTIAL)&&(a.sn==="initSegment"?this._loadInitSegment(a,o):o.live&&!(0,A.isFiniteNumber)(this.initPTS[a.cc])?(this.log("Waiting for video PTS in continuity counter "+a.cc+" of live stream before loading audio fragment "+a.sn+" of level "+this.trackId),this.state=An):(this.startFragRequested=!0,p.prototype.loadFragment.call(this,a,o,i)))},s.completeAudioSwitch=function(){var a=this.hls,o=this.media,i=this.trackId;o&&(this.log("Switching audio track : flushing all audio"),p.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,a.trigger(y.Events.AUDIO_TRACK_SWITCHED,{id:i})},r}(Yi);const zu=$u;function Xu(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function Zi(p,f){return Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Zi(p,f)}const Qu=function(p){var f,t;function r(i){var l;return(l=p.call(this,i,"[audio-track-controller]")||this).tracks=[],l.groupId=null,l.tracksInGroup=[],l.trackId=-1,l.trackName="",l.selectDefaultTrack=!0,l.registerListeners(),l}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,Zi(f,t);var s,a,o=r.prototype;return o.registerListeners=function(){var i=this.hls;i.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.on(y.Events.LEVEL_LOADING,this.onLevelLoading,this),i.on(y.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),i.on(y.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),i.on(y.Events.ERROR,this.onError,this)},o.unregisterListeners=function(){var i=this.hls;i.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.off(y.Events.LEVEL_LOADING,this.onLevelLoading,this),i.off(y.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),i.off(y.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),i.off(y.Events.ERROR,this.onError,this)},o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,p.prototype.destroy.call(this)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},o.onManifestParsed=function(i,l){this.tracks=l.audioTracks||[]},o.onAudioTrackLoaded=function(i,l){var d=l.id,h=l.details,v=this.tracksInGroup[d];if(v){var T=v.details;v.details=l.details,this.log("audioTrack "+d+" loaded ["+h.startSN+"-"+h.endSN+"]"),d===this.trackId&&(this.retryCount=0,this.playlistLoaded(d,l,T))}else this.warn("Invalid audio track id "+d)},o.onLevelLoading=function(i,l){this.switchLevel(l.level)},o.onLevelSwitching=function(i,l){this.switchLevel(l.level)},o.switchLevel=function(i){var l=this.hls.levels[i];if(l!=null&&l.audioGroupIds){var d=l.audioGroupIds[l.urlId];if(this.groupId!==d){this.groupId=d;var h=this.tracks.filter(function(T){return!d||T.groupId===d});this.selectDefaultTrack&&!h.some(function(T){return T.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=h;var v={audioTracks:h};this.log("Updating audio tracks, "+h.length+' track(s) found in "'+d+'" group-id'),this.hls.trigger(y.Events.AUDIO_TRACKS_UPDATED,v),this.selectInitialTrack()}}},o.onError=function(i,l){p.prototype.onError.call(this,i,l),!l.fatal&&l.context&&l.context.type===O.PlaylistContextType.AUDIO_TRACK&&l.context.id===this.trackId&&l.context.groupId===this.groupId&&this.retryLoadingOrFail(l)},o.setAudioTrack=function(i){var l=this.tracksInGroup;if(i<0||i>=l.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var d=l[this.trackId];this.log("Now switching to audio-track index "+i);var h=l[i],v=h.id,T=h.groupId,_=T===void 0?"":T,R=h.name,x=h.type,G=h.url;if(this.trackId=i,this.trackName=R,this.selectDefaultTrack=!1,this.hls.trigger(y.Events.AUDIO_TRACK_SWITCHING,{id:v,groupId:_,name:R,type:x,url:G}),!h.details||h.details.live){var j=this.switchParams(h.url,d==null?void 0:d.details);this.loadPlaylist(j)}}},o.selectInitialTrack=function(){this.tracksInGroup;var i=this.trackName,l=this.findTrackId(i)||this.findTrackId();l!==-1?this.setAudioTrack(l):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},o.findTrackId=function(i){for(var l=this.tracksInGroup,d=0;d<l.length;d++){var h=l[d];if((!this.selectDefaultTrack||h.default)&&(!i||i===h.name))return h.id}return-1},o.loadPlaylist=function(i){p.prototype.loadPlaylist.call(this);var l=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(l)){var d=l.id,h=l.groupId,v=l.url;if(i)try{v=i.addDirectives(v)}catch(T){this.warn("Could not construct new URL with HLS Delivery Directives: "+T)}this.log("loading audio-track playlist for id: "+d),this.clearTimer(),this.hls.trigger(y.Events.AUDIO_TRACK_LOADING,{url:v,id:d,groupId:h,deliveryDirectives:i||null})}},s=r,(a=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(i){this.selectDefaultTrack=!1,this.setAudioTrack(i)}}])&&Xu(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),r}(Se);function Ju(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function es(p,f){return es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},es(p,f)}var Zu=function(p){var f,t;function r(i,l,d){var h;return(h=p.call(this,i,l,d,"[subtitle-stream-controller]")||this).levels=[],h.currentTrackId=-1,h.tracksBuffered=[],h.mainDetails=null,h._registerListeners(),h}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,es(f,t);var s,a,o=r.prototype;return o.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},o._registerListeners=function(){var i=this.hls;i.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.on(y.Events.ERROR,this.onError,this),i.on(y.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),i.on(y.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),i.on(y.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),i.on(y.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),i.on(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),i.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},o._unregisterListeners=function(){var i=this.hls;i.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.off(y.Events.ERROR,this.onError,this),i.off(y.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),i.off(y.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),i.off(y.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),i.off(y.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),i.off(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),i.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},o.startLoad=function(i){this.stopLoad(),this.state=ut,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=i,this.tick()},o.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},o.onLevelLoaded=function(i,l){this.mainDetails=l.details},o.onSubtitleFragProcessed=function(i,l){var d=l.frag,h=l.success;if(this.fragPrevious=d,this.state=ut,h){var v=this.tracksBuffered[this.currentTrackId];if(v){for(var T,_=d.start,R=0;R<v.length;R++)if(_>=v[R].start&&_<=v[R].end){T=v[R];break}var x=d.start+d.duration;T?T.end=x:(T={start:_,end:x},v.push(T)),this.fragmentTracker.fragBuffered(d)}}},o.onBufferFlushing=function(i,l){var d=l.startOffset,h=l.endOffset;if(d===0&&h!==Number.POSITIVE_INFINITY){var v=this.currentTrackId,T=this.levels;if(!T.length||!T[v]||!T[v].details)return;var _=h-T[v].details.targetduration;if(_<=0)return;l.endOffsetSubtitles=Math.max(0,_),this.tracksBuffered.forEach(function(R){for(var x=0;x<R.length;)if(R[x].end<=_)R.shift();else{if(!(R[x].start<_))break;R[x].start=_,x++}}),this.fragmentTracker.removeFragmentsInRange(d,_,O.PlaylistLevelType.SUBTITLE)}},o.onFragBuffered=function(i,l){var d;this.loadedmetadata||l.frag.type!==O.PlaylistLevelType.MAIN||(d=this.media)!==null&&d!==void 0&&d.buffered.length&&(this.loadedmetadata=!0)},o.onError=function(i,l){var d=l.frag;d&&d.type===O.PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=ut)},o.onSubtitleTracksUpdated=function(i,l){var d=this,h=l.subtitleTracks;this.tracksBuffered=[],this.levels=h.map(function(v){return new K(v)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(v){d.tracksBuffered[v.id]=[]}),this.mediaBuffer=null},o.onSubtitleTrackSwitch=function(i,l){if(this.currentTrackId=l.id,this.levels.length&&this.currentTrackId!==-1){var d=this.levels[this.currentTrackId];d!=null&&d.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,d&&this.setInterval(500)}else this.clearInterval()},o.onSubtitleTrackLoaded=function(i,l){var d,h=l.details,v=l.id,T=this.currentTrackId,_=this.levels;if(_.length){var R=_[T];if(!(v>=_.length||v!==T)&&R){this.mediaBuffer=this.mediaBufferTimeRanges;var x=0;if(h.live||(d=R.details)!==null&&d!==void 0&&d.live){var G=this.mainDetails;if(h.deltaUpdateFailed||!G)return;var j=G.fragments[0];R.details?(x=this.alignPlaylists(h,R.details))===0&&j&&Ee(h,x=j.start):h.hasProgramDateTime&&G.hasProgramDateTime?(Pa(h,G),x=h.fragments[0].start):j&&Ee(h,x=j.start)}R.details=h,this.levelLastLoaded=v,this.startFragRequested||!this.mainDetails&&h.live||this.setStartPosition(R.details,x),this.tick(),h.live&&!this.fragCurrent&&this.media&&this.state===ut&&(ji(null,h.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),R.details=void 0))}}},o._handleFragmentLoadComplete=function(i){var l=this,d=i.frag,h=i.payload,v=d.decryptdata,T=this.hls;if(!this.fragContextChanged(d)&&h&&h.byteLength>0&&v&&v.key&&v.iv&&v.method==="AES-128"){var _=performance.now();this.decrypter.decrypt(new Uint8Array(h),v.key.buffer,v.iv.buffer).then(function(R){var x=performance.now();T.trigger(y.Events.FRAG_DECRYPTED,{frag:d,payload:R,stats:{tstart:_,tdecrypt:x}})}).catch(function(R){l.warn(R.name+": "+R.message),l.state=ut})}},o.doTick=function(){if(this.media){if(this.state===ut){var i=this.currentTrackId,l=this.levels;if(!l.length||!l[i]||!l[i].details)return;var d=l[i].details,h=d.targetduration,v=this.config,T=this.getLoadPosition(),_=_t.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],T-h,v.maxBufferHole),R=_.end,x=_.len,G=this.getFwdBufferInfo(this.media,O.PlaylistLevelType.MAIN);if(x>this.getMaxBufferLength(G==null?void 0:G.len)+h)return;var j=d.fragments,J=j.length,oe=d.edge,ve=null,de=this.fragPrevious;if(R<oe){var be=v.maxFragLookUpTolerance;!(ve=ji(de,j,Math.max(j[0].start,R),be))&&de&&de.start<j[0].start&&(ve=j[0])}else ve=j[J-1];if(!ve)return;ve=this.mapToInitFragWhenRequired(ve),this.fragmentTracker.getState(ve)===Be.NOT_LOADED&&this.loadFragment(ve,d,R)}}else this.state=ut},o.getMaxBufferLength=function(i){var l=p.prototype.getMaxBufferLength.call(this);return i?Math.max(l,i):l},o.loadFragment=function(i,l,d){this.fragCurrent=i,i.sn==="initSegment"?this._loadInitSegment(i,l):(this.startFragRequested=!0,p.prototype.loadFragment.call(this,i,l,d))},s=r,(a=[{key:"mediaBufferTimeRanges",get:function(){return new ec(this.tracksBuffered[this.currentTrackId]||[])}}])&&Ju(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),r}(Yi),ec=function(p){this.buffered=void 0;var f=function(t,r,s){if((r>>>=0)>s-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+s+")");return p[r][t]};this.buffered={get length(){return p.length},end:function(t){return f("end",t,p.length)},start:function(t){return f("start",t,p.length)}}};function tc(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function ts(p,f){return ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},ts(p,f)}function rs(p){for(var f=[],t=0;t<p.length;t++){var r=p[t];r.kind==="subtitles"&&r.label&&f.push(p[t])}return f}const rc=function(p){var f,t;function r(i){var l;return(l=p.call(this,i,"[subtitle-track-controller]")||this).media=null,l.tracks=[],l.groupId=null,l.tracksInGroup=[],l.trackId=-1,l.selectDefaultTrack=!0,l.queuedDefaultTrack=-1,l.trackChangeListener=function(){return l.onTextTracksChanged()},l.asyncPollTrackChange=function(){return l.pollTrackChange(0)},l.useTextTrackPolling=!1,l.subtitlePollingInterval=-1,l._subtitleDisplay=!0,l.registerListeners(),l}t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,ts(f,t);var s,a,o=r.prototype;return o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,p.prototype.destroy.call(this)},o.registerListeners=function(){var i=this.hls;i.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.on(y.Events.LEVEL_LOADING,this.onLevelLoading,this),i.on(y.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),i.on(y.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),i.on(y.Events.ERROR,this.onError,this)},o.unregisterListeners=function(){var i=this.hls;i.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.off(y.Events.LEVEL_LOADING,this.onLevelLoading,this),i.off(y.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),i.off(y.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),i.off(y.Events.ERROR,this.onError,this)},o.onMediaAttached=function(i,l){this.media=l.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},o.pollTrackChange=function(i){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,i)},o.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),rs(this.media.textTracks).forEach(function(i){_e(i)}),this.subtitleTrack=-1,this.media=null)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},o.onManifestParsed=function(i,l){this.tracks=l.subtitleTracks},o.onSubtitleTrackLoaded=function(i,l){var d=l.id,h=l.details,v=this.trackId,T=this.tracksInGroup[v];if(T){var _=T.details;T.details=l.details,this.log("subtitle track "+d+" loaded ["+h.startSN+"-"+h.endSN+"]"),d===this.trackId&&(this.retryCount=0,this.playlistLoaded(d,l,_))}else this.warn("Invalid subtitle track id "+d)},o.onLevelLoading=function(i,l){this.switchLevel(l.level)},o.onLevelSwitching=function(i,l){this.switchLevel(l.level)},o.switchLevel=function(i){var l=this.hls.levels[i];if(l!=null&&l.textGroupIds){var d=l.textGroupIds[l.urlId];if(this.groupId!==d){var h=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,v=this.tracks.filter(function(R){return!d||R.groupId===d});this.tracksInGroup=v;var T=this.findTrackId(h==null?void 0:h.name)||this.findTrackId();this.groupId=d;var _={subtitleTracks:v};this.log("Updating subtitle tracks, "+v.length+' track(s) found in "'+d+'" group-id'),this.hls.trigger(y.Events.SUBTITLE_TRACKS_UPDATED,_),T!==-1&&this.setSubtitleTrack(T,h)}}},o.findTrackId=function(i){for(var l=this.tracksInGroup,d=0;d<l.length;d++){var h=l[d];if((!this.selectDefaultTrack||h.default)&&(!i||i===h.name))return h.id}return-1},o.onError=function(i,l){p.prototype.onError.call(this,i,l),!l.fatal&&l.context&&l.context.type===O.PlaylistContextType.SUBTITLE_TRACK&&l.context.id===this.trackId&&l.context.groupId===this.groupId&&this.retryLoadingOrFail(l)},o.loadPlaylist=function(i){p.prototype.loadPlaylist.call(this);var l=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(l)){var d=l.id,h=l.groupId,v=l.url;if(i)try{v=i.addDirectives(v)}catch(T){this.warn("Could not construct new URL with HLS Delivery Directives: "+T)}this.log("Loading subtitle playlist for id "+d),this.hls.trigger(y.Events.SUBTITLE_TRACK_LOADING,{url:v,id:d,groupId:h,deliveryDirectives:i||null})}},o.toggleTrackModes=function(i){var l=this,d=this.media,h=this.trackId;if(d){var v=rs(d.textTracks),T=v.filter(function(x){return x.groupId===l.groupId});if(i===-1)[].slice.call(v).forEach(function(x){x.mode="disabled"});else{var _=T[h];_&&(_.mode="disabled")}var R=T[i];R&&(R.mode=this.subtitleDisplay?"showing":"hidden")}},o.setSubtitleTrack=function(i,l){var d,h=this.tracksInGroup;if(this.media){if(this.trackId!==i&&this.toggleTrackModes(i),!(this.trackId===i&&(i===-1||(d=h[i])!==null&&d!==void 0&&d.details)||i<-1||i>=h.length)){this.clearTimer();var v=h[i];if(this.log("Switching to subtitle track "+i),this.trackId=i,v){var T=v.id,_=v.groupId,R=_===void 0?"":_,x=v.name,G=v.type,j=v.url;this.hls.trigger(y.Events.SUBTITLE_TRACK_SWITCH,{id:T,groupId:R,name:x,type:G,url:j});var J=this.switchParams(v.url,l==null?void 0:l.details);this.loadPlaylist(J)}else this.hls.trigger(y.Events.SUBTITLE_TRACK_SWITCH,{id:i})}}else this.queuedDefaultTrack=i},o.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var i=-1,l=rs(this.media.textTracks),d=0;d<l.length;d++)if(l[d].mode==="hidden")i=d;else if(l[d].mode==="showing"){i=d;break}this.subtitleTrack!==i&&(this.subtitleTrack=i)}},s=r,(a=[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(i){this._subtitleDisplay=i,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(i){this.selectDefaultTrack=!1;var l=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(i,l)}}])&&tc(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),r}(Se);var ct,nc=function(){function p(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var f=p.prototype;return f.append=function(t,r){var s=this.queues[r];s.push(t),s.length===1&&this.buffers[r]&&this.executeNext(r)},f.insertAbort=function(t,r){this.queues[r].unshift(t),this.executeNext(r)},f.appendBlocker=function(t){var r,s=new Promise(function(o){r=o}),a={execute:r,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(a,t),s},f.executeNext=function(t){var r=this.buffers,s=this.queues,a=r[t],o=s[t];if(o.length){var i=o[0];try{i.execute()}catch(l){k.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),i.onError(l),a&&a.updating||(o.shift(),this.executeNext(t))}}},f.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},f.current=function(t){return this.queues[t][0]},p}(),Ka=qi(),ja=/([ha]vc.)(?:\.[^.,]+)+/,ic=function(){function p(t){var r=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var s=r.media,a=r.mediaSource;k.logger.log("[buffer-controller]: Media source opened"),s&&(s.removeEventListener("emptied",r._onMediaEmptied),r.updateMediaElementDuration(),r.hls.trigger(y.Events.MEDIA_ATTACHED,{media:s})),a&&a.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},this._onMediaSourceClose=function(){k.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){k.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var s=r.media,a=r._objectUrl;s&&s.src!==a&&k.logger.error("Media element src was set while attaching MediaSource ("+a+" > "+s.src+")")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var f=p.prototype;return f.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},f.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},f.registerListeners=function(){var t=this.hls;t.on(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(y.Events.BUFFER_RESET,this.onBufferReset,this),t.on(y.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.on(y.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(y.Events.BUFFER_EOS,this.onBufferEos,this),t.on(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(y.Events.FRAG_PARSED,this.onFragParsed,this),t.on(y.Events.FRAG_CHANGED,this.onFragChanged,this)},f.unregisterListeners=function(){var t=this.hls;t.off(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(y.Events.BUFFER_RESET,this.onBufferReset,this),t.off(y.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.off(y.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(y.Events.BUFFER_EOS,this.onBufferEos,this),t.off(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(y.Events.FRAG_PARSED,this.onFragParsed,this),t.off(y.Events.FRAG_CHANGED,this.onFragChanged,this)},f._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new nc(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},f.onManifestParsed=function(t,r){var s=2;(r.audio&&!r.video||!r.altAudio)&&(s=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=s,this.details=null,k.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},f.onMediaAttaching=function(t,r){var s=this.media=r.media;if(s&&Ka){var a=this.mediaSource=new Ka;a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),s.src=self.URL.createObjectURL(a),this._objectUrl=s.src,s.addEventListener("emptied",this._onMediaEmptied)}},f.onMediaDetaching=function(){var t=this.media,r=this.mediaSource,s=this._objectUrl;if(r){if(k.logger.log("[buffer-controller]: media source detaching"),r.readyState==="open")try{r.endOfStream()}catch(a){k.logger.warn("[buffer-controller]: onMediaDetaching: "+a.message+" while calling endOfStream")}this.onBufferReset(),r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(t.removeEventListener("emptied",this._onMediaEmptied),s&&self.URL.revokeObjectURL(s),t.src===s?(t.removeAttribute("src"),t.load()):k.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(y.Events.MEDIA_DETACHED,void 0)},f.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach(function(r){var s=t.sourceBuffer[r];try{s&&(t.removeBufferListeners(r),t.mediaSource&&t.mediaSource.removeSourceBuffer(s),t.sourceBuffer[r]=void 0)}catch(a){k.logger.warn("[buffer-controller]: Failed to reset the "+r+" buffer",a)}}),this._initSourceBuffer()},f.onBufferCodecs=function(t,r){var s=this,a=this.getSourceBufferTypes().length;Object.keys(r).forEach(function(o){if(a){var i=s.tracks[o];if(i&&typeof i.buffer.changeType=="function"){var l=r[o],d=l.id,h=l.codec,v=l.levelCodec,T=l.container,_=l.metadata,R=(i.levelCodec||i.codec).replace(ja,"$1"),x=(v||h).replace(ja,"$1");if(R!==x){var G=T+";codecs="+(v||h);s.appendChangeType(o,G),k.logger.log("[buffer-controller]: switching codec "+R+" to "+x),s.tracks[o]={buffer:i.buffer,codec:h,container:T,levelCodec:v,metadata:_,id:d}}}}else s.pendingTracks[o]=r[o]}),a||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},f.appendChangeType=function(t,r){var s=this,a=this.operationQueue,o={execute:function(){var i=s.sourceBuffer[t];i&&(k.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+r),i.changeType(r)),a.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(i){k.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",i)}};a.append(o,t)},f.onBufferAppending=function(t,r){var s=this,a=this.hls,o=this.operationQueue,i=this.tracks,l=r.data,d=r.type,h=r.frag,v=r.part,T=r.chunkMeta,_=T.buffering[d],R=self.performance.now();_.start=R;var x=h.stats.buffering,G=v?v.stats.buffering:null;x.start===0&&(x.start=R),G&&G.start===0&&(G.start=R);var j=i.audio,J=!1;d==="audio"&&(j==null?void 0:j.container)==="audio/mpeg"&&(J=!this.lastMpegAudioChunk||T.id===1||this.lastMpegAudioChunk.sn!==T.sn,this.lastMpegAudioChunk=T);var oe=h.start,ve={execute:function(){if(_.executeStart=self.performance.now(),J){var de=s.sourceBuffer[d];if(de){var be=oe-de.timestampOffset;Math.abs(be)>=.1&&(k.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+oe+" (delta: "+be+") sn: "+h.sn+")"),de.timestampOffset=oe)}}s.appendExecutor(l,d)},onStart:function(){},onComplete:function(){var de=self.performance.now();_.executeEnd=_.end=de,x.first===0&&(x.first=de),G&&G.first===0&&(G.first=de);var be=s.sourceBuffer,je={};for(var Ye in be)je[Ye]=_t.getBuffered(be[Ye]);s.appendError=0,s.hls.trigger(y.Events.BUFFER_APPENDED,{type:d,frag:h,part:v,chunkMeta:T,parent:h.type,timeRanges:je})},onError:function(de){k.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",de);var be={type:I.ErrorTypes.MEDIA_ERROR,parent:h.type,details:I.ErrorDetails.BUFFER_APPEND_ERROR,err:de,fatal:!1};de.code===DOMException.QUOTA_EXCEEDED_ERR?be.details=I.ErrorDetails.BUFFER_FULL_ERROR:(s.appendError++,be.details=I.ErrorDetails.BUFFER_APPEND_ERROR,s.appendError>a.config.appendErrorMaxRetry&&(k.logger.error("[buffer-controller]: Failed "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),be.fatal=!0,a.stopLoad())),a.trigger(y.Events.ERROR,be)}};o.append(ve,d)},f.onBufferFlushing=function(t,r){var s=this,a=this.operationQueue,o=function(i){return{execute:s.removeExecutor.bind(s,i,r.startOffset,r.endOffset),onStart:function(){},onComplete:function(){s.hls.trigger(y.Events.BUFFER_FLUSHED,{type:i})},onError:function(l){k.logger.warn("[buffer-controller]: Failed to remove from "+i+" SourceBuffer",l)}}};r.type?a.append(o(r.type),r.type):this.getSourceBufferTypes().forEach(function(i){a.append(o(i),i)})},f.onFragParsed=function(t,r){var s=this,a=r.frag,o=r.part,i=[],l=o?o.elementaryStreams:a.elementaryStreams;l[q.ElementaryStreamTypes.AUDIOVIDEO]?i.push("audiovideo"):(l[q.ElementaryStreamTypes.AUDIO]&&i.push("audio"),l[q.ElementaryStreamTypes.VIDEO]&&i.push("video")),i.length===0&&k.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+a.type+" level: "+a.level+" sn: "+a.sn),this.blockBuffers(function(){var d=self.performance.now();a.stats.buffering.end=d,o&&(o.stats.buffering.end=d);var h=o?o.stats:a.stats;s.hls.trigger(y.Events.FRAG_BUFFERED,{frag:a,part:o,stats:h,id:a.type})},i)},f.onFragChanged=function(t,r){this.flushBackBuffer()},f.onBufferEos=function(t,r){var s=this;this.getSourceBufferTypes().reduce(function(a,o){var i=s.sourceBuffer[o];return!i||r.type&&r.type!==o||(i.ending=!0,i.ended||(i.ended=!0,k.logger.log("[buffer-controller]: "+o+" sourceBuffer now EOS"))),a&&!(i&&!i.ended)},!0)&&(k.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){s.getSourceBufferTypes().forEach(function(o){var i=s.sourceBuffer[o];i&&(i.ending=!1)});var a=s.mediaSource;a&&a.readyState==="open"?(k.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),a.endOfStream()):a&&k.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+a.readyState)}))},f.onLevelUpdated=function(t,r){var s=r.details;s.fragments.length&&(this.details=s,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},f.flushBackBuffer=function(){var t=this.hls,r=this.details,s=this.media,a=this.sourceBuffer;if(s&&r!==null){var o=this.getSourceBufferTypes();if(o.length){var i=r.live&&t.config.liveBackBufferLength!==null?t.config.liveBackBufferLength:t.config.backBufferLength;if((0,A.isFiniteNumber)(i)&&!(i<0)){var l=s.currentTime,d=r.levelTargetDuration,h=Math.max(i,d),v=Math.floor(l/d)*d-h;o.forEach(function(T){var _=a[T];if(_){var R=_t.getBuffered(_);if(R.length>0&&v>R.start(0)){if(t.trigger(y.Events.BACK_BUFFER_REACHED,{bufferEnd:v}),r.live)t.trigger(y.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:v});else if(_.ended&&R.end(R.length-1)-l<2*d)return void k.logger.info("[buffer-controller]: Cannot flush "+T+" back buffer while SourceBuffer is in ended state");t.trigger(y.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:v,type:T})}}})}}}},f.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var t=this.details,r=this.hls,s=this.media,a=this.mediaSource,o=t.fragments[0].start+t.totalduration,i=s.duration,l=(0,A.isFiniteNumber)(a.duration)?a.duration:0;t.live&&r.config.liveDurationInfinity?(k.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),a.duration=1/0,this.updateSeekableRange(t)):(o>l&&o>i||!(0,A.isFiniteNumber)(i))&&(k.logger.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),a.duration=o)}},f.updateSeekableRange=function(t){var r=this.mediaSource,s=t.fragments;if(s.length&&t.live&&r!=null&&r.setLiveSeekableRange){var a=Math.max(0,s[0].start),o=Math.max(a,a+t.totalduration);r.setLiveSeekableRange(a,o)}},f.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,r=this.operationQueue,s=this.pendingTracks,a=Object.keys(s).length;if(a&&!t||a===2){this.createSourceBuffers(s),this.pendingTracks={};var o=this.getSourceBufferTypes();if(o.length===0)return void this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});o.forEach(function(i){r.executeNext(i)})}},f.createSourceBuffers=function(t){var r=this.sourceBuffer,s=this.mediaSource;if(!s)throw Error("createSourceBuffers called when mediaSource was null");var a=0;for(var o in t)if(!r[o]){var i=t[o];if(!i)throw Error("source buffer exists for track "+o+", however track does not");var l=i.levelCodec||i.codec,d=i.container+";codecs="+l;k.logger.log("[buffer-controller]: creating sourceBuffer("+d+")");try{var h=r[o]=s.addSourceBuffer(d),v=o;this.addBufferListener(v,"updatestart",this._onSBUpdateStart),this.addBufferListener(v,"updateend",this._onSBUpdateEnd),this.addBufferListener(v,"error",this._onSBUpdateError),this.tracks[o]={buffer:h,codec:l,container:i.container,levelCodec:i.levelCodec,metadata:i.metadata,id:i.id},a++}catch(T){k.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+T.message),this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:T,mimeType:d})}}a&&this.hls.trigger(y.Events.BUFFER_CREATED,{tracks:this.tracks})},f._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},f._onSBUpdateEnd=function(t){var r=this.operationQueue;r.current(t).onComplete(),r.shiftAndExecuteNext(t)},f._onSBUpdateError=function(t,r){k.logger.error("[buffer-controller]: "+t+" SourceBuffer error",r),this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var s=this.operationQueue.current(t);s&&s.onError(r)},f.removeExecutor=function(t,r,s){var a=this.media,o=this.mediaSource,i=this.operationQueue,l=this.sourceBuffer[t];if(!a||!o||!l)return k.logger.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(t);var d=(0,A.isFiniteNumber)(a.duration)?a.duration:1/0,h=(0,A.isFiniteNumber)(o.duration)?o.duration:1/0,v=Math.max(0,r),T=Math.min(s,d,h);T>v&&!l.ending?(l.ended=!1,k.logger.log("[buffer-controller]: Removing ["+v+","+T+"] from the "+t+" SourceBuffer"),l.remove(v,T)):i.shiftAndExecuteNext(t)},f.appendExecutor=function(t,r){var s=this.operationQueue,a=this.sourceBuffer[r];if(!a)return k.logger.warn("[buffer-controller]: Attempting to append to the "+r+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(r);a.ended=!1,a.appendBuffer(t)},f.blockBuffers=function(t,r){var s=this;if(r===void 0&&(r=this.getSourceBufferTypes()),!r.length)return k.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);var a=this.operationQueue,o=r.map(function(i){return a.appendBlocker(i)});Promise.all(o).then(function(){t(),r.forEach(function(i){var l=s.sourceBuffer[i];l&&l.updating||a.shiftAndExecuteNext(i)})})},f.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},f.addBufferListener=function(t,r,s){var a=this.sourceBuffer[t];if(a){var o=s.bind(this,t);this.listeners[t].push({event:r,listener:o}),a.addEventListener(r,o)}},f.removeBufferListeners=function(t){var r=this.sourceBuffer[t];r&&this.listeners[t].forEach(function(s){r.removeEventListener(s.event,s.listener)})},p}(),Ga={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Va=function(p){var f=p;return Ga.hasOwnProperty(p)&&(f=Ga[p]),String.fromCharCode(f)},Br=15,vr=100,sc={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ac={17:2,18:4,21:6,22:8,23:10,19:13,20:15},oc={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},lc={25:2,26:4,29:6,30:8,31:10,27:13,28:15},uc=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(function(p){p[p.ERROR=0]="ERROR",p[p.TEXT=1]="TEXT",p[p.WARNING=2]="WARNING",p[p.INFO=2]="INFO",p[p.DEBUG=3]="DEBUG",p[p.DATA=3]="DATA"})(ct||(ct={}));var cc=function(){function p(){this.time=null,this.verboseLevel=ct.ERROR}return p.prototype.log=function(f,t){if(this.verboseLevel>=f){var r=typeof t=="function"?t():t;k.logger.log(this.time+" ["+f+"] "+r)}},p}(),Hr=function(p){for(var f=[],t=0;t<p.length;t++)f.push(p[t].toString(16));return f},Wa=function(){function p(t,r,s,a,o){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=r||!1,this.italics=s||!1,this.background=a||"black",this.flash=o||!1}var f=p.prototype;return f.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},f.setStyles=function(t){for(var r=["foreground","underline","italics","background","flash"],s=0;s<r.length;s++){var a=r[s];t.hasOwnProperty(a)&&(this[a]=t[a])}},f.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},f.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},f.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},f.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},p}(),fc=function(){function p(t,r,s,a,o,i){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Wa(r,s,a,o,i)}var f=p.prototype;return f.reset=function(){this.uchar=" ",this.penState.reset()},f.setChar=function(t,r){this.uchar=t,this.penState.copy(r)},f.setPenState=function(t){this.penState.copy(t)},f.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},f.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},f.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},p}(),dc=function(){function p(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var r=0;r<vr;r++)this.chars.push(new fc);this.logger=t,this.pos=0,this.currPenState=new Wa}var f=p.prototype;return f.equals=function(t){for(var r=!0,s=0;s<vr;s++)if(!this.chars[s].equals(t.chars[s])){r=!1;break}return r},f.copy=function(t){for(var r=0;r<vr;r++)this.chars[r].copy(t.chars[r])},f.isEmpty=function(){for(var t=!0,r=0;r<vr;r++)if(!this.chars[r].isEmpty()){t=!1;break}return t},f.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(ct.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>vr&&(this.logger.log(ct.DEBUG,"Too large cursor position "+this.pos),this.pos=vr)},f.moveCursor=function(t){var r=this.pos+t;if(t>1)for(var s=this.pos+1;s<r+1;s++)this.chars[s].setPenState(this.currPenState);this.setCursor(r)},f.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},f.insertChar=function(t){var r=this;t>=144&&this.backSpace();var s=Va(t);this.pos>=vr?this.logger.log(ct.ERROR,function(){return"Cannot insert "+t.toString(16)+" ("+s+") at position "+r.pos+". Skipping it!"}):(this.chars[this.pos].setChar(s,this.currPenState),this.moveCursor(1))},f.clearFromPos=function(t){var r;for(r=t;r<vr;r++)this.chars[r].reset()},f.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},f.clearToEndOfRow=function(){this.clearFromPos(this.pos)},f.getTextString=function(){for(var t=[],r=!0,s=0;s<vr;s++){var a=this.chars[s].uchar;a!==" "&&(r=!1),t.push(a)}return r?"":t.join("")},f.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},p}(),ns=function(){function p(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var r=0;r<Br;r++)this.rows.push(new dc(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var f=p.prototype;return f.reset=function(){for(var t=0;t<Br;t++)this.rows[t].clear();this.currRow=14},f.equals=function(t){for(var r=!0,s=0;s<Br;s++)if(!this.rows[s].equals(t.rows[s])){r=!1;break}return r},f.copy=function(t){for(var r=0;r<Br;r++)this.rows[r].copy(t.rows[r])},f.isEmpty=function(){for(var t=!0,r=0;r<Br;r++)if(!this.rows[r].isEmpty()){t=!1;break}return t},f.backSpace=function(){this.rows[this.currRow].backSpace()},f.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},f.insertChar=function(t){this.rows[this.currRow].insertChar(t)},f.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},f.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},f.setCursor=function(t){this.logger.log(ct.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},f.setPAC=function(t){this.logger.log(ct.INFO,function(){return"pacData = "+JSON.stringify(t)});var r=t.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(var s=0;s<Br;s++)this.rows[s].clear();var a=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){var i=o.rows[a].cueStartTime,l=this.logger.time;if(i&&l!==null&&i<l)for(var d=0;d<this.nrRollUpRows;d++)this.rows[r-this.nrRollUpRows+d+1].copy(o.rows[a+d])}}this.currRow=r;var h=this.rows[this.currRow];if(t.indent!==null){var v=t.indent,T=Math.max(v-1,0);h.setCursor(t.indent),t.color=h.chars[T].penState.foreground}var _={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(_)},f.setBkgData=function(t){this.logger.log(ct.INFO,function(){return"bkgData = "+JSON.stringify(t)}),this.backSpace(),this.setPen(t),this.insertChar(32)},f.setRollUpRows=function(t){this.nrRollUpRows=t},f.rollUp=function(){var t=this;if(this.nrRollUpRows!==null){this.logger.log(ct.TEXT,function(){return t.getDisplayText()});var r=this.currRow+1-this.nrRollUpRows,s=this.rows.splice(r,1)[0];s.clear(),this.rows.splice(this.currRow,0,s),this.logger.log(ct.INFO,"Rolling up")}else this.logger.log(ct.DEBUG,"roll_up but nrRollUpRows not set yet")},f.getDisplayText=function(t){t=t||!1;for(var r=[],s="",a=-1,o=0;o<Br;o++){var i=this.rows[o].getTextString();i&&(a=o+1,t?r.push("Row "+a+": '"+i+"'"):r.push(i.trim()))}return r.length>0&&(s=t?"["+r.join(" | ")+"]":r.join(`
`)),s},f.getTextAndFormat=function(){return this.rows},p}(),Ya=function(){function p(t,r,s){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new ns(s),this.nonDisplayedMemory=new ns(s),this.lastOutputScreen=new ns(s),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=s}var f=p.prototype;return f.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},f.getHandler=function(){return this.outputFilter},f.setHandler=function(t){this.outputFilter=t},f.setPAC=function(t){this.writeScreen.setPAC(t)},f.setBkgData=function(t){this.writeScreen.setBkgData(t)},f.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(ct.INFO,function(){return"MODE="+t}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},f.insertChars=function(t){for(var r=this,s=0;s<t.length;s++)this.writeScreen.insertChar(t[s]);var a=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(ct.INFO,function(){return a+": "+r.writeScreen.getDisplayText(!0)}),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(ct.TEXT,function(){return"DISPLAYED: "+r.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},f.ccRCL=function(){this.logger.log(ct.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},f.ccBS=function(){this.logger.log(ct.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},f.ccAOF=function(){},f.ccAON=function(){},f.ccDER=function(){this.logger.log(ct.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},f.ccRU=function(t){this.logger.log(ct.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},f.ccFON=function(){this.logger.log(ct.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},f.ccRDC=function(){this.logger.log(ct.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},f.ccTR=function(){this.logger.log(ct.INFO,"TR"),this.setMode("MODE_TEXT")},f.ccRTD=function(){this.logger.log(ct.INFO,"RTD"),this.setMode("MODE_TEXT")},f.ccEDM=function(){this.logger.log(ct.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},f.ccCR=function(){this.logger.log(ct.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},f.ccENM=function(){this.logger.log(ct.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},f.ccEOC=function(){var t=this;if(this.logger.log(ct.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var r=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=r,this.writeScreen=this.nonDisplayedMemory,this.logger.log(ct.TEXT,function(){return"DISP: "+t.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},f.ccTO=function(t){this.logger.log(ct.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},f.ccMIDROW=function(t){var r={flash:!1};if(r.underline=t%2==1,r.italics=t>=46,r.italics)r.foreground="white";else{var s=Math.floor(t/2)-16;r.foreground=["white","green","blue","cyan","red","yellow","magenta"][s]}this.logger.log(ct.INFO,"MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)},f.outputDataUpdate=function(t){t===void 0&&(t=!1);var r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r):this.cueStartTime=r,this.lastOutputScreen.copy(this.displayedMemory))},f.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},p}(),hc=function(){function p(t,r,s){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new cc;this.channels=[null,new Ya(t,r,a),new Ya(t+1,s,a)],this.cmdHistory={a:null,b:null},this.logger=a}var f=p.prototype;return f.getHandler=function(t){return this.channels[t].getHandler()},f.setHandler=function(t,r){this.channels[t].setHandler(r)},f.addData=function(t,r){var s,a,o,i=!1;this.logger.time=t;for(var l=0;l<r.length;l+=2)if(a=127&r[l],o=127&r[l+1],a!==0||o!==0){if(this.logger.log(ct.DATA,"["+Hr([r[l],r[l+1]])+"] -> ("+Hr([a,o])+")"),(s=this.parseCmd(a,o))||(s=this.parseMidrow(a,o)),s||(s=this.parsePAC(a,o)),s||(s=this.parseBackgroundAttributes(a,o)),!s&&(i=this.parseChars(a,o))){var d=this.currentChannel;d&&d>0?this.channels[d].insertChars(i):this.logger.log(ct.WARNING,"No channel found yet. TEXT-MODE?")}s||i||this.logger.log(ct.WARNING,"Couldn't parse cleaned data "+Hr([a,o])+" orig: "+Hr([r[l],r[l+1]]))}},f.parseCmd=function(t,r){var s=this.cmdHistory;if(!((t===20||t===28||t===21||t===29)&&r>=32&&r<=47||(t===23||t===31)&&r>=33&&r<=35))return!1;if(qa(t,r,s))return Zr(null,null,s),this.logger.log(ct.DEBUG,"Repeated command ("+Hr([t,r])+") is dropped"),!0;var a=t===20||t===21||t===23?1:2,o=this.channels[a];return t===20||t===21||t===28||t===29?r===32?o.ccRCL():r===33?o.ccBS():r===34?o.ccAOF():r===35?o.ccAON():r===36?o.ccDER():r===37?o.ccRU(2):r===38?o.ccRU(3):r===39?o.ccRU(4):r===40?o.ccFON():r===41?o.ccRDC():r===42?o.ccTR():r===43?o.ccRTD():r===44?o.ccEDM():r===45?o.ccCR():r===46?o.ccENM():r===47&&o.ccEOC():o.ccTO(r-32),Zr(t,r,s),this.currentChannel=a,!0},f.parseMidrow=function(t,r){var s=0;if((t===17||t===25)&&r>=32&&r<=47){if((s=t===17?1:2)!==this.currentChannel)return this.logger.log(ct.ERROR,"Mismatch channel in midrow parsing"),!1;var a=this.channels[s];return!!a&&(a.ccMIDROW(r),this.logger.log(ct.DEBUG,"MIDROW ("+Hr([t,r])+")"),!0)}return!1},f.parsePAC=function(t,r){var s,a=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&r>=64&&r<=127||(t===16||t===24)&&r>=64&&r<=95))return!1;if(qa(t,r,a))return Zr(null,null,a),!0;var o=t<=23?1:2;s=r>=64&&r<=95?o===1?sc[t]:oc[t]:o===1?ac[t]:lc[t];var i=this.channels[o];return!!i&&(i.setPAC(this.interpretPAC(s,r)),Zr(t,r,a),this.currentChannel=o,!0)},f.interpretPAC=function(t,r){var s,a={color:null,italics:!1,indent:null,underline:!1,row:t};return s=r>95?r-96:r-64,a.underline=(1&s)==1,s<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(s/2)]:s<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((s-16)/2),a},f.parseChars=function(t,r){var s,a,o=null,i=null;if(t>=25?(s=2,i=t-8):(s=1,i=t),i>=17&&i<=19?(a=i===17?r+80:i===18?r+112:r+144,this.logger.log(ct.INFO,"Special char '"+Va(a)+"' in channel "+s),o=[a]):t>=32&&t<=127&&(o=r===0?[t]:[t,r]),o){var l=Hr(o);this.logger.log(ct.DEBUG,"Char codes =  "+l.join(",")),Zr(t,r,this.cmdHistory)}return o},f.parseBackgroundAttributes=function(t,r){var s;if(!((t===16||t===24)&&r>=32&&r<=47||(t===23||t===31)&&r>=45&&r<=47))return!1;var a={};t===16||t===24?(s=Math.floor((r-32)/2),a.background=uc[s],r%2==1&&(a.background=a.background+"_semi")):r===45?a.background="transparent":(a.foreground="black",r===47&&(a.underline=!0));var o=t<=23?1:2;return this.channels[o].setBkgData(a),Zr(t,r,this.cmdHistory),!0},f.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var r=this.channels[t];r&&r.reset()}this.cmdHistory={a:null,b:null}},f.cueSplitAtTime=function(t){for(var r=0;r<this.channels.length;r++){var s=this.channels[r];s&&s.cueSplitAtTime(t)}},p}();function Zr(p,f,t){t.a=p,t.b=f}function qa(p,f,t){return t.a===p&&t.b===f}const $a=hc;var Xn=function(){function p(t,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=r}var f=p.prototype;return f.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},f.newCue=function(t,r,s){(this.startTime===null||this.startTime>t)&&(this.startTime=t),this.endTime=r,this.screen=s,this.timelineController.createCaptionsTrack(this.trackName)},f.reset=function(){this.cueRanges=[],this.startTime=null},p}();const is=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var p=["","lr","rl"],f=["start","middle","end","left","right"];function t(o,i){if(typeof i!="string"||!Array.isArray(o))return!1;var l=i.toLowerCase();return!!~o.indexOf(l)&&l}function r(o){return t(f,o)}function s(o){for(var i=arguments.length,l=new Array(i>1?i-1:0),d=1;d<i;d++)l[d-1]=arguments[d];for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var T in v)o[T]=v[T]}return o}function a(o,i,l){var d=this,h={enumerable:!0};d.hasBeenReset=!1;var v="",T=!1,_=o,R=i,x=l,G=null,j="",J=!0,oe="auto",ve="start",de=50,be="middle",je=50,Ye="middle";Object.defineProperty(d,"id",s({},h,{get:function(){return v},set:function(Le){v=""+Le}})),Object.defineProperty(d,"pauseOnExit",s({},h,{get:function(){return T},set:function(Le){T=!!Le}})),Object.defineProperty(d,"startTime",s({},h,{get:function(){return _},set:function(Le){if(typeof Le!="number")throw new TypeError("Start time must be set to a number.");_=Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",s({},h,{get:function(){return R},set:function(Le){if(typeof Le!="number")throw new TypeError("End time must be set to a number.");R=Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",s({},h,{get:function(){return x},set:function(Le){x=""+Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",s({},h,{get:function(){return G},set:function(Le){G=Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",s({},h,{get:function(){return j},set:function(Le){var He=function(Oe){return t(p,Oe)}(Le);if(He===!1)throw new SyntaxError("An invalid or illegal string was specified.");j=He,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",s({},h,{get:function(){return J},set:function(Le){J=!!Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",s({},h,{get:function(){return oe},set:function(Le){if(typeof Le!="number"&&Le!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");oe=Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",s({},h,{get:function(){return ve},set:function(Le){var He=r(Le);if(!He)throw new SyntaxError("An invalid or illegal string was specified.");ve=He,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",s({},h,{get:function(){return de},set:function(Le){if(Le<0||Le>100)throw new Error("Position must be between 0 and 100.");de=Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",s({},h,{get:function(){return be},set:function(Le){var He=r(Le);if(!He)throw new SyntaxError("An invalid or illegal string was specified.");be=He,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",s({},h,{get:function(){return je},set:function(Le){if(Le<0||Le>100)throw new Error("Size must be between 0 and 100.");je=Le,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",s({},h,{get:function(){return Ye},set:function(Le){var He=r(Le);if(!He)throw new SyntaxError("An invalid or illegal string was specified.");Ye=He,this.hasBeenReset=!0}})),d.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();var gc=function(){function p(){}return p.prototype.decode=function(f,t){if(!f)return"";if(typeof f!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(f))},p}();function za(p){function f(r,s,a,o){return 3600*(0|r)+60*(0|s)+(0|a)+parseFloat(o||0)}var t=p.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?f(t[2],t[3],0,t[4]):f(t[1],t[2],t[3],t[4]):null}var pc=function(){function p(){this.values=Object.create(null)}var f=p.prototype;return f.set=function(t,r){this.get(t)||r===""||(this.values[t]=r)},f.get=function(t,r,s){return s?this.has(t)?this.values[t]:r[s]:this.has(t)?this.values[t]:r},f.has=function(t){return t in this.values},f.alt=function(t,r,s){for(var a=0;a<s.length;++a)if(r===s[a]){this.set(t,r);break}},f.integer=function(t,r){/^-?\d+$/.test(r)&&this.set(t,parseInt(r,10))},f.percent=function(t,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){var s=parseFloat(r);if(s>=0&&s<=100)return this.set(t,s),!0}return!1},p}();function Xa(p,f,t,r){var s=r?p.split(r):[p];for(var a in s)if(typeof s[a]=="string"){var o=s[a].split(t);o.length===2&&f(o[0],o[1])}}var ss=new is(0,0,""),Qn=ss.align==="middle"?"middle":"center";function vc(p,f,t){var r=p;function s(){var o=za(p);if(o===null)throw new Error("Malformed timestamp: "+r);return p=p.replace(/^[^\sa-zA-Z-]+/,""),o}function a(){p=p.replace(/^\s+/,"")}if(a(),f.startTime=s(),a(),p.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);p=p.slice(3),a(),f.endTime=s(),a(),function(o,i){var l=new pc;Xa(o,function(v,T){var _;switch(v){case"region":for(var R=t.length-1;R>=0;R--)if(t[R].id===T){l.set(v,t[R].region);break}break;case"vertical":l.alt(v,T,["rl","lr"]);break;case"line":_=T.split(","),l.integer(v,_[0]),l.percent(v,_[0])&&l.set("snapToLines",!1),l.alt(v,_[0],["auto"]),_.length===2&&l.alt("lineAlign",_[1],["start",Qn,"end"]);break;case"position":_=T.split(","),l.percent(v,_[0]),_.length===2&&l.alt("positionAlign",_[1],["start",Qn,"end","line-left","line-right","auto"]);break;case"size":l.percent(v,T);break;case"align":l.alt(v,T,["start",Qn,"end","left","right"])}},/:/,/\s/),i.region=l.get("region",null),i.vertical=l.get("vertical","");var d=l.get("line","auto");d==="auto"&&ss.line===-1&&(d=-1),i.line=d,i.lineAlign=l.get("lineAlign","start"),i.snapToLines=l.get("snapToLines",!0),i.size=l.get("size",100),i.align=l.get("align",Qn);var h=l.get("position","auto");h==="auto"&&ss.position===50&&(h=i.align==="start"||i.align==="left"?0:i.align==="end"||i.align==="right"?100:50),i.position=h}(p,f)}function Qa(p){return p.replace(/<br(?: \/)?>/gi,`
`)}var mc=function(){function p(){this.state="INITIAL",this.buffer="",this.decoder=new gc,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var f=p.prototype;return f.parse=function(t){var r=this;function s(){var d=r.buffer,h=0;for(d=Qa(d);h<d.length&&d[h]!=="\r"&&d[h]!==`
`;)++h;var v=d.slice(0,h);return d[h]==="\r"&&++h,d[h]===`
`&&++h,r.buffer=d.slice(h),v}t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));try{var a="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;var o=(a=s()).match(/^()?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var i=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(i?i=!1:a=s(),r.state){case"HEADER":/:/.test(a)?Xa(a,function(d,h){},/:/):a||(r.state="ID");continue;case"NOTE":a||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){r.state="NOTE";break}if(!a)continue;if(r.cue=new is(0,0,""),r.state="CUE",a.indexOf("-->")===-1){r.cue.id=a;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{vc(a,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var l=a.indexOf("-->")!==-1;if(!a||l&&(i=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=a;continue;case"BADCUE":a||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},f.flush=function(){var t=this;try{if((t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL"||t.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){t.onparsingerror&&t.onparsingerror(r)}return t.onflush&&t.onflush(),this},p}(),Ja=b(673),yc=b(524),Ec=/\r\n|\n\r|\n|\r/g,as=function(p,f,t){return t===void 0&&(t=0),p.slice(t,t+f.length)===f},os=function(p){for(var f=5381,t=p.length;t;)f=33*f^p.charCodeAt(--t);return(f>>>0).toString()};function ls(p,f,t){return os(p.toString())+os(f.toString())+os(t)}function us(){return us=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},us.apply(this,arguments)}var cs="stpp.ttml.im1t",Za=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,eo=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Tc={left:"start",center:"center",right:"end",start:"start",end:"end"};function to(p,f,t,r,s){var a=(0,he.findBox)(new Uint8Array(p),["mdat"]);if(a.length!==0){var o=a.map(function(l){return(0,ye.utf8ArrayToStr)(l)}),i=(0,Ja.toTimescaleFromScale)(f,1,t);try{o.forEach(function(l){return r(function(d,h){var v=new DOMParser().parseFromString(d,"text/xml").getElementsByTagName("tt")[0];if(!v)throw new Error("Invalid ttml");var T={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},_=Object.keys(T).reduce(function(J,oe){return J[oe]=v.getAttribute("ttp:"+oe)||T[oe],J},{}),R=v.getAttribute("xml:space")!=="preserve",x=ro(fs(v,"styling","style")),G=ro(fs(v,"layout","region")),j=fs(v,"body","[begin]");return[].map.call(j,function(J){var oe=no(J,R);if(!oe||!J.hasAttribute("begin"))return null;var ve=hs(J.getAttribute("begin"),_),de=hs(J.getAttribute("dur"),_),be=hs(J.getAttribute("end"),_);if(ve===null)throw io(J);if(be===null){if(de===null)throw io(J);be=ve+de}var je=new is(ve-h,be-h,oe);je.id=ls(je.startTime,je.endTime,je.text);var Ye=function(Oe,ot,Et){var st="http://www.w3.org/ns/ttml#styling",lt=null,gt=Oe!=null&&Oe.hasAttribute("style")?Oe.getAttribute("style"):null;return gt&&Et.hasOwnProperty(gt)&&(lt=Et[gt]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(Nt,It){var At=ds(ot,st,It)||ds(Oe,st,It)||ds(lt,st,It);return At&&(Nt[It]=At),Nt},{})}(G[J.getAttribute("region")],x[J.getAttribute("style")],x),Le=Ye.textAlign;if(Le){var He=Tc[Le];He&&(je.lineAlign=He),je.align=Le}return us(je,Ye),je}).filter(function(J){return J!==null})}(l,i))})}catch(l){s(l)}}else s(new Error("Could not parse IMSC1 mdat"))}function fs(p,f,t){var r=p.getElementsByTagName(f)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function ro(p){return p.reduce(function(f,t){var r=t.getAttribute("xml:id");return r&&(f[r]=t),f},{})}function no(p,f){return[].slice.call(p.childNodes).reduce(function(t,r,s){var a;return r.nodeName==="br"&&s?t+`
`:(a=r.childNodes)!==null&&a!==void 0&&a.length?no(r,f):f?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function ds(p,f,t){return p&&p.hasAttributeNS(f,t)?p.getAttributeNS(f,t):null}function io(p){return new Error("Could not parse ttml timestamp "+p)}function hs(p,f){if(!p)return null;var t=za(p);return t===null&&(Za.test(p)?t=function(r,s){var a=Za.exec(r),o=(0|a[4])+(0|a[5])/s.subFrameRate;return 3600*(0|a[1])+60*(0|a[2])+(0|a[3])+o/s.frameRate}(p,f):eo.test(p)&&(t=function(r,s){var a=eo.exec(r),o=Number(a[1]);switch(a[2]){case"h":return 3600*o;case"m":return 60*o;case"ms":return 1e3*o;case"f":return o/s.frameRate;case"t":return o/s.tickRate}return o}(p,f))),t}var bc=function(){function p(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var r=new Xn(this,"textTrack1"),s=new Xn(this,"textTrack2"),a=new Xn(this,"textTrack3"),o=new Xn(this,"textTrack4");this.cea608Parser1=new $a(1,r,s),this.cea608Parser2=new $a(3,a,o)}t.on(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(y.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(y.Events.FRAG_LOADING,this.onFragLoading,this),t.on(y.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(y.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(y.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(y.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(y.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var f=p.prototype;return f.destroy=function(){var t=this.hls;t.off(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(y.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(y.Events.FRAG_LOADING,this.onFragLoading,this),t.off(y.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(y.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(y.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(y.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(y.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},f.addCues=function(t,r,s,a,o){for(var i,l,d,h,v=!1,T=o.length;T--;){var _=o[T],R=(i=_[0],l=_[1],d=r,h=s,Math.min(l,h)-Math.max(i,d));if(R>=0&&(_[0]=Math.min(_[0],r),_[1]=Math.max(_[1],s),v=!0,R/(s-r)>.5))return}if(v||o.push([r,s]),this.config.renderTextTracksNatively){var x=this.captionsTracks[t];this.Cues.newCue(x,r,s,a)}else{var G=this.Cues.newCue(null,r,s,a);this.hls.trigger(y.Events.CUES_PARSED,{type:"captions",cues:G,track:t})}},f.onInitPtsFound=function(t,r){var s=this,a=r.frag,o=r.id,i=r.initPTS,l=r.timescale,d=this.unparsedVttFrags;o==="main"&&(this.initPTS[a.cc]=i,this.timescale[a.cc]=l),d.length&&(this.unparsedVttFrags=[],d.forEach(function(h){s.onFragLoaded(y.Events.FRAG_LOADED,h)}))},f.getExistingTrack=function(t){var r=this.media;if(r)for(var s=0;s<r.textTracks.length;s++){var a=r.textTracks[s];if(a[t])return a}return null},f.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},f.createNativeTrack=function(t){if(!this.captionsTracks[t]){var r=this.captionsProperties,s=this.captionsTracks,a=this.media,o=r[t],i=o.label,l=o.languageCode,d=this.getExistingTrack(t);if(d)s[t]=d,_e(s[t]),Te(s[t],a);else{var h=this.createTextTrack("captions",i,l);h&&(h[t]=!0,s[t]=h)}}},f.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var r=this.captionsProperties[t];if(r){var s={_id:t,label:r.label,kind:"captions",default:!!r.media&&!!r.media.default,closedCaptions:r.media};this.nonNativeCaptionsTracks[t]=s,this.hls.trigger(y.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}}},f.createTextTrack=function(t,r,s){var a=this.media;if(a)return a.addTextTrack(t,r,s)},f.onMediaAttaching=function(t,r){this.media=r.media,this._cleanTracks()},f.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(r){_e(t[r]),delete t[r]}),this.nonNativeCaptionsTracks={}},f.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},f._cleanTracks=function(){var t=this.media;if(t){var r=t.textTracks;if(r)for(var s=0;s<r.length;s++)_e(r[s])}},f.onSubtitleTracksUpdated=function(t,r){var s=this;this.textTracks=[];var a=r.subtitleTracks||[],o=a.some(function(h){return h.textCodec===cs});if(this.config.enableWebVTT||o&&this.config.enableIMSC1){var i=this.tracks&&a&&this.tracks.length===a.length;if(this.tracks=a||[],this.config.renderTextTracksNatively){var l=this.media?this.media.textTracks:[];this.tracks.forEach(function(h,v){var T;if(v<l.length){for(var _=null,R=0;R<l.length;R++)if(Sc(l[R],h)){_=l[R];break}_&&(T=_)}if(T)_e(T);else{var x=s._captionsOrSubtitlesFromCharacteristics(h);(T=s.createTextTrack(x,h.name,h.lang))&&(T.mode="disabled")}T&&(T.groupId=h.groupId,s.textTracks.push(T))})}else if(!i&&this.tracks&&this.tracks.length){var d=this.tracks.map(function(h){return{label:h.name,kind:h.type.toLowerCase(),default:h.default,subtitleTrack:h}});this.hls.trigger(y.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:d})}}},f._captionsOrSubtitlesFromCharacteristics=function(t){var r;if((r=t.attrs)!==null&&r!==void 0&&r.CHARACTERISTICS){var s=/transcribes-spoken-dialog/gi.test(t.attrs.CHARACTERISTICS),a=/describes-music-and-sound/gi.test(t.attrs.CHARACTERISTICS);if(s&&a)return"captions"}return"subtitles"},f.onManifestLoaded=function(t,r){var s=this;this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(function(a){var o=/(?:CC|SERVICE)([1-4])/.exec(a.instreamId);if(o){var i="textTrack"+o[1],l=s.captionsProperties[i];l&&(l.label=a.name,a.lang&&(l.languageCode=a.lang),l.media=a)}})},f.closedCaptionsForLevel=function(t){var r=this.hls.levels[t.level];return r==null?void 0:r.attrs["CLOSED-CAPTIONS"]},f.onFragLoading=function(t,r){var s=this.cea608Parser1,a=this.cea608Parser2,o=this.lastSn,i=this.lastPartIndex;if(this.enabled&&s&&a&&r.frag.type===O.PlaylistLevelType.MAIN){var l,d,h=r.frag.sn,v=(l=r==null||(d=r.part)===null||d===void 0?void 0:d.index)!=null?l:-1;h===o+1||h===o&&v===i+1||(s.reset(),a.reset()),this.lastSn=h,this.lastPartIndex=v}},f.onFragLoaded=function(t,r){var s=r.frag,a=r.payload,o=this.initPTS,i=this.unparsedVttFrags;if(s.type===O.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!(0,A.isFiniteNumber)(o[s.cc]))return i.push(r),void(o.length&&this.hls.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:new Error("Missing initial subtitle PTS")}));var l=s.decryptdata,d="stats"in r;if(l==null||!l.encrypted||d){var h=this.tracks[s.level],v=this.vttCCs;v[s.cc]||(v[s.cc]={start:s.start,prevCC:this.prevCC,new:!0},this.prevCC=s.cc),h&&h.textCodec===cs?this._parseIMSC1(s,a):this._parseVTTs(s,a,v)}}else this.hls.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:new Error("Empty subtitle payload")})},f._parseIMSC1=function(t,r){var s=this,a=this.hls;to(r,this.initPTS[t.cc],this.timescale[t.cc],function(o){s._appendCues(o,t.level),a.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(o){k.logger.log("Failed to parse IMSC1: "+o),a.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:o})})},f._parseVTTs=function(t,r,s){var a,o=this,i=this.hls;(function(l,d,h,v,T,_,R,x){var G,j=new mc,J=(0,ye.utf8ArrayToStr)(new Uint8Array(l)).trim().replace(Ec,`
`).split(`
`),oe=[],ve=(0,Ja.toMpegTsClockFromTimescale)(d,h),de="00:00.000",be=0,je=0,Ye=!0;j.oncue=function(Le){var He=v[T],Oe=v.ccOffset,ot=(be-ve)/9e4;He!=null&&He.new&&(je!==void 0?Oe=v.ccOffset=He.start:function(gt,Nt,It){var At=gt[Nt],Dt=gt[At.prevCC];if(!Dt||!Dt.new&&At.new)return gt.ccOffset=gt.presentationOffset=At.start,void(At.new=!1);for(;(mr=Dt)!==null&&mr!==void 0&&mr.new;){var mr;gt.ccOffset+=At.start-Dt.start,At.new=!1,Dt=gt[(At=Dt).prevCC]}gt.presentationOffset=It}(v,T,ot)),ot&&(Oe=ot-v.presentationOffset);var Et=Le.endTime-Le.startTime,st=(0,yc.normalizePts)(9e4*(Le.startTime+Oe-je),9e4*_)/9e4;Le.startTime=Math.max(st,0),Le.endTime=Math.max(st+Et,0);var lt=Le.text.trim();Le.text=decodeURIComponent(encodeURIComponent(lt)),Le.id||(Le.id=ls(Le.startTime,Le.endTime,lt)),Le.endTime>0&&oe.push(Le)},j.onparsingerror=function(Le){G=Le},j.onflush=function(){G?x(G):R(oe)},J.forEach(function(Le){if(Ye){if(as(Le,"X-TIMESTAMP-MAP=")){Ye=!1,Le.slice(16).split(",").forEach(function(He){as(He,"LOCAL:")?de=He.slice(6):as(He,"MPEGTS:")&&(be=parseInt(He.slice(7)))});try{je=function(He){var Oe=parseInt(He.slice(-3)),ot=parseInt(He.slice(-6,-4)),Et=parseInt(He.slice(-9,-7)),st=He.length>9?parseInt(He.substring(0,He.indexOf(":"))):0;if(!((0,A.isFiniteNumber)(Oe)&&(0,A.isFiniteNumber)(ot)&&(0,A.isFiniteNumber)(Et)&&(0,A.isFiniteNumber)(st)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+He);return Oe+=1e3*ot,(Oe+=6e4*Et)+36e5*st}(de)/1e3}catch(He){G=He}return}Le===""&&(Ye=!1)}j.parse(Le+`
`)}),j.flush()})((a=t.initSegment)!==null&&a!==void 0&&a.data?(0,he.appendUint8Array)(t.initSegment.data,new Uint8Array(r)):r,this.initPTS[t.cc],this.timescale[t.cc],s,t.cc,t.start,function(l){o._appendCues(l,t.level),i.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(l){o._fallbackToIMSC1(t,r),k.logger.log("Failed to parse VTT cue: "+l),i.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:l})})},f._fallbackToIMSC1=function(t,r){var s=this,a=this.tracks[t.level];a.textCodec||to(r,this.initPTS[t.cc],this.timescale[t.cc],function(){a.textCodec=cs,s._parseIMSC1(t,r)},function(){a.textCodec="wvtt"})},f._appendCues=function(t,r){var s=this.hls;if(this.config.renderTextTracksNatively){var a=this.textTracks[r];if(!a||a.mode==="disabled")return;t.forEach(function(l){return De(a,l)})}else{var o=this.tracks[r];if(!o)return;var i=o.default?"default":"subtitles"+r;s.trigger(y.Events.CUES_PARSED,{type:"subtitles",cues:t,track:i})}},f.onFragDecrypted=function(t,r){var s=r.frag;if(s.type===O.PlaylistLevelType.SUBTITLE){if(!(0,A.isFiniteNumber)(this.initPTS[s.cc]))return void this.unparsedVttFrags.push(r);this.onFragLoaded(y.Events.FRAG_LOADED,r)}},f.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},f.onFragParsingUserdata=function(t,r){var s=this.cea608Parser1,a=this.cea608Parser2;if(this.enabled&&s&&a){var o=r.frag,i=r.samples;if(o.type!==O.PlaylistLevelType.MAIN||this.closedCaptionsForLevel(o)!=="NONE")for(var l=0;l<i.length;l++){var d=i[l].bytes;if(d){var h=this.extractCea608Data(d);s.addData(i[l].pts,h[0]),a.addData(i[l].pts,h[1])}}}},f.onBufferFlushing=function(t,r){var s=r.startOffset,a=r.endOffset,o=r.endOffsetSubtitles,i=r.type,l=this.media;if(l&&!(l.currentTime<a)){if(!i||i==="video"){var d=this.captionsTracks;Object.keys(d).forEach(function(v){return Re(d[v],s,a)})}if(this.config.renderTextTracksNatively&&s===0&&o!==void 0){var h=this.textTracks;Object.keys(h).forEach(function(v){return Re(h[v],s,o)})}}},f.extractCea608Data=function(t){for(var r=[[],[]],s=31&t[0],a=2,o=0;o<s;o++){var i=t[a++],l=127&t[a++],d=127&t[a++];if((l!==0||d!==0)&&4&i){var h=3&i;h!==0&&h!==1||(r[h].push(l),r[h].push(d))}}return r},p}();function Sc(p,f){return p&&p.label===f.name&&!(p.textTrack1||p.textTrack2)}function _c(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}const Ac=function(){function p(s){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=s,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var f,t,r=p.prototype;return r.setStreamController=function(s){this.streamController=s},r.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},r.registerListeners=function(){var s=this.hls;s.on(y.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),s.on(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),s.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),s.on(y.Events.BUFFER_CODECS,this.onBufferCodecs,this),s.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},r.unregisterListener=function(){var s=this.hls;s.off(y.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),s.off(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),s.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),s.off(y.Events.BUFFER_CODECS,this.onBufferCodecs,this),s.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},r.onFpsDropLevelCapping=function(s,a){p.isLevelAllowed(a.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(a.droppedLevel)},r.onMediaAttaching=function(s,a){this.media=a.media instanceof HTMLVideoElement?a.media:null,this.clientRect=null},r.onManifestParsed=function(s,a){var o=this.hls;this.restrictedLevels=[],this.firstLevel=a.firstLevel,o.config.capLevelToPlayerSize&&a.video&&this.startCapping()},r.onBufferCodecs=function(s,a){this.hls.config.capLevelToPlayerSize&&a.video&&this.startCapping()},r.onMediaDetaching=function(){this.stopCapping()},r.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var s=this.hls.levels;if(s.length){var a=this.hls;a.autoLevelCapping=this.getMaxLevel(s.length-1),a.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=a.autoLevelCapping}}},r.getMaxLevel=function(s){var a=this,o=this.hls.levels;if(!o.length)return-1;var i=o.filter(function(l,d){return p.isLevelAllowed(d,a.restrictedLevels)&&d<=s});return this.clientRect=null,p.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},r.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},r.getDimensions=function(){if(this.clientRect)return this.clientRect;var s=this.media,a={width:0,height:0};if(s){var o=s.getBoundingClientRect();a.width=o.width,a.height=o.height,a.width||a.height||(a.width=o.right-o.left||s.width||0,a.height=o.bottom-o.top||s.height||0)}return this.clientRect=a,a},p.isLevelAllowed=function(s,a){return a===void 0&&(a=[]),a.indexOf(s)===-1},p.getMaxLevelByMediaSize=function(s,a,o){if(!s||!s.length)return-1;for(var i,l,d=s.length-1,h=0;h<s.length;h+=1){var v=s[h];if((v.width>=a||v.height>=o)&&(i=v,!(l=s[h+1])||i.width!==l.width||i.height!==l.height)){d=h;break}}return d},f=p,(t=[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var s=1;if(!this.hls.config.ignoreDevicePixelRatio)try{s=self.devicePixelRatio}catch{}return s}}])&&_c(f.prototype,t),Object.defineProperty(f,"prototype",{writable:!1}),p}(),Lc=function(){function p(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var f=p.prototype;return f.setStreamController=function(t){this.streamController=t},f.registerListeners=function(){this.hls.on(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},f.unregisterListeners=function(){this.hls.off(y.Events.MEDIA_ATTACHING,this.onMediaAttaching)},f.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},f.onMediaAttaching=function(t,r){var s=this.hls.config;if(s.capLevelOnFPSDrop){var a=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=a,a&&typeof a.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),s.fpsDroppedMonitoringPeriod)}},f.checkFPS=function(t,r,s){var a=performance.now();if(r){if(this.lastTime){var o=a-this.lastTime,i=s-this.lastDroppedFrames,l=r-this.lastDecodedFrames,d=1e3*i/o,h=this.hls;if(h.trigger(y.Events.FPS_DROP,{currentDropped:i,currentDecoded:l,totalDroppedFrames:s}),d>0&&i>h.config.fpsDroppedMonitoringThreshold*l){var v=h.currentLevel;k.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+v),v>0&&(h.autoLevelCapping===-1||h.autoLevelCapping>=v)&&(v-=1,h.trigger(y.Events.FPS_DROP_LEVEL_CAPPING,{level:v,droppedLevel:h.currentLevel}),h.autoLevelCapping=v,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=s,this.lastDecodedFrames=r}},f.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var r=t.getVideoPlaybackQuality();this.checkFPS(t,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},p}();var Kr=b(300);function gs(p){var f=typeof Map=="function"?new Map:void 0;return gs=function(t){if(t===null||(r=t,Function.toString.call(r).indexOf("[native code]")===-1))return t;var r;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(t))return f.get(t);f.set(t,s)}function s(){return ps(t,arguments,vs(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Ln(s,t)},gs(p)}function ps(p,f,t){return ps=kc()?Reflect.construct.bind():function(r,s,a){var o=[null];o.push.apply(o,s);var i=new(Function.bind.apply(r,o));return a&&Ln(i,a.prototype),i},ps.apply(null,arguments)}function kc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ln(p,f){return Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Ln(p,f)}function vs(p){return vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},vs(p)}var Jn="[eme]",so=function(){function p(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=p.CDMCleanupPromise?[p.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=k.logger.debug.bind(k.logger,Jn),this.log=k.logger.log.bind(k.logger,Jn),this.warn=k.logger.warn.bind(k.logger,Jn),this.error=k.logger.error.bind(k.logger,Jn),this.hls=t,this.config=t.config,this.registerListeners()}var f=p.prototype;return f.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},f.registerListeners=function(){this.hls.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(y.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},f.unregisterListeners=function(){this.hls.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(y.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},f.getLicenseServerUrl=function(t){var r=this.config,s=r.drmSystems,a=r.widevineLicenseUrl,o=s[t];if(o)return o.licenseUrl;if(t===$.WIDEVINE&&a)return a;throw new Error('no license server URL configured for key-system "'+t+'"')},f.getServerCertificateUrl=function(t){var r=this.config.drmSystems[t];if(r)return r.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+t+'"]')},f.attemptKeySystemAccess=function(t){var r=this,s=this.hls.levels,a=function(l,d,h){return!!l&&h.indexOf(l)===d},o=s.map(function(l){return l.audioCodec}).filter(a),i=s.map(function(l){return l.videoCodec}).filter(a);return o.length+i.length===0&&i.push("avc1.42e01e"),new Promise(function(l,d){(function h(v){var T=v.shift();r.getMediaKeysPromise(T,o,i).then(function(_){return l({keySystem:T,mediaKeys:_})}).catch(function(_){v.length?h(v):d(_ instanceof tr?_:new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:_,fatal:!0},_.message))})})(t)})},f.requestMediaKeySystemAccess=function(t,r){var s=this.config.requestMediaKeySystemAccessFunc;if(typeof s!="function"){var a="Configured requestMediaKeySystemAccess is not a function "+s;return me===null&&self.location.protocol==="http:"&&(a="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(a))}return s(t,r)},f.getMediaKeysPromise=function(t,r,s){var a=this,o=function(h,v,T,_){var R;switch(h){case $.FAIRPLAY:R=["cenc","sinf"];break;case $.WIDEVINE:case $.PLAYREADY:R=["cenc"];break;case $.CLEARKEY:R=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+h)}return function(x,G,j,J){return[{initDataTypes:x,persistentState:J.persistentState||"not-allowed",distinctiveIdentifier:J.distinctiveIdentifier||"not-allowed",sessionTypes:J.sessionTypes||[J.sessionType||"temporary"],audioCapabilities:G.map(function(oe){return{contentType:'audio/mp4; codecs="'+oe+'"',robustness:J.audioRobustness||"",encryptionScheme:J.audioEncryptionScheme||null}}),videoCapabilities:j.map(function(oe){return{contentType:'video/mp4; codecs="'+oe+'"',robustness:J.videoRobustness||"",encryptionScheme:J.videoEncryptionScheme||null}})}]}(R,v,T,_)}(t,r,s,this.config.drmSystemOptions),i=this.keySystemAccessPromises[t],l=i==null?void 0:i.keySystemAccess;if(!l){this.log('Requesting encrypted media "'+t+'" key-system access with config: '+JSON.stringify(o)),l=this.requestMediaKeySystemAccess(t,o);var d=this.keySystemAccessPromises[t]={keySystemAccess:l};return l.catch(function(h){a.log('Failed to obtain access to key-system "'+t+'": '+h)}),l.then(function(h){a.log('Access for key-system "'+h.keySystem+'" obtained');var v=a.fetchServerCertificate(t);return a.log('Create media-keys for "'+t+'"'),d.mediaKeys=h.createMediaKeys().then(function(T){return a.log('Media-keys created for "'+t+'"'),v.then(function(_){return _?a.setMediaKeysServerCertificate(T,t,_):T})}),d.mediaKeys.catch(function(T){a.error('Failed to create media-keys for "'+t+'"}: '+T)}),d.mediaKeys})}return l.then(function(){return i.mediaKeys})},f.createMediaKeySessionContext=function(t){var r=t.decryptdata,s=t.keySystem,a=t.mediaKeys;this.log('Creating key-system session "'+s+'" keyId: '+Kr.default.hexDump(r.keyId||[]));var o=a.createSession(),i={decryptdata:r,keySystem:s,mediaKeys:a,mediaKeysSession:o,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i},f.renewKeySession=function(t){var r=t.decryptdata;if(r.pssh){var s=this.createMediaKeySessionContext(t),a=this.getKeyIdString(r);this.keyIdToKeySessionPromise[a]=this.generateRequestWithPreferredKeySession(s,"cenc",r.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)},f.getKeyIdString=function(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return Kr.default.hexDump(t.keyId)},f.updateKeySession=function(t,r){var s,a=t.mediaKeysSession;return this.log('Updating key-session "'+a.sessionId+'" for keyID '+Kr.default.hexDump(((s=t.decryptdata)===null||s===void 0?void 0:s.keyId)||[])+`
      } (data length: `+(r&&r.byteLength)+")"),a.update(r)},f.selectKeySystemFormat=function(t){var r=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+t.sn+" "+t.type+": "+t.level+") key formats "+r.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise},f.getKeyFormatPromise=function(t){var r=this;return new Promise(function(s,a){var o=ce(r.config),i=t.map(W).filter(function(l){return!!l&&o.indexOf(l)!==-1});return r.getKeySystemSelectionPromise(i).then(function(l){var d=l.keySystem,h=F(d);h?s(h):a(new Error('Unable to find format for key-system "'+d+'"'))}).catch(a)})},f.loadKey=function(t){var r=this,s=t.keyInfo.decryptdata,a=this.getKeyIdString(s),o="(keyId: "+a+' format: "'+s.keyFormat+'" method: '+s.method+" uri: "+s.uri+")";this.log("Starting session for key "+o);var i=this.keyIdToKeySessionPromise[a];return i||(i=this.keyIdToKeySessionPromise[a]=this.getKeySystemForKeyPromise(s).then(function(l){var d=l.keySystem,h=l.mediaKeys;return r.throwIfDestroyed(),r.log("Handle encrypted media sn: "+t.frag.sn+" "+t.frag.type+": "+t.frag.level+" using key "+o),r.attemptSetMediaKeys(d,h).then(function(){r.throwIfDestroyed();var v=r.createMediaKeySessionContext({keySystem:d,mediaKeys:h,decryptdata:s});return r.generateRequestWithPreferredKeySession(v,"cenc",s.pssh,"playlist-key")})})).catch(function(l){return r.handleError(l)}),i},f.throwIfDestroyed=function(t){if(!this.hls)throw new Error("invalid state")},f.handleError=function(t){this.hls&&(this.error(t.message),t instanceof tr?this.hls.trigger(y.Events.ERROR,t.data):this.hls.trigger(y.Events.ERROR,{type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))},f.getKeySystemForKeyPromise=function(t){var r=this.getKeyIdString(t),s=this.keyIdToKeySessionPromise[r];if(!s){var a=W(t.keyFormat),o=a?[a]:ce(this.config);return this.attemptKeySystemAccess(o)}return s},f.getKeySystemSelectionPromise=function(t){if(t.length||(t=ce(this.config)),t.length===0)throw new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(t)},f._onMediaEncrypted=function(t){var r=this,s=t.initDataType,a=t.initData;if(this.debug('"'+t.type+'" event: init data type: "'+s+'"'),a!==null){var o,i;if(s==="sinf"&&this.config.drmSystems[$.FAIRPLAY]){var l=(0,he.bin2str)(new Uint8Array(a));try{var d=ee(JSON.parse(l).sinf),h=(0,he.parseSinf)(new Uint8Array(d));if(!h)return;o=h.subarray(8,24),i=$.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var v=(0,he.parsePssh)(a);if(v===null)return;v.version===0&&v.systemId===pe.WIDEVINE&&v.data&&(o=v.data.subarray(8,24)),i=function(oe){if(oe===pe.WIDEVINE)return $.WIDEVINE}(v.systemId)}if(i&&o){for(var T=Kr.default.hexDump(o),_=this.keyIdToKeySessionPromise,R=this.mediaKeySessions,x=_[T],G=function(oe){var ve=R[oe],de=ve.decryptdata;if(de.pssh||!de.keyId)return"continue";var be=Kr.default.hexDump(de.keyId);return T===be||de.uri.replace(/-/g,"").indexOf(T)!==-1?(x=_[be],delete _[be],de.pssh=new Uint8Array(a),de.keyId=o,x=_[T]=x.then(function(){return r.generateRequestWithPreferredKeySession(ve,s,a,"encrypted-event-key-match")}),"break"):void 0},j=0;j<R.length;j++){var J=G(j);if(J!=="continue"&&J==="break")break}x||(x=_[T]=this.getKeySystemSelectionPromise([i]).then(function(oe){var ve,de=oe.keySystem,be=oe.mediaKeys;r.throwIfDestroyed();var je=new Ke("ISO-23001-7",T,(ve=F(de))!=null?ve:"");return je.pssh=new Uint8Array(a),je.keyId=o,r.attemptSetMediaKeys(de,be).then(function(){r.throwIfDestroyed();var Ye=r.createMediaKeySessionContext({decryptdata:je,keySystem:de,mediaKeys:be});return r.generateRequestWithPreferredKeySession(Ye,s,a,"encrypted-event-no-match")})})),x.catch(function(oe){return r.handleError(oe)})}}},f._onWaitingForKey=function(t){this.log('"'+t.type+'" event')},f.attemptSetMediaKeys=function(t,r){var s=this,a=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+t+'"');var o=Promise.all(a).then(function(){if(!s.media)throw new Error("Attempted to set mediaKeys without media element attached");return s.media.setMediaKeys(r)});return this.setMediaKeysQueue.push(o),o.then(function(){s.log('Media-keys set for "'+t+'"'),a.push(o),s.setMediaKeysQueue=s.setMediaKeysQueue.filter(function(i){return a.indexOf(i)===-1})})},f.generateRequestWithPreferredKeySession=function(t,r,s,a){var o,i,l=this,d=(o=this.config.drmSystems)===null||o===void 0||(i=o[t.keySystem])===null||i===void 0?void 0:i.generateRequest;if(d)try{var h=d.call(this.hls,r,s,t);if(!h)throw new Error("Invalid response from configured generateRequest filter");r=h.initDataType,s=t.decryptdata.pssh=h.initData?new Uint8Array(h.initData):null}catch(x){var v;if(this.warn(x.message),(v=this.hls)!==null&&v!==void 0&&v.config.debug)throw x}if(s===null)return this.log('Skipping key-session request for "'+a+'" (no initData)'),Promise.resolve(t);var T=this.getKeyIdString(t.decryptdata);this.log('Generating key-session request for "'+a+'": '+T+" (init data type: "+r+" length: "+(s?s.byteLength:null)+")");var _=new(Ku());t.mediaKeysSession.onmessage=function(x){var G=t.mediaKeysSession;if(G){var j=x.messageType,J=x.message;l.log('"'+j+'" message event for session "'+G.sessionId+'" message size: '+J.byteLength),j==="license-request"||j==="license-renewal"?l.renewLicense(t,J).catch(function(oe){l.handleError(oe),_.emit("error",oe)}):j==="license-release"?t.keySystem===$.FAIRPLAY&&(l.updateKeySession(t,C("acknowledged")),l.removeSession(t)):l.warn('unhandled media key message type "'+j+'"')}else _.emit("error",new Error("invalid state"))},t.mediaKeysSession.onkeystatuseschange=function(x){if(t.mediaKeysSession){l.onKeyStatusChange(t);var G=t.keyStatus;_.emit("keyStatus",G),G==="expired"&&(l.warn(t.keySystem+" expired for key "+T),l.renewKeySession(t))}else _.emit("error",new Error("invalid state"))};var R=new Promise(function(x,G){_.on("error",G),_.on("keyStatus",function(j){j.startsWith("usable")?x():j==="output-restricted"?G(new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):j==="internal-error"?G(new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+j+'"')):j==="expired"?G(new Error("key expired while generating request")):l.warn('unhandled key status change "'+j+'"')})});return t.mediaKeysSession.generateRequest(r,s).then(function(){var x;l.log('Request generated for key-session "'+((x=t.mediaKeysSession)===null||x===void 0?void 0:x.sessionId)+'" keyId: '+T)}).catch(function(x){throw new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:x,fatal:!1},"Error generating key-session request: "+x)}).then(function(){return R}).catch(function(x){throw _.removeAllListeners(),l.removeSession(t),x}).then(function(){return _.removeAllListeners(),t})},f.onKeyStatusChange=function(t){var r=this;t.mediaKeysSession.keyStatuses.forEach(function(s,a){r.log('key status change "'+s+'" for keyStatuses keyId: '+Kr.default.hexDump("buffer"in a?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a))+" session keyId: "+Kr.default.hexDump(new Uint8Array(t.decryptdata.keyId||[]))+" uri: "+t.decryptdata.uri),t.keyStatus=s})},f.fetchServerCertificate=function(t){var r=this;return new Promise(function(s,a){var o=r.getServerCertificateUrl(t);if(!o)return s();r.log('Fetching serverCertificate for "'+t+'"');var i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status===200?s(i.response):a(new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i},'"'+t+'" certificate request XHR failed ('+o+"). Status: "+i.status+" ("+i.statusText+")")))},i.send()})},f.setMediaKeysServerCertificate=function(t,r,s){var a=this;return new Promise(function(o,i){t.setServerCertificate(s).then(function(l){a.log("setServerCertificate "+(l?"success":"not supported by CDM")+" ("+(s==null?void 0:s.byteLength)+') on "'+r+'"'),o(t)}).catch(function(l){i(new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})},f.renewLicense=function(t,r){var s=this;return this.requestLicense(t,new Uint8Array(r)).then(function(a){return s.updateKeySession(t,new Uint8Array(a)).catch(function(o){throw new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:o,fatal:!0},o.message)})})},f.setupLicenseXHR=function(t,r,s,a){var o=this,i=this.config.licenseXhrSetup;return i?Promise.resolve().then(function(){if(!s.decryptdata)throw new Error("Key removed");return i.call(o.hls,t,r,s,a)}).catch(function(l){if(!s.decryptdata)throw l;return t.open("POST",r,!0),i.call(o.hls,t,r,s,a)}).then(function(l){return t.readyState||t.open("POST",r,!0),{xhr:t,licenseChallenge:l||a}}):(t.open("POST",r,!0),Promise.resolve({xhr:t,licenseChallenge:a}))},f.requestLicense=function(t,r){var s=this;return new Promise(function(a,o){var i=s.getLicenseServerUrl(t.keySystem);s.log("Sending license request to URL: "+i);var l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=function(){if(!s.hls||!t.mediaKeysSession)return o(new Error("invalid state"));if(l.readyState===4)if(l.status===200){s._requestLicenseFailureCount=0;var d=l.response;s.log("License received "+(d instanceof ArrayBuffer?d.byteLength:d));var h=s.config.licenseResponseCallback;if(h)try{d=h.call(s.hls,l,i,t)}catch(T){s.error(T)}a(d)}else if(s._requestLicenseFailureCount++,s._requestLicenseFailureCount>3||l.status>=400&&l.status<500)o(new tr({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:l},"License Request XHR failed ("+i+"). Status: "+l.status+" ("+l.statusText+")"));else{var v=3-s._requestLicenseFailureCount+1;s.warn("Retrying license request, "+v+" attempts left"),s.requestLicense(t,r).then(a,o)}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=l,s.setupLicenseXHR(l,i,t,r).then(function(d){var h=d.xhr,v=d.licenseChallenge;h.send(v)})})},f.onMediaAttached=function(t,r){if(this.config.emeEnabled){var s=r.media;this.media=s,s.addEventListener("encrypted",this.onMediaEncrypted),s.addEventListener("waitingforkey",this.onWaitingForKey)}},f.onMediaDetached=function(){var t=this,r=this.media,s=this.mediaKeySessions;r&&(r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ke.clearKeyUriToKeyIdMap();var a=s.length;p.CDMCleanupPromise=Promise.all(s.map(function(o){return t.removeSession(o)}).concat(r==null?void 0:r.setMediaKeys(null).catch(function(o){t.log("Could not clear media keys: "+o+". media.src: "+(r==null?void 0:r.src))}))).then(function(){a&&(t.log("finished closing key sessions and clearing media keys"),s.length=0)}).catch(function(o){t.log("Could not close sessions and clear media keys: "+o+". media.src: "+(r==null?void 0:r.src))})},f.onManifestLoaded=function(t,r){var s=r.sessionKeys;if(s&&this.config.emeEnabled&&!this.keyFormatPromise){var a=s.reduce(function(o,i){return o.indexOf(i.keyFormat)===-1&&o.push(i.keyFormat),o},[]);this.log("Selecting key-system from session-keys "+a.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(a)}},f.removeSession=function(t){var r=this,s=t.mediaKeysSession,a=t.licenseXhr;if(s){this.log("Remove licenses and keys and close session "+s.sessionId),s.onmessage=null,s.onkeystatuseschange=null,a&&a.readyState!==XMLHttpRequest.DONE&&a.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;var o=this.mediaKeySessions.indexOf(t);return o>-1&&this.mediaKeySessions.splice(o,1),s.remove().catch(function(i){r.log("Could not remove session: "+i)}).then(function(){return s.close()}).catch(function(i){r.log("Could not close session: "+i)})}},p}();so.CDMCleanupPromise=void 0;var tr=function(p){var f,t;function r(s,a){var o;return(o=p.call(this,a)||this).data=void 0,o.data=s,s.err=s.error,o}return t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,Ln(f,t),r}(gs(Error));const Dc=so;var Bt,ms,ao;function oo(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}function lo(p,f,t){return f&&oo(p.prototype,f),t&&oo(p,t),Object.defineProperty(p,"prototype",{writable:!1}),p}function uo(p,f){var t=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(t)return(t=t.call(p)).next.bind(t);if(Array.isArray(p)||(t=function(s,a){if(s){if(typeof s=="string")return co(s,a);var o=Object.prototype.toString.call(s).slice(8,-1);return o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set"?Array.from(s):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?co(s,a):void 0}}(p))||f&&p&&typeof p.length=="number"){t&&(p=t);var r=0;return function(){return r>=p.length?{done:!0}:{done:!1,value:p[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function co(p,f){(f==null||f>p.length)&&(f=p.length);for(var t=0,r=new Array(f);t<f;t++)r[t]=p[t];return r}function Zn(){return Zn=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},Zn.apply(this,arguments)}(function(p){p.MANIFEST="m",p.AUDIO="a",p.VIDEO="v",p.MUXED="av",p.INIT="i",p.CAPTION="c",p.TIMED_TEXT="tt",p.KEY="k",p.OTHER="o"})(Bt||(Bt={})),function(p){p.DASH="d",p.HLS="h",p.SMOOTH="s",p.OTHER="o"}(ms||(ms={})),function(p){p.VOD="v",p.LIVE="l"}(ao||(ao={}));var Rc=function(){function p(t){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(o){try{r.apply(o,{ot:Bt.MANIFEST,su:!r.initialized})}catch(i){k.logger.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=function(o){try{var i=o.frag,l=r.hls.levels[i.level],d=r.getObjectType(i),h={d:1e3*i.duration,ot:d};d!==Bt.VIDEO&&d!==Bt.AUDIO&&d!=Bt.MUXED||(h.br=l.bitrate/1e3,h.tb=r.getTopBandwidth(d)/1e3,h.bl=r.getBufferLength(d)),r.apply(o,h)}catch(v){k.logger.warn("Could not generate segment CMCD data.",v)}},this.hls=t;var s=this.config=t.config,a=s.cmcd;a!=null&&(s.pLoader=this.createPlaylistLoader(),s.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||p.uuid(),this.cid=a.contentId,this.useHeaders=a.useHeaders===!0,this.registerListeners())}var f=p.prototype;return f.registerListeners=function(){var t=this.hls;t.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(y.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.on(y.Events.BUFFER_CREATED,this.onBufferCreated,this)},f.unregisterListeners=function(){var t=this.hls;t.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(y.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.off(y.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},f.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},f.onMediaAttached=function(t,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},f.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},f.onBufferCreated=function(t,r){var s,a;this.audioBuffer=(s=r.tracks.audio)===null||s===void 0?void 0:s.buffer,this.videoBuffer=(a=r.tracks.video)===null||a===void 0?void 0:a.buffer},f.createData=function(){var t;return{v:1,sf:ms.HLS,sid:this.sid,cid:this.cid,pr:(t=this.media)===null||t===void 0?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},f.apply=function(t,r){r===void 0&&(r={}),Zn(r,this.createData());var s=r.ot===Bt.INIT||r.ot===Bt.VIDEO||r.ot===Bt.MUXED;if(this.starved&&s&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering),this.useHeaders){var a=p.toHeaders(r);if(!Object.keys(a).length)return;t.headers||(t.headers={}),Zn(t.headers,a)}else{var o=p.toQuery(r);if(!o)return;t.url=p.appendQueryToUri(t.url,o)}},f.getObjectType=function(t){var r=t.type;return r==="subtitle"?Bt.TIMED_TEXT:t.sn==="initSegment"?Bt.INIT:r==="audio"?Bt.AUDIO:r==="main"?this.hls.audioTracks.length?Bt.VIDEO:Bt.MUXED:void 0},f.getTopBandwidth=function(t){var r,s=0,a=this.hls;if(t===Bt.AUDIO)r=a.audioTracks;else{var o=a.maxAutoLevel,i=o>-1?o+1:a.levels.length;r=a.levels.slice(0,i)}for(var l,d=uo(r);!(l=d()).done;){var h=l.value;h.bitrate>s&&(s=h.bitrate)}return s>0?s:NaN},f.getBufferLength=function(t){var r=this.hls.media,s=t===Bt.AUDIO?this.audioBuffer:this.videoBuffer;return s&&r?1e3*_t.bufferInfo(s,r.currentTime,this.config.maxBufferHole).len:NaN},f.createPlaylistLoader=function(){var t=this.config.pLoader,r=this.applyPlaylistData,s=t||this.config.loader;return function(){function a(i){this.loader=void 0,this.loader=new s(i)}var o=a.prototype;return o.destroy=function(){this.loader.destroy()},o.abort=function(){this.loader.abort()},o.load=function(i,l,d){r(i),this.loader.load(i,l,d)},lo(a,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),a}()},f.createFragmentLoader=function(){var t=this.config.fLoader,r=this.applyFragmentData,s=t||this.config.loader;return function(){function a(i){this.loader=void 0,this.loader=new s(i)}var o=a.prototype;return o.destroy=function(){this.loader.destroy()},o.abort=function(){this.loader.abort()},o.load=function(i,l,d){r(i),this.loader.load(i,l,d)},lo(a,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),a}()},p.uuid=function(){var t=URL.createObjectURL(new Blob),r=t.toString();return URL.revokeObjectURL(t),r.slice(r.lastIndexOf("/")+1)},p.serialize=function(t){for(var r,s=[],a=function(x){return!Number.isNaN(x)&&x!=null&&x!==""&&x!==!1},o=function(x){return Math.round(x)},i=function(x){return 100*o(x/100)},l={br:o,d:o,bl:i,dl:i,mtp:i,nor:function(x){return encodeURIComponent(x)},rtp:i,tb:o},d=uo(Object.keys(t||{}).sort());!(r=d()).done;){var h=r.value,v=t[h];if(a(v)&&!(h==="v"&&v===1||h=="pr"&&v===1)){var T=l[h];T&&(v=T(v));var _,R=typeof v;_=h==="ot"||h==="sf"||h==="st"?h+"="+v:R==="boolean"?h:R==="number"?h+"="+v:h+"="+JSON.stringify(v),s.push(_)}}return s.join(",")},p.toHeaders=function(t){for(var r={},s=["Object","Request","Session","Status"],a=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},i=0,l=Object.keys(t);i<l.length;i++){var d=l[i];a[o[d]!=null?o[d]:1][d]=t[d]}for(var h=0;h<a.length;h++){var v=p.serialize(a[h]);v&&(r["CMCD-"+s[h]]=v)}return r},p.toQuery=function(t){return"CMCD="+encodeURIComponent(p.serialize(t))},p.appendQueryToUri=function(t,r){if(!r)return t;var s=t.includes("?")?"&":"?";return""+t+s+r},p}(),fo=b(408),wc=/^age:\s*[\d.]+\s*$/m;const ho=function(){function p(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new fo.LoadStats,this.retryDelay=0}var f=p.prototype;return f.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},f.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,t.readyState!==4&&(this.stats.aborted=!0,t.abort()))},f.abort=function(){var t;this.abortInternal(),(t=this.callbacks)!==null&&t!==void 0&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},f.load=function(t,r,s){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=r,this.callbacks=s,this.retryDelay=r.retryDelay,this.loadInternal()},f.loadInternal=function(){var t=this.config,r=this.context;if(t){var s=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0;var o=this.xhrSetup;try{if(o)try{o(s,r.url)}catch{s.open("GET",r.url,!0),o(s,r.url)}s.readyState||s.open("GET",r.url,!0);var i=this.context.headers;if(i)for(var l in i)s.setRequestHeader(l,i[l])}catch(d){return void this.callbacks.onError({code:s.status,text:d.message},r,s)}r.rangeEnd&&s.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),s.onreadystatechange=this.readystatechange.bind(this),s.onprogress=this.loadprogress.bind(this),s.responseType=r.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),s.send()}},f.readystatechange=function(){var t=this.context,r=this.loader,s=this.stats;if(t&&r){var a=r.readyState,o=this.config;if(!s.aborted&&a>=2)if(self.clearTimeout(this.requestTimeout),s.loading.first===0&&(s.loading.first=Math.max(self.performance.now(),s.loading.start)),a===4){r.onreadystatechange=null,r.onprogress=null;var i=r.status,l=r.responseType==="arraybuffer";if(i>=200&&i<300&&(l&&r.response||r.responseText!==null)){var d,h;if(s.loading.end=Math.max(self.performance.now(),s.loading.first),h=l?(d=r.response).byteLength:(d=r.responseText).length,s.loaded=s.total=h,!this.callbacks)return;var v=this.callbacks.onProgress;if(v&&v(s,t,d,r),!this.callbacks)return;var T={url:r.responseURL,data:d};this.callbacks.onSuccess(T,s,t,r)}else s.retry>=o.maxRetry||i>=400&&i<499?(k.logger.error(i+" while loading "+t.url),this.callbacks.onError({code:i,text:r.statusText},t,r)):(k.logger.warn(i+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),s.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.timeout)}},f.loadtimeout=function(){k.logger.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},f.loadprogress=function(t){var r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total)},f.getCacheAge=function(){var t=null;if(this.loader&&wc.test(this.loader.getAllResponseHeaders())){var r=this.loader.getResponseHeader("age");t=r?parseFloat(r):null}return t},p}();function ys(p){var f=typeof Map=="function"?new Map:void 0;return ys=function(t){if(t===null||(r=t,Function.toString.call(r).indexOf("[native code]")===-1))return t;var r;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(t))return f.get(t);f.set(t,s)}function s(){return Es(t,arguments,Ts(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),kn(s,t)},ys(p)}function Es(p,f,t){return Es=Ic()?Reflect.construct.bind():function(r,s,a){var o=[null];o.push.apply(o,s);var i=new(Function.bind.apply(r,o));return a&&kn(i,a.prototype),i},Es.apply(null,arguments)}function Ic(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kn(p,f){return kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},kn(p,f)}function Ts(p){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},Ts(p)}function bs(){return bs=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},bs.apply(this,arguments)}var Cc=function(){function p(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||xc,this.controller=new self.AbortController,this.stats=new fo.LoadStats}var f=p.prototype;return f.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},f.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},f.abort=function(){var t;this.abortInternal(),(t=this.callbacks)!==null&&t!==void 0&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},f.load=function(t,r,s){var a=this,o=this.stats;if(o.loading.start)throw new Error("Loader can only be used once.");o.loading.start=self.performance.now();var i=function(v,T){var _={method:"GET",mode:"cors",credentials:"same-origin",signal:T,headers:new self.Headers(bs({},v.headers))};return v.rangeEnd&&_.headers.set("Range","bytes="+v.rangeStart+"-"+String(v.rangeEnd-1)),_}(t,this.controller.signal),l=s.onProgress,d=t.responseType==="arraybuffer",h=d?"byteLength":"length";this.context=t,this.config=r,this.callbacks=s,this.request=this.fetchSetup(t,i),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){a.abortInternal(),s.onTimeout(o,t,a.response)},r.timeout),self.fetch(this.request).then(function(v){if(a.response=a.loader=v,!v.ok){var T=v.status,_=v.statusText;throw new Pc(_||"fetch, bad network response",T,v)}return o.loading.first=Math.max(self.performance.now(),o.loading.start),o.total=parseInt(v.headers.get("Content-Length")||"0"),l&&(0,A.isFiniteNumber)(r.highWaterMark)?a.loadProgressively(v,o,t,r.highWaterMark,l):d?v.arrayBuffer():v.text()}).then(function(v){var T=a.response;self.clearTimeout(a.requestTimeout),o.loading.end=Math.max(self.performance.now(),o.loading.first);var _=v[h];_&&(o.loaded=o.total=_);var R={url:T.url,data:v};l&&!(0,A.isFiniteNumber)(r.highWaterMark)&&l(o,t,v,T),s.onSuccess(R,o,t,T)}).catch(function(v){if(self.clearTimeout(a.requestTimeout),!o.aborted){var T=v&&v.code||0,_=v?v.message:null;s.onError({code:T,text:_},t,v?v.details:null)}})},f.getCacheAge=function(){var t=null;if(this.response){var r=this.response.headers.get("age");t=r?parseFloat(r):null}return t},f.loadProgressively=function(t,r,s,a,o){a===void 0&&(a=0);var i=new Ha,l=t.body.getReader();return function d(){return l.read().then(function(h){if(h.done)return i.dataLength&&o(r,s,i.flush(),t),Promise.resolve(new ArrayBuffer(0));var v=h.value,T=v.length;return r.loaded+=T,T<a||i.dataLength?(i.push(v),i.dataLength>=a&&o(r,s,i.flush(),t)):o(r,s,v,t),d()}).catch(function(){return Promise.reject()})}()},p}();function xc(p,f){return new self.Request(p.url,f)}var Pc=function(p){var f,t;function r(s,a,o){var i;return(i=p.call(this,s)||this).code=void 0,i.details=void 0,i.code=a,i.details=o,i}return t=p,(f=r).prototype=Object.create(t.prototype),f.prototype.constructor=f,kn(f,t),r}(ys(Error));const go=Cc;var Oc=/\s/;function Ss(){return Ss=Object.assign?Object.assign.bind():function(p){for(var f=1;f<arguments.length;f++){var t=arguments[f];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r])}return p},Ss.apply(this,arguments)}function po(p,f){var t=Object.keys(p);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(p);f&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(p,s).enumerable})),t.push.apply(t,r)}return t}function vo(p){for(var f=1;f<arguments.length;f++){var t=arguments[f]!=null?arguments[f]:{};f%2?po(Object(t),!0).forEach(function(r){Fc(p,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach(function(r){Object.defineProperty(p,r,Object.getOwnPropertyDescriptor(t,r))})}return p}function Fc(p,f,t){return(f=function(r){var s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r,"string");return typeof s=="symbol"?s:String(s)}(f))in p?Object.defineProperty(p,f,{value:t,enumerable:!0,configurable:!0,writable:!0}):p[f]=t,p}var Mc=vo(vo({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ho,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:qu,bufferController:ic,capLevelController:Ac,fpsController:Lc,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:me,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:{newCue:function(p,f,t,r){for(var s,a,o,i,l,d=[],h=self.VTTCue||self.TextTrackCue,v=0;v<r.rows.length;v++)if(o=!0,i=0,l="",!(s=r.rows[v]).isEmpty()){for(var T=0;T<s.chars.length;T++)Oc.test(s.chars[T].uchar)&&o?i++:(l+=s.chars[T].uchar,o=!1);s.cueStartTime=f,f===t&&(t+=1e-4),i>=16?i--:i++;var _=Qa(l.trim()),R=ls(f,t,_);p&&p.cues&&p.cues.getCueById(R)||((a=new h(f,t,_)).id=R,a.line=v+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*i/32)),d.push(a))}return p&&d.length&&(d.sort(function(x,G){return x.line==="auto"||G.line==="auto"?0:x.line>8&&G.line>8?G.line-x.line:x.line-G.line}),d.forEach(function(x){return De(p,x)})),d}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Zu,subtitleTrackController:rc,timelineController:bc,audioStreamController:zu,audioTrackController:Qu,emeController:Dc,cmcdController:Rc});function mo(p,f){for(var t=0;t<f.length;t++){var r=f[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,typeof(s=function(a,o){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r.key,"string"))=="symbol"?s:String(s),r)}var s}var yo=function(){function p(a){a===void 0&&(a={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new zi.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var o=this.config=function(Le,He){if((He.liveSyncDurationCount||He.liveMaxLatencyDurationCount)&&(He.liveSyncDuration||He.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(He.liveMaxLatencyDurationCount!==void 0&&(He.liveSyncDurationCount===void 0||He.liveMaxLatencyDurationCount<=He.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(He.liveMaxLatencyDuration!==void 0&&(He.liveSyncDuration===void 0||He.liveMaxLatencyDuration<=He.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Ss({},Le,He)}(p.DefaultConfig,a);this.userConfig=a,(0,k.enableLogs)(o.debug,"Hls instance"),this._autoLevelCapping=-1,o.progressive&&function(Le){var He=Le.loader;He!==go&&He!==ho?(k.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),Le.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(Le.loader=go,Le.progressive=!0,Le.enableSoftwareAES=!0,k.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}(o);var i=o.abrController,l=o.bufferController,d=o.capLevelController,h=o.fpsController,v=this.abrController=new i(this),T=this.bufferController=new l(this),_=this.capLevelController=new d(this),R=new h(this),x=new le(this),G=new $e(this),j=this.levelController=new at(this),J=new ht(this),oe=new or(this.config),ve=this.streamController=new Vu(this,J,oe);_.setStreamController(ve),R.setStreamController(ve);var de=[x,j,ve];this.networkControllers=de;var be=[v,T,_,R,G,J];this.audioTrackController=this.createController(o.audioTrackController,de);var je=o.audioStreamController;je&&de.push(new je(this,J,oe)),this.subtitleTrackController=this.createController(o.subtitleTrackController,de);var Ye=o.subtitleStreamController;Ye&&de.push(new Ye(this,J,oe)),this.createController(o.timelineController,be),oe.emeController=this.emeController=this.createController(o.emeController,be),this.cmcdController=this.createController(o.cmcdController,be),this.latencyController=this.createController(et,be),this.coreComponents=be}p.isSupported=function(){return function(){var a=qi();if(!a)return!1;var o=Fa(),i=a&&typeof a.isTypeSupported=="function"&&a.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),l=!o||o.prototype&&typeof o.prototype.appendBuffer=="function"&&typeof o.prototype.remove=="function";return!!i&&!!l}()};var f,t,r,s=p.prototype;return s.createController=function(a,o){if(a){var i=new a(this);return o&&o.push(i),i}return null},s.on=function(a,o,i){i===void 0&&(i=this),this._emitter.on(a,o,i)},s.once=function(a,o,i){i===void 0&&(i=this),this._emitter.once(a,o,i)},s.removeAllListeners=function(a){this._emitter.removeAllListeners(a)},s.off=function(a,o,i,l){i===void 0&&(i=this),this._emitter.off(a,o,i,l)},s.listeners=function(a){return this._emitter.listeners(a)},s.emit=function(a,o,i){return this._emitter.emit(a,o,i)},s.trigger=function(a,o){if(this.config.debug)return this.emit(a,a,o);try{return this.emit(a,a,o)}catch(i){k.logger.error("An internal error happened while handling event "+a+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.trigger(y.Events.ERROR,{type:I.ErrorTypes.OTHER_ERROR,details:I.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:a,error:i})}return!1},s.listenerCount=function(a){return this._emitter.listenerCount(a)},s.destroy=function(){k.logger.log("destroy"),this.trigger(y.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(a){return a.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(a){return a.destroy()}),this.coreComponents.length=0},s.attachMedia=function(a){k.logger.log("attachMedia"),this._media=a,this.trigger(y.Events.MEDIA_ATTACHING,{media:a})},s.detachMedia=function(){k.logger.log("detachMedia"),this.trigger(y.Events.MEDIA_DETACHING,void 0),this._media=null},s.loadSource=function(a){this.stopLoad();var o=this.media,i=this.url,l=this.url=w.buildAbsoluteURL(self.location.href,a,{alwaysNormalize:!0});k.logger.log("loadSource:"+l),o&&i&&i!==l&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(o)),this.trigger(y.Events.MANIFEST_LOADING,{url:a})},s.startLoad=function(a){a===void 0&&(a=-1),k.logger.log("startLoad("+a+")"),this.networkControllers.forEach(function(o){o.startLoad(a)})},s.stopLoad=function(){k.logger.log("stopLoad"),this.networkControllers.forEach(function(a){a.stopLoad()})},s.swapAudioCodec=function(){k.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},s.recoverMediaError=function(){k.logger.log("recoverMediaError");var a=this._media;this.detachMedia(),a&&this.attachMedia(a)},s.removeLevel=function(a,o){o===void 0&&(o=0),this.levelController.removeLevel(a,o)},f=p,r=[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return y.Events}},{key:"ErrorTypes",get:function(){return I.ErrorTypes}},{key:"ErrorDetails",get:function(){return I.ErrorDetails}},{key:"DefaultConfig",get:function(){return p.defaultConfig?p.defaultConfig:Mc},set:function(a){p.defaultConfig=a}}],(t=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(a){k.logger.log("set currentLevel:"+a),this.loadLevel=a,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(a){k.logger.log("set nextLevel:"+a),this.levelController.manualLevel=a,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(a){k.logger.log("set loadLevel:"+a),this.levelController.manualLevel=a}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(a){this.levelController.nextLoadLevel=a}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(a){k.logger.log("set firstLevel:"+a),this.levelController.firstLevel=a}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(a){k.logger.log("set startLevel:"+a),a!==-1&&(a=Math.max(a,this.minAutoLevel)),this.levelController.startLevel=a}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(a){var o=!!a;o!==this.config.capLevelToPlayerSize&&(o?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=o)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(a){this._autoLevelCapping!==a&&(k.logger.log("set autoLevelCapping:"+a),this._autoLevelCapping=a)}},{key:"bandwidthEstimate",get:function(){var a=this.abrController.bwEstimator;return a?a.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(a){bt.indexOf(a)>-1&&(this._maxHdcpLevel=a)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var a=this.levels,o=this.config.minAutoBitrate;if(!a)return 0;for(var i=a.length,l=0;l<i;l++)if(a[l].maxBitrate>=o)return l;return 0}},{key:"maxAutoLevel",get:function(){var a,o=this.levels,i=this.autoLevelCapping,l=this.maxHdcpLevel;if(a=i===-1&&o&&o.length?o.length-1:i,l)for(var d=a;d--;){var h=o[d].attrs["HDCP-LEVEL"];if(h&&h<=l)return d}return a}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(a){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,a)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var a=this.audioTrackController;return a?a.audioTracks:[]}},{key:"audioTrack",get:function(){var a=this.audioTrackController;return a?a.audioTrack:-1},set:function(a){var o=this.audioTrackController;o&&(o.audioTrack=a)}},{key:"subtitleTracks",get:function(){var a=this.subtitleTrackController;return a?a.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var a=this.subtitleTrackController;return a?a.subtitleTrack:-1},set:function(a){var o=this.subtitleTrackController;o&&(o.subtitleTrack=a)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var a=this.subtitleTrackController;return!!a&&a.subtitleDisplay},set:function(a){var o=this.subtitleTrackController;o&&(o.subtitleDisplay=a)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(a){this.config.lowLatencyMode=a}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&mo(f.prototype,t),r&&mo(f,r),Object.defineProperty(f,"prototype",{writable:!1}),p}();yo.defaultConfig=void 0},923:(E,S,b)=>{b.r(S),b.d(S,{BaseSegment:()=>V,ElementaryStreamTypes:()=>L,Fragment:()=>M,Part:()=>B});var L,w=b(965),A=b(945),y=b(408);function I(re,q){re.prototype=Object.create(q.prototype),re.prototype.constructor=re,k(re,q)}function k(re,q){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Q,$){return Q.__proto__=$,Q},k(re,q)}function z(re,q){for(var Q=0;Q<q.length;Q++){var $=q[Q];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(re,typeof(ie=function(pe,Ce){if(typeof pe!="object"||pe===null)return pe;var ee=pe[Symbol.toPrimitive];if(ee!==void 0){var C=ee.call(pe,Ce);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pe)}($.key,"string"))=="symbol"?ie:String(ie),$)}var ie}function Z(re,q,Q){return q&&z(re.prototype,q),Q&&z(re,Q),Object.defineProperty(re,"prototype",{writable:!1}),re}(function(re){re.AUDIO="audio",re.VIDEO="video",re.AUDIOVIDEO="audiovideo"})(L||(L={}));var V=function(){function re(q){var Q;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((Q={})[L.AUDIO]=null,Q[L.VIDEO]=null,Q[L.AUDIOVIDEO]=null,Q),this.baseurl=q}return re.prototype.setByteRange=function(q,Q){var $=q.split("@",2),ie=[];$.length===1?ie[0]=Q?Q.byteRangeEndOffset:0:ie[0]=parseInt($[1]),ie[1]=parseInt($[0])+ie[0],this._byteRange=ie},Z(re,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,A.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(q){this._url=q}}]),re}(),M=function(re){function q($,ie){var pe;return(pe=re.call(this,ie)||this)._decryptdata=null,pe.rawProgramDateTime=null,pe.programDateTime=null,pe.tagList=[],pe.duration=0,pe.sn=0,pe.levelkeys=void 0,pe.type=void 0,pe.loader=null,pe.keyLoader=null,pe.level=-1,pe.cc=0,pe.startPTS=void 0,pe.endPTS=void 0,pe.appendedPTS=void 0,pe.startDTS=void 0,pe.endDTS=void 0,pe.start=0,pe.deltaPTS=void 0,pe.maxStartPTS=void 0,pe.minEndPTS=void 0,pe.stats=new y.LoadStats,pe.urlId=0,pe.data=void 0,pe.bitrateTest=!1,pe.title=null,pe.initSegment=null,pe.endList=void 0,pe.type=$,pe}I(q,re);var Q=q.prototype;return Q.setKeyFormat=function($){if(this.levelkeys){var ie=this.levelkeys[$];ie&&!this._decryptdata&&(this._decryptdata=ie.getDecryptData(this.sn))}},Q.abortRequests=function(){var $,ie;($=this.loader)===null||$===void 0||$.abort(),(ie=this.keyLoader)===null||ie===void 0||ie.abort()},Q.setElementaryStreamInfo=function($,ie,pe,Ce,ee,C){C===void 0&&(C=!1);var W=this.elementaryStreams,F=W[$];F?(F.startPTS=Math.min(F.startPTS,ie),F.endPTS=Math.max(F.endPTS,pe),F.startDTS=Math.min(F.startDTS,Ce),F.endDTS=Math.max(F.endDTS,ee)):W[$]={startPTS:ie,endPTS:pe,startDTS:Ce,endDTS:ee,partial:C}},Q.clearElementaryStreamInfo=function(){var $=this.elementaryStreams;$[L.AUDIO]=null,$[L.VIDEO]=null,$[L.AUDIOVIDEO]=null},Z(q,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var $=this.levelkeys.identity;if($)this._decryptdata=$.getDecryptData(this.sn);else{var ie=Object.keys(this.levelkeys);if(ie.length===1)return this._decryptdata=this.levelkeys[ie[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,w.isFiniteNumber)(this.programDateTime))return null;var $=(0,w.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*$}},{key:"encrypted",get:function(){var $;if(($=this._decryptdata)!==null&&$!==void 0&&$.encrypted)return!0;if(this.levelkeys){var ie=Object.keys(this.levelkeys),pe=ie.length;if(pe>1||pe===1&&this.levelkeys[ie[0]].encrypted)return!0}return!1}}]),q}(V),B=function(re){function q(Q,$,ie,pe,Ce){var ee;(ee=re.call(this,ie)||this).fragOffset=0,ee.duration=0,ee.gap=!1,ee.independent=!1,ee.relurl=void 0,ee.fragment=void 0,ee.index=void 0,ee.stats=new y.LoadStats,ee.duration=Q.decimalFloatingPoint("DURATION"),ee.gap=Q.bool("GAP"),ee.independent=Q.bool("INDEPENDENT"),ee.relurl=Q.enumeratedString("URI"),ee.fragment=$,ee.index=pe;var C=Q.enumeratedString("BYTERANGE");return C&&ee.setByteRange(C,Ce),Ce&&(ee.fragOffset=Ce.fragOffset+Ce.duration),ee}return I(q,re),Z(q,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var Q=this.elementaryStreams;return!!(Q.audio||Q.video||Q.audiovideo)}}]),q}(V)},408:(E,S,b)=>{b.r(S),b.d(S,{LoadStats:()=>L});var L=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},965:(E,S,b)=>{b.r(S),b.d(S,{MAX_SAFE_INTEGER:()=>w,isFiniteNumber:()=>L});var L=Number.isFinite||function(A){return typeof A=="number"&&isFinite(A)},w=Number.MAX_SAFE_INTEGER||9007199254740991},524:(E,S,b)=>{b.r(S),b.d(S,{default:()=>Q,flushTextTrackMetadataCueSamples:()=>ie,flushTextTrackUserdataCueSamples:()=>pe,normalizePts:()=>$});var L=b(965);const w=function(){function C(){}return C.getSilentFrame=function(W,F){if(W==="mp4a.40.2"){if(F===1)return new Uint8Array([0,200,0,128,35,128]);if(F===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(F===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(F===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(F===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(F===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(F===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(F===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(F===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},C}();var A=Math.pow(2,32)-1,y=function(){function C(){}return C.init=function(){var W;for(W in C.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},C.types)C.types.hasOwnProperty(W)&&(C.types[W]=[W.charCodeAt(0),W.charCodeAt(1),W.charCodeAt(2),W.charCodeAt(3)]);var F=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ce=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);C.HDLR_TYPES={video:F,audio:ce};var me=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),he=new Uint8Array([0,0,0,0,0,0,0,0]);C.STTS=C.STSC=C.STCO=he,C.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),C.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),C.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),C.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var fe=new Uint8Array([105,115,111,109]),Ke=new Uint8Array([97,118,99,49]),We=new Uint8Array([0,0,0,1]);C.FTYP=C.box(C.types.ftyp,fe,We,fe,Ke),C.DINF=C.box(C.types.dinf,C.box(C.types.dref,me))},C.box=function(W){for(var F=8,ce=arguments.length,me=new Array(ce>1?ce-1:0),he=1;he<ce;he++)me[he-1]=arguments[he];for(var fe=me.length,Ke=fe;fe--;)F+=me[fe].byteLength;var We=new Uint8Array(F);for(We[0]=F>>24&255,We[1]=F>>16&255,We[2]=F>>8&255,We[3]=255&F,We.set(W,4),fe=0,F=8;fe<Ke;fe++)We.set(me[fe],F),F+=me[fe].byteLength;return We},C.hdlr=function(W){return C.box(C.types.hdlr,C.HDLR_TYPES[W])},C.mdat=function(W){return C.box(C.types.mdat,W)},C.mdhd=function(W,F){F*=W;var ce=Math.floor(F/(A+1)),me=Math.floor(F%(A+1));return C.box(C.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,W>>24&255,W>>16&255,W>>8&255,255&W,ce>>24,ce>>16&255,ce>>8&255,255&ce,me>>24,me>>16&255,me>>8&255,255&me,85,196,0,0]))},C.mdia=function(W){return C.box(C.types.mdia,C.mdhd(W.timescale,W.duration),C.hdlr(W.type),C.minf(W))},C.mfhd=function(W){return C.box(C.types.mfhd,new Uint8Array([0,0,0,0,W>>24,W>>16&255,W>>8&255,255&W]))},C.minf=function(W){return W.type==="audio"?C.box(C.types.minf,C.box(C.types.smhd,C.SMHD),C.DINF,C.stbl(W)):C.box(C.types.minf,C.box(C.types.vmhd,C.VMHD),C.DINF,C.stbl(W))},C.moof=function(W,F,ce){return C.box(C.types.moof,C.mfhd(W),C.traf(ce,F))},C.moov=function(W){for(var F=W.length,ce=[];F--;)ce[F]=C.trak(W[F]);return C.box.apply(null,[C.types.moov,C.mvhd(W[0].timescale,W[0].duration)].concat(ce).concat(C.mvex(W)))},C.mvex=function(W){for(var F=W.length,ce=[];F--;)ce[F]=C.trex(W[F]);return C.box.apply(null,[C.types.mvex].concat(ce))},C.mvhd=function(W,F){F*=W;var ce=Math.floor(F/(A+1)),me=Math.floor(F%(A+1)),he=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,W>>24&255,W>>16&255,W>>8&255,255&W,ce>>24,ce>>16&255,ce>>8&255,255&ce,me>>24,me>>16&255,me>>8&255,255&me,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return C.box(C.types.mvhd,he)},C.sdtp=function(W){var F,ce,me=W.samples||[],he=new Uint8Array(4+me.length);for(F=0;F<me.length;F++)ce=me[F].flags,he[F+4]=ce.dependsOn<<4|ce.isDependedOn<<2|ce.hasRedundancy;return C.box(C.types.sdtp,he)},C.stbl=function(W){return C.box(C.types.stbl,C.stsd(W),C.box(C.types.stts,C.STTS),C.box(C.types.stsc,C.STSC),C.box(C.types.stsz,C.STSZ),C.box(C.types.stco,C.STCO))},C.avc1=function(W){var F,ce,me,he=[],fe=[];for(F=0;F<W.sps.length;F++)me=(ce=W.sps[F]).byteLength,he.push(me>>>8&255),he.push(255&me),he=he.concat(Array.prototype.slice.call(ce));for(F=0;F<W.pps.length;F++)me=(ce=W.pps[F]).byteLength,fe.push(me>>>8&255),fe.push(255&me),fe=fe.concat(Array.prototype.slice.call(ce));var Ke=C.box(C.types.avcC,new Uint8Array([1,he[3],he[4],he[5],255,224|W.sps.length].concat(he).concat([W.pps.length]).concat(fe))),We=W.width,Ge=W.height,Ue=W.pixelRatio[0],Ze=W.pixelRatio[1];return C.box(C.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,We>>8&255,255&We,Ge>>8&255,255&Ge,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Ke,C.box(C.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),C.box(C.types.pasp,new Uint8Array([Ue>>24,Ue>>16&255,Ue>>8&255,255&Ue,Ze>>24,Ze>>16&255,Ze>>8&255,255&Ze])))},C.esds=function(W){var F=W.config.length;return new Uint8Array([0,0,0,0,3,23+F,0,1,0,4,15+F,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([F]).concat(W.config).concat([6,1,2]))},C.mp4a=function(W){var F=W.samplerate;return C.box(C.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,W.channelCount,0,16,0,0,0,0,F>>8&255,255&F,0,0]),C.box(C.types.esds,C.esds(W)))},C.mp3=function(W){var F=W.samplerate;return C.box(C.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,W.channelCount,0,16,0,0,0,0,F>>8&255,255&F,0,0]))},C.stsd=function(W){return W.type==="audio"?W.segmentCodec==="mp3"&&W.codec==="mp3"?C.box(C.types.stsd,C.STSD,C.mp3(W)):C.box(C.types.stsd,C.STSD,C.mp4a(W)):C.box(C.types.stsd,C.STSD,C.avc1(W))},C.tkhd=function(W){var F=W.id,ce=W.duration*W.timescale,me=W.width,he=W.height,fe=Math.floor(ce/(A+1)),Ke=Math.floor(ce%(A+1));return C.box(C.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,F>>24&255,F>>16&255,F>>8&255,255&F,0,0,0,0,fe>>24,fe>>16&255,fe>>8&255,255&fe,Ke>>24,Ke>>16&255,Ke>>8&255,255&Ke,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,me>>8&255,255&me,0,0,he>>8&255,255&he,0,0]))},C.traf=function(W,F){var ce=C.sdtp(W),me=W.id,he=Math.floor(F/(A+1)),fe=Math.floor(F%(A+1));return C.box(C.types.traf,C.box(C.types.tfhd,new Uint8Array([0,0,0,0,me>>24,me>>16&255,me>>8&255,255&me])),C.box(C.types.tfdt,new Uint8Array([1,0,0,0,he>>24,he>>16&255,he>>8&255,255&he,fe>>24,fe>>16&255,fe>>8&255,255&fe])),C.trun(W,ce.length+16+20+8+16+8+8),ce)},C.trak=function(W){return W.duration=W.duration||4294967295,C.box(C.types.trak,C.tkhd(W),C.mdia(W))},C.trex=function(W){var F=W.id;return C.box(C.types.trex,new Uint8Array([0,0,0,0,F>>24,F>>16&255,F>>8&255,255&F,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},C.trun=function(W,F){var ce,me,he,fe,Ke,We,Ge=W.samples||[],Ue=Ge.length,Ze=12+16*Ue,ft=new Uint8Array(Ze);for(F+=8+Ze,ft.set([W.type==="video"?1:0,0,15,1,Ue>>>24&255,Ue>>>16&255,Ue>>>8&255,255&Ue,F>>>24&255,F>>>16&255,F>>>8&255,255&F],0),ce=0;ce<Ue;ce++)he=(me=Ge[ce]).duration,fe=me.size,Ke=me.flags,We=me.cts,ft.set([he>>>24&255,he>>>16&255,he>>>8&255,255&he,fe>>>24&255,fe>>>16&255,fe>>>8&255,255&fe,Ke.isLeading<<2|Ke.dependsOn,Ke.isDependedOn<<6|Ke.hasRedundancy<<4|Ke.paddingValue<<1|Ke.isNonSync,61440&Ke.degradPrio,15&Ke.degradPrio,We>>>24&255,We>>>16&255,We>>>8&255,255&We],12+16*ce);return C.box(C.types.trun,ft)},C.initSegment=function(W){C.types||C.init();var F=C.moov(W),ce=new Uint8Array(C.FTYP.byteLength+F.byteLength);return ce.set(C.FTYP),ce.set(F,C.FTYP.byteLength),ce},C}();y.types=void 0,y.HDLR_TYPES=void 0,y.STTS=void 0,y.STSC=void 0,y.STCO=void 0,y.STSZ=void 0,y.VMHD=void 0,y.SMHD=void 0,y.STSD=void 0,y.FTYP=void 0,y.DINF=void 0;const I=y;var k=b(851),z=b(973),Z=b(93),V=b(308),M=b(673);function B(){return B=Object.assign?Object.assign.bind():function(C){for(var W=1;W<arguments.length;W++){var F=arguments[W];for(var ce in F)Object.prototype.hasOwnProperty.call(F,ce)&&(C[ce]=F[ce])}return C},B.apply(this,arguments)}var re=null,q=null,Q=function(){function C(F,ce,me,he){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=F,this.config=ce,this.typeSupported=me,this.ISGenerated=!1,re===null){var fe=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);re=fe?parseInt(fe[1]):0}if(q===null){var Ke=navigator.userAgent.match(/Safari\/(\d+)/i);q=Ke?parseInt(Ke[1]):0}}var W=C.prototype;return W.destroy=function(){},W.resetTimeStamp=function(F){Z.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=F},W.resetNextTimestamp=function(){Z.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},W.resetInitSegment=function(){Z.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},W.getVideoStartPts=function(F){var ce=!1,me=F.reduce(function(he,fe){var Ke=fe.pts-he;return Ke<-4294967296?(ce=!0,$(he,fe.pts)):Ke>0?he:fe.pts},F[0].pts);return ce&&Z.logger.debug("PTS rollover detected"),me},W.remux=function(F,ce,me,he,fe,Ke,We,Ge){var Ue,Ze,ft,ue,ge,ae,we=fe,ke=fe,Pe=F.pid>-1,xe=ce.pid>-1,P=ce.samples.length,H=F.samples.length>0,O=We&&P>0||P>1;if((!Pe||H)&&(!xe||O)||this.ISGenerated||We){this.ISGenerated||(ft=this.generateIS(F,ce,fe));var se,le=this.isVideoContiguous,Te=-1;if(O&&(Te=function(Me){for(var Ie=0;Ie<Me.length;Ie++)if(Me[Ie].key)return Ie;return-1}(ce.samples),!le&&this.config.forceKeyFrameOnDiscontinuity))if(ae=!0,Te>0){Z.logger.warn("[mp4-remuxer]: Dropped "+Te+" out of "+P+" video samples due to a missing keyframe");var De=this.getVideoStartPts(ce.samples);ce.samples=ce.samples.slice(Te),ce.dropped+=Te,se=ke+=(ce.samples[0].pts-De)/ce.inputTimeScale}else Te===-1&&(Z.logger.warn("[mp4-remuxer]: No keyframe found out of "+P+" video samples"),ae=!1);if(this.ISGenerated){if(H&&O){var _e=this.getVideoStartPts(ce.samples),Re=($(F.samples[0].pts,_e)-_e)/ce.inputTimeScale;we+=Math.max(0,Re),ke+=Math.max(0,-Re)}if(H){if(F.samplerate||(Z.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),ft=this.generateIS(F,ce,fe)),Ze=this.remuxAudio(F,we,this.isAudioContiguous,Ke,xe||O||Ge===V.PlaylistLevelType.AUDIO?ke:void 0),O){var ye=Ze?Ze.endPTS-Ze.startPTS:0;ce.inputTimeScale||(Z.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),ft=this.generateIS(F,ce,fe)),Ue=this.remuxVideo(ce,ke,le,ye)}}else O&&(Ue=this.remuxVideo(ce,ke,le,0));Ue&&(Ue.firstKeyFrame=Te,Ue.independent=Te!==-1,Ue.firstKeyFramePTS=se)}}return this.ISGenerated&&(me.samples.length&&(ge=ie(me,fe,this._initPTS,this._initDTS)),he.samples.length&&(ue=pe(he,fe,this._initPTS))),{audio:Ze,video:Ue,initSegment:ft,independent:ae,text:ue,id3:ge}},W.generateIS=function(F,ce,me){var he,fe,Ke,We=F.samples,Ge=ce.samples,Ue=this.typeSupported,Ze={},ft=!(0,L.isFiniteNumber)(this._initPTS),ue="audio/mp4";if(ft&&(he=fe=1/0),F.config&&We.length&&(F.timescale=F.samplerate,F.segmentCodec==="mp3"&&(Ue.mpeg?(ue="audio/mpeg",F.codec=""):Ue.mp3&&(F.codec="mp3")),Ze.audio={id:"audio",container:ue,codec:F.codec,initSegment:F.segmentCodec==="mp3"&&Ue.mpeg?new Uint8Array(0):I.initSegment([F]),metadata:{channelCount:F.channelCount}},ft&&(Ke=F.inputTimeScale,he=fe=We[0].pts-Math.round(Ke*me))),ce.sps&&ce.pps&&Ge.length&&(ce.timescale=ce.inputTimeScale,Ze.video={id:"main",container:"video/mp4",codec:ce.codec,initSegment:I.initSegment([ce]),metadata:{width:ce.width,height:ce.height}},ft)){Ke=ce.inputTimeScale;var ge=this.getVideoStartPts(Ge),ae=Math.round(Ke*me);fe=Math.min(fe,$(Ge[0].dts,ge)-ae),he=Math.min(he,ge-ae)}if(Object.keys(Ze).length)return this.ISGenerated=!0,ft&&(this._initPTS=he,this._initDTS=fe),{tracks:Ze,initPTS:he,timescale:Ke}},W.remuxVideo=function(F,ce,me,he){var fe,Ke,We=F.inputTimeScale,Ge=F.samples,Ue=[],Ze=Ge.length,ft=this._initPTS,ue=this.nextAvcDts,ge=8,ae=this.videoSampleDuration,we=Number.POSITIVE_INFINITY,ke=Number.NEGATIVE_INFINITY,Pe=!1;me&&ue!==null||(ue=ce*We-(Ge[0].pts-$(Ge[0].dts,Ge[0].pts)));for(var xe=0;xe<Ze;xe++){var P=Ge[xe];P.pts=$(P.pts-ft,ue),P.dts=$(P.dts-ft,ue),P.dts<Ge[xe>0?xe-1:xe].dts&&(Pe=!0)}Pe&&Ge.sort(function(St,Mt){var or=St.dts-Mt.dts,Nr=St.pts-Mt.pts;return or||Nr}),fe=Ge[0].dts;var H=Ge[Ge.length-1].dts-fe,O=H?Math.round(H/(Ze-1)):ae||F.inputTimeScale/30;if(me){var se=fe-ue,le=se>O,Te=se<-1;if((le||Te)&&(le?Z.logger.warn("AVC: "+(0,M.toMsFromMpegTsClock)(se,!0)+" ms ("+se+"dts) hole between fragments detected, filling it"):Z.logger.warn("AVC: "+(0,M.toMsFromMpegTsClock)(-se,!0)+" ms ("+se+"dts) overlapping between fragments detected"),!Te||ue>Ge[0].pts)){fe=ue;var De=Ge[0].pts-se;Ge[0].dts=fe,Ge[0].pts=De,Z.logger.log("Video: First PTS/DTS adjusted: "+(0,M.toMsFromMpegTsClock)(De,!0)+"/"+(0,M.toMsFromMpegTsClock)(fe,!0)+", delta: "+(0,M.toMsFromMpegTsClock)(se,!0)+" ms")}}fe=Math.max(0,fe);for(var _e=0,Re=0,ye=0;ye<Ze;ye++){for(var Me=Ge[ye],Ie=Me.units,Ne=Ie.length,Ve=0,$e=0;$e<Ne;$e++)Ve+=Ie[$e].data.length;Re+=Ve,_e+=Ne,Me.length=Ve,Me.dts=Math.max(Me.dts,fe),we=Math.min(Me.pts,we),ke=Math.max(Me.pts,ke)}Ke=Ge[Ze-1].dts;var tt,et=Re+4*_e+8;try{tt=new Uint8Array(et)}catch{return void this.observer.emit(k.Events.ERROR,k.Events.ERROR,{type:z.ErrorTypes.MUX_ERROR,details:z.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:et,reason:"fail allocating video mdat "+et})}var dt=new DataView(tt.buffer);dt.setUint32(0,et),tt.set(I.types.mdat,4);for(var Tt=!1,bt=Number.POSITIVE_INFINITY,ne=Number.POSITIVE_INFINITY,K=Number.NEGATIVE_INFINITY,D=Number.NEGATIVE_INFINITY,N=0;N<Ze;N++){for(var U=Ge[N],Y=U.units,X=0,te=0,Ee=Y.length;te<Ee;te++){var Se=Y[te],Ae=Se.data,Fe=Se.data.byteLength;dt.setUint32(ge,Fe),ge+=4,tt.set(Ae,ge),ge+=Fe,X+=4+Fe}var qe=void 0;if(N<Ze-1)ae=Ge[N+1].dts-U.dts,qe=Ge[N+1].pts-U.pts;else{var Be=this.config,Xe=N>0?U.dts-Ge[N-1].dts:O;if(qe=N>0?U.pts-Ge[N-1].pts:O,Be.stretchShortVideoTrack&&this.nextAudioPts!==null){var at=Math.floor(Be.maxBufferHole*We),ht=(he?we+he*We:this.nextAudioPts)-U.pts;ht>at?((ae=ht-Xe)<0?ae=Xe:Tt=!0,Z.logger.log("[mp4-remuxer]: It is approximately "+ht/90+" ms to the next segment; using duration "+ae/90+" ms for the last video frame.")):ae=Xe}else ae=Xe}var ze=Math.round(U.pts-U.dts);bt=Math.min(bt,ae),K=Math.max(K,ae),ne=Math.min(ne,qe),D=Math.max(D,qe),Ue.push(new Ce(U.key,ae,X,ze))}if(Ue.length){if(re){if(re<70){var vt=Ue[0].flags;vt.dependsOn=2,vt.isNonSync=0}}else if(q&&D-ne<K-bt&&O/K<.025&&Ue[0].cts===0){Z.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Ot=fe,yt=0,Ft=Ue.length;yt<Ft;yt++){var Rt=Ot+Ue[yt].duration,Qe=Ot+Ue[yt].cts;if(yt<Ft-1){var Kt=Rt+Ue[yt+1].cts;Ue[yt].duration=Kt-Qe}else Ue[yt].duration=yt?Ue[yt-1].duration:O;Ue[yt].cts=0,Ot=Rt}}}ae=Tt||!ae?O:ae,this.nextAvcDts=ue=Ke+ae,this.videoSampleDuration=ae,this.isVideoContiguous=!0;var ar={data1:I.moof(F.sequenceNumber++,fe,B({},F,{samples:Ue})),data2:tt,startPTS:we/We,endPTS:(ke+ae)/We,startDTS:fe/We,endDTS:ue/We,type:"video",hasAudio:!1,hasVideo:!0,nb:Ue.length,dropped:F.dropped};return F.samples=[],F.dropped=0,ar},W.remuxAudio=function(F,ce,me,he,fe){var Ke=F.inputTimeScale,We=Ke/(F.samplerate?F.samplerate:Ke),Ge=F.segmentCodec==="aac"?1024:1152,Ue=Ge*We,Ze=this._initPTS,ft=F.segmentCodec==="mp3"&&this.typeSupported.mpeg,ue=[],ge=fe!==void 0,ae=F.samples,we=ft?0:8,ke=this.nextAudioPts||-1,Pe=ce*Ke;if(this.isAudioContiguous=me=me||ae.length&&ke>0&&(he&&Math.abs(Pe-ke)<9e3||Math.abs($(ae[0].pts-Ze,Pe)-ke)<20*Ue),ae.forEach(function(te){te.pts=$(te.pts-Ze,Pe)}),!me||ke<0){if(ae=ae.filter(function(te){return te.pts>=0}),!ae.length)return;ke=fe===0?0:he&&!ge?Math.max(0,Pe):ae[0].pts}if(F.segmentCodec==="aac")for(var xe=this.config.maxAudioFramesDrift,P=0,H=ke;P<ae.length;P++){var O=ae[P],se=O.pts,le=se-H,Te=Math.abs(1e3*le/Ke);if(le<=-xe*Ue&&ge)P===0&&(Z.logger.warn("Audio frame @ "+(se/Ke).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*le/Ke)+" ms."),this.nextAudioPts=ke=H=se);else if(le>=xe*Ue&&Te<1e4&&ge){var De=Math.round(le/Ue);(H=se-De*Ue)<0&&(De--,H+=Ue),P===0&&(this.nextAudioPts=ke=H),Z.logger.warn("[mp4-remuxer]: Injecting "+De+" audio frame @ "+(H/Ke).toFixed(3)+"s due to "+Math.round(1e3*le/Ke)+" ms gap.");for(var _e=0;_e<De;_e++){var Re=Math.max(H,0),ye=w.getSilentFrame(F.manifestCodec||F.codec,F.channelCount);ye||(Z.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ye=O.unit.subarray()),ae.splice(P,0,{unit:ye,pts:Re}),H+=Ue,P++}}O.pts=H,H+=Ue}for(var Me,Ie=null,Ne=null,Ve=0,$e=ae.length;$e--;)Ve+=ae[$e].unit.byteLength;for(var tt=0,et=ae.length;tt<et;tt++){var dt=ae[tt],Tt=dt.unit,bt=dt.pts;if(Ne!==null)ue[tt-1].duration=Math.round((bt-Ne)/We);else{if(me&&F.segmentCodec==="aac"&&(bt=ke),Ie=bt,!(Ve>0))return;Ve+=we;try{Me=new Uint8Array(Ve)}catch{return void this.observer.emit(k.Events.ERROR,k.Events.ERROR,{type:z.ErrorTypes.MUX_ERROR,details:z.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ve,reason:"fail allocating audio mdat "+Ve})}ft||(new DataView(Me.buffer).setUint32(0,Ve),Me.set(I.types.mdat,4))}Me.set(Tt,we);var ne=Tt.byteLength;we+=ne,ue.push(new Ce(!0,Ge,ne,0)),Ne=bt}var K=ue.length;if(K){var D=ue[ue.length-1];this.nextAudioPts=ke=Ne+We*D.duration;var N=ft?new Uint8Array(0):I.moof(F.sequenceNumber++,Ie/We,B({},F,{samples:ue}));F.samples=[];var U=Ie/Ke,Y=ke/Ke,X={data1:N,data2:Me,startPTS:U,endPTS:Y,startDTS:U,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.isAudioContiguous=!0,X}},W.remuxEmptyAudio=function(F,ce,me,he){var fe=F.inputTimeScale,Ke=fe/(F.samplerate?F.samplerate:fe),We=this.nextAudioPts,Ge=(We!==null?We:he.startDTS*fe)+this._initDTS,Ue=he.endDTS*fe+this._initDTS,Ze=1024*Ke,ft=Math.ceil((Ue-Ge)/Ze),ue=w.getSilentFrame(F.manifestCodec||F.codec,F.channelCount);if(Z.logger.warn("[mp4-remuxer]: remux empty Audio"),ue){for(var ge=[],ae=0;ae<ft;ae++){var we=Ge+ae*Ze;ge.push({unit:ue,pts:we,dts:we})}return F.samples=ge,this.remuxAudio(F,ce,me,!1)}Z.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},C}();function $(C,W){var F;if(W===null)return C;for(F=W<C?-8589934592:8589934592;Math.abs(C-W)>4294967296;)C+=F;return C}function ie(C,W,F,ce){var me=C.samples.length;if(me){for(var he=C.inputTimeScale,fe=0;fe<me;fe++){var Ke=C.samples[fe];Ke.pts=$(Ke.pts-F,W*he)/he,Ke.dts=$(Ke.dts-ce,W*he)/he}var We=C.samples;return C.samples=[],{samples:We}}}function pe(C,W,F){var ce=C.samples.length;if(ce){for(var me=C.inputTimeScale,he=0;he<ce;he++){var fe=C.samples[he];fe.pts=$(fe.pts-F,W*me)/me}C.samples.sort(function(We,Ge){return We.pts-Ge.pts});var Ke=C.samples;return C.samples=[],{samples:Ke}}}var Ce=function(C,W,F,ce){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=W,this.size=F,this.cts=ce,this.flags=new ee(C)},ee=function(C){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=C?2:1,this.isNonSync=C?0:1}},856:(E,S,b)=>{var L;b.r(S),b.d(S,{MetadataSchema:()=>L}),function(w){w.audioId3="org.id3",w.dateRange="com.apple.quicktime.HLS",w.emsg="https://aomedia.org/emsg/ID3"}(L||(L={}))},308:(E,S,b)=>{var L,w;b.r(S),b.d(S,{PlaylistContextType:()=>L,PlaylistLevelType:()=>w}),function(A){A.MANIFEST="manifest",A.LEVEL="level",A.AUDIO_TRACK="audioTrack",A.SUBTITLE_TRACK="subtitleTrack"}(L||(L={})),function(A){A.MAIN="main",A.AUDIO="audio",A.SUBTITLE="subtitle"}(w||(w={}))},300:(E,S,b)=>{b.r(S),b.d(S,{default:()=>L});const L={hexDump:function(w){for(var A="",y=0;y<w.length;y++){var I=w[y].toString(16);I.length<2&&(I="0"+I),A+=I}return A}}},93:(E,S,b)=>{b.r(S),b.d(S,{enableLogs:()=>I,logger:()=>k});var L=function(){},w={trace:L,debug:L,log:L,warn:L,info:L,error:L},A=w;function y(z){var Z=self.console[z];return Z?Z.bind(self.console,"["+z+"] >"):L}function I(z,Z){if(self.console&&z===!0||typeof z=="object"){(function(V){for(var M=arguments.length,B=new Array(M>1?M-1:0),re=1;re<M;re++)B[re-1]=arguments[re];B.forEach(function(q){A[q]=V[q]?V[q].bind(V):y(q)})})(z,"debug","log","info","warn","error");try{A.log('Debug logs enabled for "'+Z+'"')}catch{A=w}}else A=w}var k=w},63:(E,S,b)=>{b.r(S),b.d(S,{RemuxerTrackIdConfig:()=>Z,appendUint8Array:()=>me,bin2str:()=>V,computeRawDurationFromSamples:()=>W,discardEPB:()=>We,findBox:()=>Q,getDuration:()=>C,getStartDTS:()=>ee,mp4Box:()=>Ue,mp4pssh:()=>Ze,offsetStartDTS:()=>F,parseEmsg:()=>Ge,parseInitSegment:()=>ie,parsePssh:()=>ft,parseSEIMessageFromNALu:()=>Ke,parseSamples:()=>he,parseSegmentIndex:()=>$,parseSinf:()=>Ce,patchEncyptionData:()=>pe,readSint32:()=>re,readUint16:()=>M,readUint32:()=>B,segmentValidRange:()=>ce,writeUint32:()=>q});var L=b(923),w=b(145),A=b(181),y=b(93),I=b(300),k=Math.pow(2,32)-1,z=[].push,Z={video:1,audio:2,id3:3,text:4};function V(ue){return String.fromCharCode.apply(null,ue)}function M(ue,ge){var ae=ue[ge]<<8|ue[ge+1];return ae<0?65536+ae:ae}function B(ue,ge){var ae=re(ue,ge);return ae<0?4294967296+ae:ae}function re(ue,ge){return ue[ge]<<24|ue[ge+1]<<16|ue[ge+2]<<8|ue[ge+3]}function q(ue,ge,ae){ue[ge]=ae>>24,ue[ge+1]=ae>>16&255,ue[ge+2]=ae>>8&255,ue[ge+3]=255&ae}function Q(ue,ge){var ae=[];if(!ge.length)return ae;for(var we=ue.byteLength,ke=0;ke<we;){var Pe=B(ue,ke),xe=Pe>1?ke+Pe:we;if(V(ue.subarray(ke+4,ke+8))===ge[0])if(ge.length===1)ae.push(ue.subarray(ke+8,xe));else{var P=Q(ue.subarray(ke+8,xe),ge.slice(1));P.length&&z.apply(ae,P)}ke=xe}return ae}function $(ue){var ge=[],ae=ue[0],we=8,ke=B(ue,we);we+=4,we+=ae===0?8:16,we+=2;var Pe=ue.length+0,xe=M(ue,we);we+=2;for(var P=0;P<xe;P++){var H=we,O=B(ue,H);H+=4;var se=2147483647&O;if((2147483648&O)>>>31==1)return console.warn("SIDX has hierarchical references (not supported)"),null;var le=B(ue,H);H+=4,ge.push({referenceSize:se,subsegmentDuration:le,info:{duration:le/ke,start:Pe,end:Pe+se-1}}),Pe+=se,we=H+=4}return{earliestPresentationTime:0,timescale:ke,version:ae,referencesCount:xe,references:ge}}function ie(ue){for(var ge=[],ae=Q(ue,["moov","trak"]),we=0;we<ae.length;we++){var ke=ae[we],Pe=Q(ke,["tkhd"])[0];if(Pe){var xe=Pe[0],P=xe===0?12:20,H=B(Pe,P),O=Q(ke,["mdia","mdhd"])[0];if(O){var se=B(O,P=(xe=O[0])===0?12:20),le=Q(ke,["mdia","hdlr"])[0];if(le){var Te=V(le.subarray(8,12)),De={soun:L.ElementaryStreamTypes.AUDIO,vide:L.ElementaryStreamTypes.VIDEO}[Te];if(De){var _e=Q(ke,["mdia","minf","stbl","stsd"])[0],Re=void 0;_e&&(Re=V(_e.subarray(12,16))),ge[H]={timescale:se,type:De},ge[De]={timescale:se,id:H,codec:Re}}}}}}return Q(ue,["moov","mvex","trex"]).forEach(function(ye){var Me=B(ye,4),Ie=ge[Me];Ie&&(Ie.default={duration:B(ye,12),flags:B(ye,20)})}),ge}function pe(ue,ge){if(!ue||!ge)return ue;var ae=ge.keyId;return ae&&ge.isCommonEncryption&&Q(ue,["moov","trak"]).forEach(function(we){var ke=Q(we,["mdia","minf","stbl","stsd"])[0].subarray(8),Pe=Q(ke,["enca"]),xe=Pe.length>0;xe||(Pe=Q(ke,["encv"])),Pe.forEach(function(P){Q(xe?P.subarray(28):P.subarray(78),["sinf"]).forEach(function(H){var O=Ce(H);if(O){var se=O.subarray(8,24);se.some(function(le){return le!==0})||(y.logger.log("[eme] Patching keyId in 'enc"+(xe?"a":"v")+">sinf>>tenc' box: "+I.default.hexDump(se)+" -> "+I.default.hexDump(ae)),O.set(ae,8))}})})}),ue}function Ce(ue){var ge=Q(ue,["schm"])[0];if(ge){var ae=V(ge.subarray(4,8));if(ae==="cbcs"||ae==="cenc")return Q(ue,["schi","tenc"])[0]}return y.logger.error("[eme] missing 'schm' box"),null}function ee(ue,ge){return Q(ge,["moof","traf"]).reduce(function(ae,we){var ke=Q(we,["tfdt"])[0],Pe=ke[0],xe=Q(we,["tfhd"]).reduce(function(P,H){var O=B(H,4),se=ue[O];if(se){var le=B(ke,4);Pe===1&&(le*=Math.pow(2,32),le+=B(ke,8));var Te=le/(se.timescale||9e4);if(isFinite(Te)&&(P===null||Te<P))return Te}return P},null);return xe!==null&&isFinite(xe)&&(ae===null||xe<ae)?xe:ae},null)||0}function C(ue,ge){for(var ae=0,we=0,ke=0,Pe=Q(ue,["moof","traf"]),xe=0;xe<Pe.length;xe++){var P=Pe[xe],H=Q(P,["tfhd"])[0],O=ge[B(H,4)];if(O){var se=O.default,le=B(H,0)|(se==null?void 0:se.flags),Te=se==null?void 0:se.duration;8&le&&(Te=B(H,2&le?12:8));for(var De=O.timescale||9e4,_e=Q(P,["trun"]),Re=0;Re<_e.length;Re++)!(ae=W(_e[Re]))&&Te&&(ae=Te*B(_e[Re],4)),O.type===L.ElementaryStreamTypes.VIDEO?we+=ae/De:O.type===L.ElementaryStreamTypes.AUDIO&&(ke+=ae/De)}}if(we===0&&ke===0){for(var ye=0,Me=Q(ue,["sidx"]),Ie=0;Ie<Me.length;Ie++){var Ne=$(Me[Ie]);Ne!=null&&Ne.references&&(ye+=Ne.references.reduce(function(Ve,$e){return Ve+$e.info.duration||0},0))}return ye}return we||ke}function W(ue){var ge=B(ue,0),ae=8;1&ge&&(ae+=4),4&ge&&(ae+=4);for(var we=0,ke=B(ue,4),Pe=0;Pe<ke;Pe++)256&ge&&(we+=B(ue,ae),ae+=4),512&ge&&(ae+=4),1024&ge&&(ae+=4),2048&ge&&(ae+=4);return we}function F(ue,ge,ae){Q(ge,["moof","traf"]).forEach(function(we){Q(we,["tfhd"]).forEach(function(ke){var Pe=B(ke,4),xe=ue[Pe];if(xe){var P=xe.timescale||9e4;Q(we,["tfdt"]).forEach(function(H){var O=H[0],se=B(H,4);if(O===0)se-=ae*P,q(H,4,se=Math.max(se,0));else{se*=Math.pow(2,32),se+=B(H,8),se-=ae*P,se=Math.max(se,0);var le=Math.floor(se/(k+1)),Te=Math.floor(se%(k+1));q(H,4,le),q(H,8,Te)}})}})})}function ce(ue){var ge={valid:null,remainder:null},ae=Q(ue,["moof"]);if(!ae)return ge;if(ae.length<2)return ge.remainder=ue,ge;var we=ae[ae.length-1];return ge.valid=(0,w.sliceUint8)(ue,0,we.byteOffset-8),ge.remainder=(0,w.sliceUint8)(ue,we.byteOffset-8),ge}function me(ue,ge){var ae=new Uint8Array(ue.length+ge.length);return ae.set(ue),ae.set(ge,ue.length),ae}function he(ue,ge){var ae=[],we=ge.samples,ke=ge.timescale,Pe=ge.id,xe=!1;return Q(we,["moof"]).map(function(P){var H=P.byteOffset-8;Q(P,["traf"]).map(function(O){var se=Q(O,["tfdt"]).map(function(le){var Te=le[0],De=B(le,4);return Te===1&&(De*=Math.pow(2,32),De+=B(le,8)),De/ke})[0];return se!==void 0&&(ue=se),Q(O,["tfhd"]).map(function(le){var Te=B(le,4),De=16777215&B(le,0),_e=0,Re=(16&De)!=0,ye=0,Me=(32&De)!=0,Ie=8;Te===Pe&&(1&De&&(Ie+=8),2&De&&(Ie+=4),8&De&&(_e=B(le,Ie),Ie+=4),Re&&(ye=B(le,Ie),Ie+=4),Me&&(Ie+=4),ge.type==="video"&&(xe=function(Ne){if(!Ne)return!1;var Ve=Ne.indexOf("."),$e=Ve<0?Ne:Ne.substring(0,Ve);return $e==="hvc1"||$e==="hev1"||$e==="dvh1"||$e==="dvhe"}(ge.codec)),Q(O,["trun"]).map(function(Ne){var Ve=Ne[0],$e=16777215&B(Ne,0),tt=(1&$e)!=0,et=0,dt=(4&$e)!=0,Tt=(256&$e)!=0,bt=0,ne=(512&$e)!=0,K=0,D=(1024&$e)!=0,N=(2048&$e)!=0,U=0,Y=B(Ne,4),X=8;tt&&(et=B(Ne,X),X+=4),dt&&(X+=4);for(var te=et+H,Ee=0;Ee<Y;Ee++){if(Tt?(bt=B(Ne,X),X+=4):bt=_e,ne?(K=B(Ne,X),X+=4):K=ye,D&&(X+=4),N&&(U=Ve===0?B(Ne,X):re(Ne,X),X+=4),ge.type===L.ElementaryStreamTypes.VIDEO)for(var Se=0;Se<K;){var Ae=B(we,te);fe(xe,we[te+=4])&&Ke(we.subarray(te,te+Ae),xe?2:1,ue+U/ke,ae),te+=Ae,Se+=Ae+4}ue+=bt/ke}}))})})}),ae}function fe(ue,ge){if(ue){var ae=ge>>1&63;return ae===39||ae===40}return(31&ge)==6}function Ke(ue,ge,ae,we){var ke=We(ue),Pe=0;Pe+=ge;for(var xe=0,P=0,H=!1,O=0;Pe<ke.length;){xe=0;do{if(Pe>=ke.length)break;xe+=O=ke[Pe++]}while(O===255);P=0;do{if(Pe>=ke.length)break;P+=O=ke[Pe++]}while(O===255);var se=ke.length-Pe;if(!H&&xe===4&&Pe<ke.length){if(H=!0,ke[Pe++]===181){var le=M(ke,Pe);if(Pe+=2,le===49){var Te=B(ke,Pe);if(Pe+=4,Te===1195456820){var De=ke[Pe++];if(De===3){var _e=ke[Pe++],Re=64&_e,ye=Re?2+3*(31&_e):0,Me=new Uint8Array(ye);if(Re){Me[0]=_e;for(var Ie=1;Ie<ye;Ie++)Me[Ie]=ke[Pe++]}we.push({type:De,payloadType:xe,pts:ae,bytes:Me})}}}}}else if(xe===5&&P<se){if(H=!0,P>16){for(var Ne=[],Ve=0;Ve<16;Ve++){var $e=ke[Pe++].toString(16);Ne.push($e.length==1?"0"+$e:$e),Ve!==3&&Ve!==5&&Ve!==7&&Ve!==9||Ne.push("-")}for(var tt=P-16,et=new Uint8Array(tt),dt=0;dt<tt;dt++)et[dt]=ke[Pe++];we.push({payloadType:xe,pts:ae,uuid:Ne.join(""),userData:(0,A.utf8ArrayToStr)(et),userDataBytes:et})}}else if(P<se)Pe+=P;else if(P>se)break}}function We(ue){for(var ge=ue.byteLength,ae=[],we=1;we<ge-2;)ue[we]===0&&ue[we+1]===0&&ue[we+2]===3?(ae.push(we+2),we+=2):we++;if(ae.length===0)return ue;var ke=ge-ae.length,Pe=new Uint8Array(ke),xe=0;for(we=0;we<ke;xe++,we++)xe===ae[0]&&(xe++,ae.shift()),Pe[we]=ue[xe];return Pe}function Ge(ue){var ge=ue[0],ae="",we="",ke=0,Pe=0,xe=0,P=0,H=0,O=0;if(ge===0){for(;V(ue.subarray(O,O+1))!=="\0";)ae+=V(ue.subarray(O,O+1)),O+=1;for(ae+=V(ue.subarray(O,O+1)),O+=1;V(ue.subarray(O,O+1))!=="\0";)we+=V(ue.subarray(O,O+1)),O+=1;we+=V(ue.subarray(O,O+1)),O+=1,ke=B(ue,12),Pe=B(ue,16),P=B(ue,20),H=B(ue,24),O=28}else if(ge===1){ke=B(ue,O+=4);var se=B(ue,O+=4),le=B(ue,O+=4);for(O+=4,xe=Math.pow(2,32)*se+le,Number.isSafeInteger(xe)||(xe=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),P=B(ue,O),H=B(ue,O+=4),O+=4;V(ue.subarray(O,O+1))!=="\0";)ae+=V(ue.subarray(O,O+1)),O+=1;for(ae+=V(ue.subarray(O,O+1)),O+=1;V(ue.subarray(O,O+1))!=="\0";)we+=V(ue.subarray(O,O+1)),O+=1;we+=V(ue.subarray(O,O+1)),O+=1}return{schemeIdUri:ae,value:we,timeScale:ke,presentationTime:xe,presentationTimeDelta:Pe,eventDuration:P,id:H,payload:ue.subarray(O,ue.byteLength)}}function Ue(ue){for(var ge=arguments.length,ae=new Array(ge>1?ge-1:0),we=1;we<ge;we++)ae[we-1]=arguments[we];for(var ke=ae.length,Pe=8,xe=ke;xe--;)Pe+=ae[xe].byteLength;var P=new Uint8Array(Pe);for(P[0]=Pe>>24&255,P[1]=Pe>>16&255,P[2]=Pe>>8&255,P[3]=255&Pe,P.set(ue,4),xe=0,Pe=8;xe<ke;xe++)P.set(ae[xe],Pe),Pe+=ae[xe].byteLength;return P}function Ze(ue,ge,ae){if(ue.byteLength!==16)throw new RangeError("Invalid system id");var we,ke,Pe;if(ge){we=1,ke=new Uint8Array(16*ge.length);for(var xe=0;xe<ge.length;xe++){var P=ge[xe];if(P.byteLength!==16)throw new RangeError("Invalid key");ke.set(P,16*xe)}}else we=0,ke=new Uint8Array;we>0?(Pe=new Uint8Array(4),ge.length>0&&new DataView(Pe.buffer).setUint32(0,ge.length,!1)):Pe=new Uint8Array;var H=new Uint8Array(4);return ae&&ae.byteLength>0&&new DataView(H.buffer).setUint32(0,ae.byteLength,!1),Ue([112,115,115,104],new Uint8Array([we,0,0,0]),ue,Pe,ke,H,ae||new Uint8Array)}function ft(ue){if(!(ue instanceof ArrayBuffer)||ue.byteLength<32)return null;var ge={version:0,systemId:"",kids:null,data:null},ae=new DataView(ue),we=ae.getUint32(0);if(ue.byteLength!==we&&we>44||ae.getUint32(4)!==1886614376||(ge.version=ae.getUint32(8)>>>24,ge.version>1))return null;ge.systemId=I.default.hexDump(new Uint8Array(ue,12,16));var ke=ae.getUint32(28);if(ge.version===0){if(we-32<ke)return null;ge.data=new Uint8Array(ue,32,ke)}else if(ge.version===1){ge.kids=[];for(var Pe=0;Pe<ke;Pe++)ge.kids.push(new Uint8Array(ue,32+16*Pe,16))}return ge}},673:(E,S,b)=>{function L(I,k,z,Z){z===void 0&&(z=1),Z===void 0&&(Z=!1);var V=I*k*z;return Z?Math.round(V):V}function w(I,k,z,Z){return z===void 0&&(z=1),Z===void 0&&(Z=!1),L(I,k,1/z,Z)}function A(I,k){return k===void 0&&(k=!1),L(I,1e3,11111111111111112e-21,k)}function y(I,k){return k===void 0&&(k=1),L(I,9e4,1/k)}b.r(S),b.d(S,{toMpegTsClockFromTimescale:()=>y,toMsFromMpegTsClock:()=>A,toTimescaleFromBase:()=>L,toTimescaleFromScale:()=>w})},145:(E,S,b)=>{function L(w,A,y){return Uint8Array.prototype.slice?w.slice(A,y):new Uint8Array(Array.prototype.slice.call(w,A,y))}b.r(S),b.d(S,{sliceUint8:()=>L})},729:E=>{var S=Object.prototype.hasOwnProperty,b="~";function L(){}function w(k,z,Z){this.fn=k,this.context=z,this.once=Z||!1}function A(k,z,Z,V,M){if(typeof Z!="function")throw new TypeError("The listener must be a function");var B=new w(Z,V||k,M),re=b?b+z:z;return k._events[re]?k._events[re].fn?k._events[re]=[k._events[re],B]:k._events[re].push(B):(k._events[re]=B,k._eventsCount++),k}function y(k,z){--k._eventsCount==0?k._events=new L:delete k._events[z]}function I(){this._events=new L,this._eventsCount=0}Object.create&&(L.prototype=Object.create(null),new L().__proto__||(b=!1)),I.prototype.eventNames=function(){var k,z,Z=[];if(this._eventsCount===0)return Z;for(z in k=this._events)S.call(k,z)&&Z.push(b?z.slice(1):z);return Object.getOwnPropertySymbols?Z.concat(Object.getOwnPropertySymbols(k)):Z},I.prototype.listeners=function(k){var z=b?b+k:k,Z=this._events[z];if(!Z)return[];if(Z.fn)return[Z.fn];for(var V=0,M=Z.length,B=new Array(M);V<M;V++)B[V]=Z[V].fn;return B},I.prototype.listenerCount=function(k){var z=b?b+k:k,Z=this._events[z];return Z?Z.fn?1:Z.length:0},I.prototype.emit=function(k,z,Z,V,M,B){var re=b?b+k:k;if(!this._events[re])return!1;var q,Q,$=this._events[re],ie=arguments.length;if($.fn){switch($.once&&this.removeListener(k,$.fn,void 0,!0),ie){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,z),!0;case 3:return $.fn.call($.context,z,Z),!0;case 4:return $.fn.call($.context,z,Z,V),!0;case 5:return $.fn.call($.context,z,Z,V,M),!0;case 6:return $.fn.call($.context,z,Z,V,M,B),!0}for(Q=1,q=new Array(ie-1);Q<ie;Q++)q[Q-1]=arguments[Q];$.fn.apply($.context,q)}else{var pe,Ce=$.length;for(Q=0;Q<Ce;Q++)switch($[Q].once&&this.removeListener(k,$[Q].fn,void 0,!0),ie){case 1:$[Q].fn.call($[Q].context);break;case 2:$[Q].fn.call($[Q].context,z);break;case 3:$[Q].fn.call($[Q].context,z,Z);break;case 4:$[Q].fn.call($[Q].context,z,Z,V);break;default:if(!q)for(pe=1,q=new Array(ie-1);pe<ie;pe++)q[pe-1]=arguments[pe];$[Q].fn.apply($[Q].context,q)}}return!0},I.prototype.on=function(k,z,Z){return A(this,k,z,Z,!1)},I.prototype.once=function(k,z,Z){return A(this,k,z,Z,!0)},I.prototype.removeListener=function(k,z,Z,V){var M=b?b+k:k;if(!this._events[M])return this;if(!z)return y(this,M),this;var B=this._events[M];if(B.fn)B.fn!==z||V&&!B.once||Z&&B.context!==Z||y(this,M);else{for(var re=0,q=[],Q=B.length;re<Q;re++)(B[re].fn!==z||V&&!B[re].once||Z&&B[re].context!==Z)&&q.push(B[re]);q.length?this._events[M]=q.length===1?q[0]:q:y(this,M)}return this},I.prototype.removeAllListeners=function(k){var z;return k?(z=b?b+k:k,this._events[z]&&y(this,z)):(this._events=new L,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=b,I.EventEmitter=I,E.exports=I},945:function(E){var S,b,L,w,A;S=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,b=/^(?=([^\/?#]*))\1([^]*)$/,L=/(?:\/|^)\.(?=\/)/g,w=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,A={buildAbsoluteURL:function(y,I,k){if(k=k||{},y=y.trim(),!(I=I.trim())){if(!k.alwaysNormalize)return y;var z=A.parseURL(y);if(!z)throw new Error("Error trying to parse base URL.");return z.path=A.normalizePath(z.path),A.buildURLFromParts(z)}var Z=A.parseURL(I);if(!Z)throw new Error("Error trying to parse relative URL.");if(Z.scheme)return k.alwaysNormalize?(Z.path=A.normalizePath(Z.path),A.buildURLFromParts(Z)):I;var V=A.parseURL(y);if(!V)throw new Error("Error trying to parse base URL.");if(!V.netLoc&&V.path&&V.path[0]!=="/"){var M=b.exec(V.path);V.netLoc=M[1],V.path=M[2]}V.netLoc&&!V.path&&(V.path="/");var B={scheme:V.scheme,netLoc:Z.netLoc,path:null,params:Z.params,query:Z.query,fragment:Z.fragment};if(!Z.netLoc&&(B.netLoc=V.netLoc,Z.path[0]!=="/"))if(Z.path){var re=V.path,q=re.substring(0,re.lastIndexOf("/")+1)+Z.path;B.path=A.normalizePath(q)}else B.path=V.path,Z.params||(B.params=V.params,Z.query||(B.query=V.query));return B.path===null&&(B.path=k.alwaysNormalize?A.normalizePath(Z.path):Z.path),A.buildURLFromParts(B)},parseURL:function(y){var I=S.exec(y);return I?{scheme:I[1]||"",netLoc:I[2]||"",path:I[3]||"",params:I[4]||"",query:I[5]||"",fragment:I[6]||""}:null},normalizePath:function(y){for(y=y.split("").reverse().join("").replace(L,"");y.length!==(y=y.replace(w,"")).length;);return y.split("").reverse().join("")},buildURLFromParts:function(y){return y.scheme+y.netLoc+y.path+y.params+y.query+y.fragment}},E.exports=A}},c={};function g(E){var S=c[E];if(S!==void 0)return S.exports;var b=c[E]={exports:{}};return u[E].call(b.exports,b,b.exports,g),b.exports}g.m=u,g.n=E=>{var S=E&&E.__esModule?()=>E.default:()=>E;return g.d(S,{a:S}),S},g.d=(E,S)=>{for(var b in S)g.o(S,b)&&!g.o(E,b)&&Object.defineProperty(E,b,{enumerable:!0,get:S[b]})},g.o=(E,S)=>Object.prototype.hasOwnProperty.call(E,S),g.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var m=g(76);return m.default})())})(Mp);const hi=Fp(ta),Np={class:"video-player"},Up=Xt("video",{id:"player",controls:"",autoplay:"",controlsList:"nofullscreen nodownload"},null,-1),Bp={id:"controls"},Hp=Cd('<button id="list_up"><svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 346.35"><path fill-rule="nonzero" d="M410.1 346.35 256 201.69 101.9 346.35 0 240.31 256 0l256 240.31z"></path></svg></button><button id="list_down"><svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 346.35"><path fill-rule="nonzero" d="M410.1 0 256 144.66 101.9 0 0 106.04l256 240.31 256-240.31z"></path></svg></button>',2),Kp={id:"sound_up"},jp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 95.14",style:{"enable-background":"new 0 0 122.88 95.14"},"xml:space":"preserve"},Gp=Xt("g",null,[Xt("path",{d:"M95.18,26.66c0-1.88,1.52-3.4,3.4-3.4c1.88,0,3.4,1.52,3.4,3.4v17.51h17.51c1.88,0,3.4,1.52,3.4,3.4 c0,1.88-1.52,3.4-3.4,3.4h-17.51v17.51c0,1.88-1.52,3.4-3.4,3.4c-1.88,0-3.4-1.52-3.4-3.4V50.96H77.67c-1.88,0-3.4-1.52-3.4-3.4 c0-1.88,1.52-3.4,3.4-3.4h17.51V26.66L95.18,26.66z M10.82,22.49H35.9L57.26,1c1.32-1.33,3.46-1.33,4.79-0.01 c0.67,0.66,1,1.53,1,2.4h0.01v88.36c0,1.88-1.52,3.4-3.4,3.4c-0.95,0-1.81-0.39-2.43-1.02L36.08,76.29H10.82 c-2.98,0-5.68-1.22-7.64-3.18C1.22,71.15,0,68.45,0,65.47V33.31c0-2.98,1.22-5.68,3.17-7.64C5.13,23.71,7.84,22.49,10.82,22.49 L10.82,22.49z M37.3,29.28H10.82c-1.1,0-2.11,0.45-2.84,1.19c-0.73,0.73-1.19,1.74-1.19,2.84v32.16c0,1.1,0.45,2.11,1.19,2.84 c0.73,0.73,1.74,1.19,2.84,1.19H37.3v0.02c0.77,0,1.54,0.26,2.18,0.79l16.79,14.15V11.61L39.88,28.09 C39.26,28.82,38.33,29.28,37.3,29.28L37.3,29.28z"})],-1),Vp=[Gp],Wp={id:"sound_down"},Yp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 99.44",style:{"enable-background":"new 0 0 122.88 99.44"},"xml:space":"preserve"},qp=Xt("g",null,[Xt("path",{d:"M84.03,53.27c-1.96,0-3.55-1.59-3.55-3.55c0-1.96,1.59-3.55,3.55-3.55h35.3c1.96,0,3.55,1.59,3.55,3.55 c0,1.96-1.59,3.55-3.55,3.55H84.03L84.03,53.27z M11.31,23.51h26.22L59.85,1.04c1.38-1.39,3.62-1.39,5-0.01 c0.7,0.69,1.04,1.6,1.04,2.51h0.01v92.36c0,1.96-1.59,3.55-3.55,3.55c-0.99,0-1.89-0.41-2.54-1.07L37.72,79.74H11.31 c-3.11,0-5.94-1.27-7.99-3.32C1.27,74.37,0,71.55,0,68.43V34.82c0-3.11,1.27-5.94,3.32-7.99C5.37,24.78,8.19,23.51,11.31,23.51 L11.31,23.51z M38.99,30.61H11.31c-1.15,0-2.21,0.47-2.97,1.24c-0.76,0.76-1.24,1.82-1.24,2.97v33.62c0,1.15,0.48,2.2,1.24,2.97 c0.77,0.77,1.82,1.24,2.97,1.24h27.68v0.02c0.8,0,1.61,0.27,2.27,0.83l17.55,14.79V12.13L41.69,29.36 C41.03,30.12,40.07,30.61,38.99,30.61L38.99,30.61z"})],-1),$p=[qp],zp={id:"playlist"},Xp=["onClick"],Qp={class:"name"},Jp=Bl({__name:"app",async setup(e){let n,u;const{data:c}=([n,u]=jd(()=>xp('https://api.inicontent.com/iptv/playlist?_options[order_by]=["created_at","ASC"]&_options[per_page]=100&_options[columns]=["name","poster","source"]',{transform:E=>E.result},"$siNM9WAguS")),n=await n,u(),n),g=Sr(0),m=E=>{const S=new hi,b=document.getElementById("player");g.value=E,b.setAttribute("poster",c.value[E].poster),S.loadSource(c.value[E].source),S.attachMedia(b),S.on(hi.Events.MANIFEST_PARSED,()=>b.play())};return Vl(()=>{const E=new hi,S=document.getElementById("player");document.getElementById("sound_up").addEventListener("click",()=>{S.volume<1&&(S.volume=Number((S.volume+.2).toFixed(2)))}),document.getElementById("sound_down").addEventListener("click",()=>{S.volume>=.2&&(S.volume=Number((S.volume-.2).toFixed(2)))}),S.setAttribute("poster",c.value[0].poster),E.loadSource(c.value[0].source),E.attachMedia(S),E.on(hi.Events.MANIFEST_PARSED,()=>{S.play();var I,k=3e3;document.addEventListener("mousemove",function(){document.getElementById("controls").style.display="flex",document.getElementById("playlist").style.display="grid",clearTimeout(I),I=setTimeout(()=>{document.getElementById("controls").style.display="none",document.getElementById("playlist").style.display="none"},k)})}),S.addEventListener("mouseup",k=>{k.preventDefault();var k=k||window.event;k.button===0?S.paused?S.play():S.pause():k.button===4?g.value>0&&m(g.value-1):k.button===3&&g.value<c.value.length&&m(g.value+1)});var b=document.getElementById("playlist"),L=0,w=120,A=document.getElementById("playlist").clientHeight;document.getElementById("list_up").addEventListener("click",()=>{var I=L-w;I<0||(L=I,b==null||b.scrollTo({top:I,behavior:"smooth"}))}),document.getElementById("list_down").addEventListener("click",()=>{var I=L+w;I>=A||(L=I,b==null||b.scrollTo({top:I,behavior:"smooth"}))});function y(I){var k=Date.now();return function(z){Math.abs(z.deltaY)<4||k+I-Date.now()<0&&(z.deltaY<0?S.volume<1&&(S.volume=Number((S.volume+.2).toFixed(2))):z.deltaY>0&&S.volume>=.2&&(S.volume=Number((S.volume-.2).toFixed(2))),k=Date.now())}}S.addEventListener("wheel",y(100))}),(E,S)=>(dr(),wn("div",Np,[Up,Xt("div",Bp,[Hp,Xt("button",Kp,[(dr(),wn("svg",jp,Vp))]),Xt("button",Wp,[(dr(),wn("svg",Yp,$p))])]),Xt("div",zp,[(dr(!0),wn($t,null,cd(Ut(c),({poster:b,name:L},w)=>(dr(),wn("div",{key:w,class:Wn(["item",{active:Ut(g)===w}]),style:Vn({backgroundImage:"url("+b+")"}),onClick:()=>m(w)},[Xt("span",Qp,Gc(L),1)],14,Xp))),128))])]))}});const sl={__name:"nuxt-root",setup(e){const n=td(()=>pp(()=>import("./error-component.3234c92a.js"),[],import.meta.url).then(S=>S.default||S)),u=()=>null,c=Zt(),g=c.deferHydration();Nl("_route",op()),c.hooks.callHookWith(S=>S.map(b=>b()),"vue:setup");const m=Ia();Yl((S,b,L)=>{c.hooks.callHook("vue:error",S,b,L).catch(w=>console.error("[nuxt] Error in `vue:error` hook",w)),np(S)&&(S.fatal||S.unhandled)&&sn(c,tp,[S])});const{islandContext:E}=!1;return(S,b)=>(dr(),ci($f,{onResolve:Ut(g)},{default:Fl(()=>[Ut(m)?(dr(),ci(Ut(n),{key:0,error:Ut(m)},null,8,["error"])):Ut(E)?(dr(),ci(Ut(u),{key:1,context:Ut(E)},null,8,["context"])):(dr(),ci(Ut(Jp),{key:2}))]),_:1},8,["onResolve"]))}};globalThis.$fetch||(globalThis.$fetch=zh.create({baseURL:Qh()}));let al;const Zp=fg(dp);al=async function(){var g;const u=Boolean((g=window.__NUXT__)==null?void 0:g.serverRendered)?dh(sl):fh(sl),c=lg({vueApp:u});try{await cg(c,Zp)}catch(m){await c.callHook("app:error",m),c.payload.error=c.payload.error||m}try{await c.hooks.callHook("app:created",u),await c.hooks.callHook("app:beforeMount",u),u.mount("#"+zg),await c.hooks.callHook("app:mounted",u),await va()}catch(m){await c.callHook("app:error",m),c.payload.error=c.payload.error||m}},al().catch(e=>{console.error("Error while mounting app:",e)});export{rv as A,pp as _,Zt as a,ap as b,ci as c,td as d,Bl as e,uu as f,Id as g,ka as h,Vl as i,Wl as j,Gd as k,nv as l,hu as m,ev as n,dr as o,Bi as p,up as q,Sr as r,wn as s,Xt as t,Ut as u,Gc as v,xt as w,Fl as x,au as y,tv as z};
